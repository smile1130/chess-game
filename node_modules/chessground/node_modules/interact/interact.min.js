(function(){"use strict";var document=window.document,console=window.console,SVGElement=window.SVGElement||blank,SVGSVGElement=window.SVGSVGElement||blank,SVGElementInstance=window.SVGElementInstance||blank,HTMLElement=window.HTMLElement||window.Element,Gesture=window.Gesture||window.MSGesture,PointerEvent=Gesture&&(window.PointerEvent||window.MSPointerEvent),GestureEvent=Gesture&&(window.GestureEvent||window.MSGestureEvent),pEventTypes,gEventTypes,hypot=Math.hypot||function(x,y){return Math.sqrt(x*x+y*y)},prevCoords={pageX:0,pageY:0,clientX:0,clientY:0,timeStamp:0},curCoords={pageX:0,pageY:0,clientX:0,clientY:0,timeStamp:0},startCoords={pageX:0,pageY:0,clientX:0,clientY:0,timeStamp:0},pointerDelta={pageX:0,pageY:0,clientX:0,clientY:0,pageSpeed:0,clientSpeed:0,timeStamp:0},pointerIds=[],pointerMoves=[],downTime=0,downEvent=null,prevEvent=null,tapTime=0,prevTap=null,startOffset={left:0,right:0,top:0,bottom:0},restrictOffset={left:0,right:0,top:0,bottom:0},snapOffset={x:0,y:0},tmpXY={},inertiaStatus={active:false,smoothEnd:false,target:null,targetElement:null,startEvent:null,pointerUp:{},xe:0,ye:0,sx:0,sy:0,t0:0,vx0:0,vys:0,duration:0,resumeDx:0,resumeDy:0,lambda_v0:0,one_ve_v0:0,i:null},gesture={start:{x:0,y:0},startDistance:0,prevDistance:0,distance:0,scale:1,startAngle:0,prevAngle:0},interactables=[],dropzones=[],activeDrops={dropzones:[],elements:[],rects:[]},matches=[],selectorGesture=null,delegatedEvents={},target=null,dropTarget=null,dropElement=null,prevDropTarget=null,prevDropElement=null,defaultOptions={draggable:false,dragAxis:"xy",dropzone:false,accept:null,resizable:false,squareResize:false,resizeAxis:"xy",gesturable:false,pointerMoveTolerance:1,actionChecker:null,styleCursor:true,preventDefault:"auto",snap:{mode:"grid",endOnly:false,actions:["drag"],range:Infinity,grid:{x:100,y:100},gridOffset:{x:0,y:0},anchors:[],paths:[],elementOrigin:null,arrayTypes:/^anchors$|^paths$|^actions$/,objectTypes:/^grid$|^gridOffset$|^elementOrigin$/,stringTypes:/^mode$/,numberTypes:/^range$/,boolTypes:/^endOnly$/},snapEnabled:false,restrict:{drag:null,resize:null,gesture:null,endOnly:false},restrictEnabled:false,autoScroll:{container:window,margin:60,speed:300,numberTypes:/^margin$|^speed$/},autoScrollEnabled:false,inertia:{resistance:10,minSpeed:100,endSpeed:10,zeroResumeDelta:false,smoothEndDuration:300,actions:["drag","resize"],numberTypes:/^resistance$|^minSpeed$|^endSpeed$|^smoothEndDuration$/,arrayTypes:/^actions$/,boolTypes:/^zeroResumeDelta$/},inertiaEnabled:false,origin:{x:0,y:0},deltaSource:"page",context:document},snapStatus={x:0,y:0,dx:0,dy:0,realX:0,realY:0,snappedX:0,snappedY:0,anchors:[],paths:[],locked:false,changed:false},restrictStatus={dx:0,dy:0,restrictedX:0,restrictedY:0,snap:snapStatus,restricted:false,changed:false},autoScroll={target:null,i:null,x:0,y:0,scroll:function(){var options=autoScroll.target.options.autoScroll,container=options.container,now=(new Date).getTime(),dt=(now-autoScroll.prevTime)/1e3,s=options.speed*dt;if(s>=1){if(container instanceof window.Window){container.scrollBy(autoScroll.x*s,autoScroll.y*s)}else if(container){container.scrollLeft+=autoScroll.x*s;container.scrollTop+=autoScroll.y*s}autoScroll.prevTime=now}if(autoScroll.isScrolling){cancelFrame(autoScroll.i);autoScroll.i=reqFrame(autoScroll.scroll)}},edgeMove:function(event){if(target&&target.options.autoScrollEnabled&&(dragging||resizing)){var top,right,bottom,left,options=target.options.autoScroll;if(options.container instanceof window.Window){left=event.clientX<autoScroll.margin;top=event.clientY<autoScroll.margin;right=event.clientX>options.container.innerWidth-autoScroll.margin;bottom=event.clientY>options.container.innerHeight-autoScroll.margin}else{var rect=getElementRect(options.container);left=event.clientX<rect.left+autoScroll.margin;top=event.clientY<rect.top+autoScroll.margin;right=event.clientX>rect.right-autoScroll.margin;bottom=event.clientY>rect.bottom-autoScroll.margin}autoScroll.x=right?1:left?-1:0;autoScroll.y=bottom?1:top?-1:0;if(!autoScroll.isScrolling){autoScroll.margin=options.margin;autoScroll.speed=options.speed;autoScroll.start(target)}}},isScrolling:false,prevTime:0,start:function(target){autoScroll.isScrolling=true;cancelFrame(autoScroll.i);autoScroll.target=target;autoScroll.prevTime=(new Date).getTime();autoScroll.i=reqFrame(autoScroll.scroll)},stop:function(){autoScroll.isScrolling=false;cancelFrame(autoScroll.i)}},supportsTouch="ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch,margin=supportsTouch?20:10,pointerIsDown=false,pointerWasMoved=false,gesturing=false,dragging=false,dynamicDrop=false,resizing=false,resizeAxes="xy",actions={drag:{cursor:"move",start:dragStart,move:dragMove},resizex:{cursor:"e-resize",start:resizeStart,move:resizeMove},resizey:{cursor:"s-resize",start:resizeStart,move:resizeMove},resizexy:{cursor:"se-resize",start:resizeStart,move:resizeMove},gesture:{cursor:"",start:gestureStart,move:gestureMove}},actionIsEnabled={drag:true,resize:true,gesture:true},prepared=null,wheelEvent="onmousewheel"in document?"mousewheel":"wheel",eventTypes=["dragstart","dragmove","draginertiastart","dragend","dragenter","dragleave","dropactivate","dropdeactivate","dropmove","drop","resizestart","resizemove","resizeinertiastart","resizeend","gesturestart","gesturemove","gestureinertiastart","gestureend","tap","doubletap"],globalEvents={},fireStates={directBind:0,onevent:1,globalBind:2},isOperaMobile=navigator.appName=="Opera"&&supportsTouch&&navigator.userAgent.match("Presto"),prefixedMatchesSelector="matchesSelector"in Element.prototype?"matchesSelector":"webkitMatchesSelector"in Element.prototype?"webkitMatchesSelector":"mozMatchesSelector"in Element.prototype?"mozMatchesSelector":"oMatchesSelector"in Element.prototype?"oMatchesSelector":"msMatchesSelector",ie8MatchesSelector,reqFrame=window.requestAnimationFrame,cancelFrame=window.cancelAnimationFrame,windowTarget={_element:window,events:{}},docTarget={_element:document,events:{}},parentWindowTarget={_element:window.parent,events:{}},parentDocTarget={_element:null,events:{}},events=function(){var useAttachEvent="attachEvent"in window&&!("addEventListener"in window),addEvent=useAttachEvent?"attachEvent":"addEventListener",removeEvent=useAttachEvent?"detachEvent":"removeEventListener",on=useAttachEvent?"on":"",elements=[],targets=[],attachedListeners=[];function add(element,type,listener,useCapture){var elementIndex=indexOf(elements,element),target=targets[elementIndex];if(!target){target={events:{},typeCount:0};elementIndex=elements.push(element)-1;targets.push(target);attachedListeners.push(useAttachEvent?{supplied:[],wrapped:[],useCount:[]}:null)}if(!target.events[type]){target.events[type]=[];target.typeCount++}if(!contains(target.events[type],listener)){var ret;if(useAttachEvent){var listeners=attachedListeners[elementIndex],listenerIndex=indexOf(listeners.supplied,listener);var wrapped=listeners.wrapped[listenerIndex]||function(event){if(!event.immediatePropagationStopped){event.target=event.srcElement;event.currentTarget=element;event.preventDefault=event.preventDefault||preventDef;event.stopPropagation=event.stopPropagation||stopProp;event.stopImmediatePropagation=event.stopImmediatePropagation||stopImmProp;if(/mouse|click/.test(event.type)){event.pageX=event.clientX+document.documentElement.scrollLeft;event.pageY=event.clientY+document.documentElement.scrollTop}listener(event)}};ret=element[addEvent](on+type,wrapped,Boolean(useCapture));if(listenerIndex===-1){listeners.supplied.push(listener);listeners.wrapped.push(wrapped);listeners.useCount.push(1)}else{listeners.useCount[listenerIndex]++}}else{ret=element[addEvent](type,listener,useCapture||false)}target.events[type].push(listener);return ret}}function remove(element,type,listener,useCapture){var i,elementIndex=indexOf(elements,element),target=targets[elementIndex],listeners,listenerIndex,wrapped=listener;if(!target||!target.events){return}if(useAttachEvent){listeners=attachedListeners[elementIndex];listenerIndex=indexOf(listeners.supplied,listener);wrapped=listeners.wrapped[listenerIndex]}if(type==="all"){for(type in target.events){if(target.events.hasOwnProperty(type)){remove(element,type,"all")}}return}if(target.events[type]){var len=target.events[type].length;if(listener==="all"){for(i=0;i<len;i++){remove(element,type,target.events[type][i],Boolean(useCapture))}}else{for(i=0;i<len;i++){if(target.events[type][i]===listener){element[removeEvent](on+type,wrapped,useCapture||false);target.events[type].splice(i,1);if(useAttachEvent&&listeners){listeners.useCount[listenerIndex]--;if(listeners.useCount[listenerIndex]===0){listeners.supplied.splice(listenerIndex,1);listeners.wrapped.splice(listenerIndex,1);listeners.useCount.splice(listenerIndex,1)}}break}}}if(target.events[type]&&target.events[type].length===0){target.events[type]=null;target.typeCount--}}if(!target.typeCount){targets.splice(elementIndex);elements.splice(elementIndex);attachedListeners.splice(elementIndex)}}function preventDef(){this.returnValue=false}function stopProp(){this.cancelBubble=true}function stopImmProp(){this.cancelBubble=true;this.immediatePropagationStopped=true}return{add:function(target,type,listener,useCapture){add(target._element,type,listener,useCapture)},remove:function(target,type,listener,useCapture){remove(target._element,type,listener,useCapture)},addToElement:add,removeFromElement:remove,useAttachEvent:useAttachEvent,indexOf:indexOf}}();function blank(){}function isElement(o){return!!o&&typeof o==="object"&&(/object|function/.test(typeof Element)?o instanceof Element:o.nodeType===1&&typeof o.nodeName==="string")}function isObject(thing){return thing instanceof Object}function isArray(thing){return thing instanceof Array}function isFunction(thing){return typeof thing==="function"}function isNumber(thing){return typeof thing==="number"}function isBool(thing){return typeof thing==="boolean"}function isString(thing){return typeof thing==="string"}function extend(dest,source){for(var prop in source){dest[prop]=source[prop]}return dest}function cloneEvent(event){var clone=extend({},event),i;clone.constructor=event.constructor;if(event.touches){clone.touches=[];clone.changedTouches=[];for(i=0;i<event.touches.length;i++){clone.touches.push(extend({},event.touches[i]))}for(i=0;i<event.touches.length;i++){clone.changedTouches.push(extend({},event.changedTouches[i]))}}return clone}function setEventXY(targetObj,source){getPageXY(source,tmpXY);targetObj.pageX=tmpXY.x;targetObj.pageY=tmpXY.y;getClientXY(source,tmpXY);targetObj.clientX=tmpXY.x;targetObj.clientY=tmpXY.y;targetObj.timeStamp=(new Date).getTime()}function setEventDeltas(targetObj,prev,cur){targetObj.pageX=cur.pageX-prev.pageX;targetObj.pageY=cur.pageY-prev.pageY;targetObj.clientX=cur.clientX-prev.clientX;targetObj.clientY=cur.clientY-prev.clientY;targetObj.timeStamp=(new Date).getTime()-prev.timeStamp;var dt=Math.max(targetObj.timeStamp/1e3,.001);targetObj.pageSpeed=hypot(targetObj.pageX,targetObj.pageY)/dt;targetObj.pageVX=targetObj.pageX/dt;targetObj.pageVY=targetObj.pageY/dt;targetObj.clientSpeed=hypot(targetObj.clientX,targetObj.pageY)/dt;targetObj.clientVX=targetObj.clientX/dt;targetObj.clientVY=targetObj.clientY/dt}function getXY(type,event,xy){var touch,x,y;xy=xy||{};type=type||"page";if(/touch/.test(event.type)&&event.touches){touch=event.touches.length?event.touches[0]:event.changedTouches[0];x=touch[type+"X"];y=touch[type+"Y"]}else{x=event[type+"X"];y=event[type+"Y"]}xy.x=x;xy.y=y;return xy}function getPageXY(event,page){page=page||{};if(event instanceof InteractEvent){if(/inertiastart/.test(event.type)){getPageXY(inertiaStatus.pointerUp,page);page.x+=inertiaStatus.sx;page.y+=inertiaStatus.sy}else{page.x=event.pageX;page.y=event.pageY}}else if(isOperaMobile){getXY("screen",event,page);page.x+=window.scrollX;page.y+=window.scrollY}else if(/gesture|inertia/i.test(event.type)){getXY("client",event,page);page.x+=document.documentElement.scrollLeft;page.y+=document.documentElement.scrollTop}else{getXY("page",event,page)}return page}function getClientXY(event,client){client=client||{};if(event instanceof InteractEvent){if(/inertiastart/.test(event.type)){getClientXY(inertiaStatus.pointerUp,client);client.x+=inertiaStatus.sx;client.y+=inertiaStatus.sy}else{client.x=event.clientX;client.y=event.clientY}}else{getXY(isOperaMobile?"screen":"client",event,client)}return client}function getScrollXY(){return{x:window.scrollX||document.documentElement.scrollLeft,y:window.scrollY||document.documentElement.scrollTop}}function getElementRect(element){var scroll=/ipad|iphone|ipod/i.test(navigator.userAgent)?{x:0,y:0}:getScrollXY(),clientRect=element instanceof SVGElement?element.getBoundingClientRect():element.getClientRects()[0];return clientRect&&{left:clientRect.left+scroll.x,right:clientRect.right+scroll.x,top:clientRect.top+scroll.y,bottom:clientRect.bottom+scroll.y,width:clientRect.width||clientRect.right-clientRect.left,height:clientRect.heigh||clientRect.bottom-clientRect.top}}function getTouchPair(event){var touches=[];if(isArray(event)){touches[0]=event[0];touches[1]=event[1]}else{if(event.type==="touchend"){if(event.touches.length===1){touches[0]=event.touches[0];touches[1]=event.changedTouches[0]}else if(event.touches.length===0){touches[0]=event.changedTouches[0];touches[1]=event.changedTouches[1]}}else{touches[0]=event.touches[0];touches[1]=event.touches[1]}}return touches}function touchAverage(event){var touches=getTouchPair(event);return{pageX:(touches[0].pageX+touches[1].pageX)/2,pageY:(touches[0].pageY+touches[1].pageY)/2,clientX:(touches[0].clientX+touches[1].clientX)/2,clientY:(touches[0].clientY+touches[1].clientY)/2}}function touchBBox(event){if(!(event.touches&&event.touches.length)&&!pointerMoves.length){return}var touches=getTouchPair(event),minX=Math.min(touches[0].pageX,touches[1].pageX),minY=Math.min(touches[0].pageY,touches[1].pageY),maxX=Math.max(touches[0].pageX,touches[1].pageX),maxY=Math.max(touches[0].pageY,touches[1].pageY);return{x:minX,y:minY,left:minX,top:minY,width:maxX-minX,height:maxY-minY}}function touchDistance(event){var deltaSource=(target&&target.options||defaultOptions).deltaSource,sourceX=deltaSource+"X",sourceY=deltaSource+"Y",touches=getTouchPair(event);var dx=touches[0][sourceX]-touches[1][sourceX],dy=touches[0][sourceY]-touches[1][sourceY];return hypot(dx,dy)}function touchAngle(event,prevAngle){var deltaSource=(target&&target.options||defaultOptions).deltaSource,sourceX=deltaSource+"X",sourceY=deltaSource+"Y",touches=getTouchPair(event),dx=touches[0][sourceX]-touches[1][sourceX],dy=touches[0][sourceY]-touches[1][sourceY],angle=180*Math.atan(dy/dx)/Math.PI;if(isNumber(prevAngle)){var dr=angle-prevAngle,drClamped=dr%360;if(drClamped>315){angle-=360+angle/360|0*360}else if(drClamped>135){angle-=180+angle/360|0*360}else if(drClamped<-315){angle+=360+angle/360|0*360}else if(drClamped<-135){angle+=180+angle/360|0*360}}return angle}function getOriginXY(interactable,element){interactable=interactable||target;var origin=interactable?interactable.options.origin:defaultOptions.origin;element=element||interactable._element;if(origin==="parent"){origin=element.parentNode}else if(origin==="self"){origin=element}if(isElement(origin)){origin=getElementRect(origin);origin.x=origin.left;origin.y=origin.top}else if(isFunction(origin)){origin=origin(interactable&&element)}return origin}function calcInertia(status){var inertiaOptions=status.target.options.inertia,lambda=inertiaOptions.resistance,inertiaDur=-Math.log(inertiaOptions.endSpeed/status.v0)/lambda;status.x0=prevEvent.pageX;status.y0=prevEvent.pageY;status.t0=status.startEvent.timeStamp/1e3;status.sx=status.sy=0;status.modifiedXe=status.xe=(status.vx0-inertiaDur)/lambda;status.modifiedYe=status.ye=(status.vy0-inertiaDur)/lambda;status.te=inertiaDur;status.lambda_v0=lambda/status.v0;status.one_ve_v0=1-inertiaOptions.endSpeed/status.v0}function inertiaFrame(){var options=inertiaStatus.target.options.inertia,lambda=options.resistance,t=(new Date).getTime()/1e3-inertiaStatus.t0;if(t<inertiaStatus.te){var progress=1-(Math.exp(-lambda*t)-inertiaStatus.lambda_v0)/inertiaStatus.one_ve_v0;if(inertiaStatus.modifiedXe===inertiaStatus.xe&&inertiaStatus.modifiedYe===inertiaStatus.ye){inertiaStatus.sx=inertiaStatus.xe*progress;inertiaStatus.sy=inertiaStatus.ye*progress}else{var quadPoint=getQuadraticCurvePoint(0,0,inertiaStatus.xe,inertiaStatus.ye,inertiaStatus.modifiedXe,inertiaStatus.modifiedYe,progress);inertiaStatus.sx=quadPoint.x;inertiaStatus.sy=quadPoint.y}pointerMove(inertiaStatus.startEvent);inertiaStatus.i=reqFrame(inertiaFrame)}else{inertiaStatus.sx=inertiaStatus.modifiedXe;inertiaStatus.sy=inertiaStatus.modifiedYe;pointerMove(inertiaStatus.startEvent);inertiaStatus.active=false;pointerUp(inertiaStatus.startEvent)}}function smoothEndFrame(){var t=(new Date).getTime()-inertiaStatus.t0,duration=inertiaStatus.target.options.inertia.smoothEndDuration;if(t<duration){inertiaStatus.sx=easeOutQuad(t,0,inertiaStatus.xe,duration);inertiaStatus.sy=easeOutQuad(t,0,inertiaStatus.ye,duration);pointerMove(inertiaStatus.startEvent);inertiaStatus.i=reqFrame(smoothEndFrame)}else{inertiaStatus.active=false;inertiaStatus.smoothEnd=false;pointerMove(inertiaStatus.startEvent);pointerUp(inertiaStatus.startEvent)}}function _getQBezierValue(t,p1,p2,p3){var iT=1-t;return iT*iT*p1+2*iT*t*p2+t*t*p3}function getQuadraticCurvePoint(startX,startY,cpX,cpY,endX,endY,position){return{x:_getQBezierValue(position,startX,cpX,endX),y:_getQBezierValue(position,startY,cpY,endY)}}function easeOutQuad(t,b,c,d){t/=d;return-c*t*(t-2)+b}function nodeContains(parent,child){while(child=child.parentNode){if(child===parent){return true}}return false}function inContext(interactable,element){return interactable._context===document||nodeContains(interactable._context,element)}function testIgnore(interactable,element){var ignoreFrom=interactable.options.ignoreFrom;if(!ignoreFrom||!isElement(element)||element===interactable._element.parentNode){return false}if(isString(ignoreFrom)){return matchesSelector(element,ignoreFrom)||testIgnore(interactable,element.parentNode)}else if(isElement(ignoreFrom)){return element===ignoreFrom||nodeContains(ignoreFrom,element)}return false}function testAllow(interactable,element){var allowFrom=interactable.options.allowFrom;if(!allowFrom){return true}if(!isElement(element)||element===interactable._element.parentNode){return false}if(isString(allowFrom)){return matchesSelector(element,allowFrom)||testAllow(interactable,element.parentNode)}else if(isElement(allowFrom)){return element===allowFrom||nodeContains(allowFrom,element)}return false}function checkAndPreventDefault(event,interactable){if(!interactable){return}var options=interactable.options,prevent=options.preventDefault;if(prevent==="auto"&&!/^input$|^textarea$/i.test(target._element.nodeName)){if(/down|start/i.test(event.type)&&prepared==="drag"&&options.dragAxis!=="xy"){return}event.preventDefault();return}if(prevent===true){event.preventDefault();return}}function checkAxis(axis,interactable){if(!interactable){return false}var thisAxis=interactable.options.dragAxis;return axis==="xy"||thisAxis==="xy"||thisAxis===axis}function checkSnap(interactable,action){var options=interactable.options;action=action||prepared;if(/^resize/.test(action)){action="resize"}return options.snapEnabled&&contains(options.snap.actions,action)}function checkRestrict(interactable,action){var options=interactable.options;action=action||prepared;if(/^resize/.test(action)){action="resize"}return options.restrictEnabled&&options.restrict[action]}function collectDrops(element){var drops=[],elements=[],i;element=element||target._element;for(i=0;i<dropzones.length;i++){var current=dropzones[i];if(isElement(current.options.accept)&&current.options.accept!==element||isString(current.options.accept)&&!matchesSelector(element,current.options.accept)){continue}if(current.selector){current._dropElements=current._context.querySelectorAll(current.selector)}for(var j=0,len=current._dropElements.length;j<len;j++){var currentElement=current._dropElements[j];if(currentElement===element){continue}drops.push(current);elements.push(currentElement)}}return{dropzones:drops,elements:elements}}function fireActiveDrops(event){var i,current,currentElement,prevElement;for(i=0;i<activeDrops.dropzones.length;i++){current=activeDrops.dropzones[i];currentElement=activeDrops.elements[i];if(currentElement!==prevElement){event.target=currentElement;current.fire(event)}prevElement=currentElement}}function indexOfDeepestElement(elements){var dropzone,deepestZone=elements[0],index=deepestZone?0:-1,parent,deepestZoneParents=[],dropzoneParents=[],child,i,n;for(i=1;i<elements.length;i++){dropzone=elements[i];if(!dropzone||dropzone===deepestZone){continue}if(!deepestZone){deepestZone=dropzone;index=i;continue}if(dropzone.parentNode===document){continue}else if(deepestZone.parentNode===document){deepestZone=dropzone;index=i;continue}if(!deepestZoneParents.length){parent=deepestZone;while(parent.parentNode&&parent.parentNode!==document){deepestZoneParents.unshift(parent);parent=parent.parentNode}}if(deepestZone instanceof HTMLElement&&dropzone instanceof SVGElement&&!(dropzone instanceof SVGSVGElement)){if(dropzone===deepestZone.parentNode){continue}parent=dropzone.ownerSVGElement}else{parent=dropzone}dropzoneParents=[];while(parent.parentNode!==document){dropzoneParents.unshift(parent);parent=parent.parentNode}n=0;while(dropzoneParents[n]&&dropzoneParents[n]===deepestZoneParents[n]){n++}var parents=[dropzoneParents[n-1],dropzoneParents[n],deepestZoneParents[n]];child=parents[0].lastChild;while(child){if(child===parents[1]){deepestZone=dropzone;index=i;deepestZoneParents=[];break}else if(child===parents[2]){break}child=child.previousSibling}}return index}function setActiveDrops(dragElement){var possibleDrops=collectDrops(dragElement,true);activeDrops.dropzones=possibleDrops.dropzones;activeDrops.elements=possibleDrops.elements;activeDrops.rects=[];for(var i=0;i<activeDrops.dropzones.length;i++){activeDrops.rects[i]=activeDrops.dropzones[i].getRect(activeDrops.elements[i])}}function getDrop(event,dragElement){var validDrops=[];if(dynamicDrop){setActiveDrops(dragElement)}for(var j=0;j<activeDrops.dropzones.length;j++){var current=activeDrops.dropzones[j],currentElement=activeDrops.elements[j],rect=activeDrops.rects[j];validDrops.push(current.dropCheck(event,target,dragElement,rect)?currentElement:null)}var dropIndex=indexOfDeepestElement(validDrops),dropzone=activeDrops.dropzones[dropIndex]||null,element=activeDrops.elements[dropIndex]||null;if(dropzone&&dropzone.selector){dropzone._element=element}return{dropzone:dropzone,element:element}}function getDropEvents(pointerEvent,dragEvent,starting){var dragLeaveEvent=null,dragEnterEvent=null,dropActivateEvent=null,dropDectivateEvent=null,dropMoveEvent=null,dropEvent=null;if(dropElement!==prevDropElement){if(prevDropTarget){dragLeaveEvent=new InteractEvent(pointerEvent,"drag","leave",prevDropElement,dragEvent.target);dragEvent.dragLeave=prevDropElement}if(dropTarget){dragEnterEvent=new InteractEvent(pointerEvent,"drag","enter",dropElement,dragEvent.target);dragEvent.dragEnter=dropElement}}if(dragEvent.type==="dragend"&&dropTarget){dropEvent=new InteractEvent(pointerEvent,"drop",null,dropElement,dragEvent.target)}if(dragEvent.type==="dragstart"){dropActivateEvent=new InteractEvent(pointerEvent,"drop","activate",null,dragEvent.target)}if(dragEvent.type==="dragend"){dropDectivateEvent=new InteractEvent(pointerEvent,"drop","deactivate",null,dragEvent.target)}if(dragEvent.type==="dragmove"&&dropTarget){dropMoveEvent={target:dropElement,relatedTarget:dragEvent.target,dragmove:dragEvent,type:"dropmove",timeStamp:dragEvent.timeStamp}}return{enter:dragEnterEvent,leave:dragLeaveEvent,activate:dropActivateEvent,deactivate:dropDectivateEvent,move:dropMoveEvent,drop:dropEvent}}function InteractEvent(event,action,phase,element,related){var client,page,deltaSource=(target&&target.options||defaultOptions).deltaSource,sourceX=deltaSource+"X",sourceY=deltaSource+"Y",options=target?target.options:defaultOptions,origin=getOriginXY(target,element),starting=phase==="start",ending=phase==="end";element=element||target._element;if(action==="gesture"){var average=touchAverage(pointerMoves);page={x:average.pageX-origin.x,y:average.pageY-origin.y};client={x:average.clientX-origin.x,y:average.clientY-origin.y}}else{page=getPageXY(event);client=getClientXY(event);page.x-=origin.x;page.y-=origin.y;client.x-=origin.x;client.y-=origin.y;if(checkSnap(target)&&!(starting&&options.snap.elementOrigin)){this.snap={range:snapStatus.range,locked:snapStatus.locked,x:snapStatus.snappedX,y:snapStatus.snappedY,realX:snapStatus.realX,realY:snapStatus.realY,dx:snapStatus.dx,dy:snapStatus.dy};if(snapStatus.locked){page.x+=snapStatus.dx;page.y+=snapStatus.dy;client.x+=snapStatus.dx;client.y+=snapStatus.dy}}}if(checkRestrict(target)&&!(starting&&options.restrict.elementRect)&&restrictStatus.restricted){page.x+=restrictStatus.dx;page.y+=restrictStatus.dy;client.x+=restrictStatus.dx;client.y+=restrictStatus.dy;this.restrict={dx:restrictStatus.dx,dy:restrictStatus.dy}}this.pageX=page.x;this.pageY=page.y;this.clientX=client.x;this.clientY=client.y;this.x0=startCoords.pageX;this.y0=startCoords.pageY;this.clientX0=startCoords.clientX;this.clientY0=startCoords.clientY;this.ctrlKey=event.ctrlKey;this.altKey=event.altKey;this.shiftKey=event.shiftKey;this.metaKey=event.metaKey;this.button=event.button;this.target=element;this.t0=downTime;this.type=action+(phase||"");this.interactable=target;if(inertiaStatus.active){this.detail="inertia"}if(related){this.relatedTarget=related}if(ending||action==="drop"){if(deltaSource==="client"){this.dx=client.x-startCoords.clientX;this.dy=client.y-startCoords.clientY}else{this.dx=page.x-startCoords.pageX;this.dy=page.y-startCoords.pageY}}else if(phase==="inertiastart"){this.dx=prevEvent.dx;this.dy=prevEvent.dy}else{if(deltaSource==="client"){this.dx=client.x-prevEvent.clientX;this.dy=client.y-prevEvent.clientY}else{this.dx=page.x-prevEvent.pageX;this.dy=page.y-prevEvent.pageY}}if(prevEvent&&prevEvent.detail==="inertia"&&!inertiaStatus.active&&options.inertia.zeroResumeDelta){inertiaStatus.resumeDx+=this.dx;inertiaStatus.resumeDy+=this.dy;this.dx=this.dy=0}if(action==="resize"){if(options.squareResize||event.shiftKey){if(resizeAxes==="y"){this.dx=this.dy}else{this.dy=this.dx}this.axes="xy"}else{this.axes=resizeAxes;if(resizeAxes==="x"){this.dy=0}else if(resizeAxes==="y"){this.dx=0}}}else if(action==="gesture"){this.touches=PointerEvent?[pointerMoves[0],pointerMoves[1]]:event.touches;if(starting){this.distance=touchDistance(pointerMoves);this.box=touchBBox(pointerMoves);this.scale=1;this.ds=0;this.angle=touchAngle(pointerMoves);this.da=0}else if(ending||event instanceof InteractEvent){this.distance=prevEvent.distance;this.box=prevEvent.box;this.scale=prevEvent.scale;this.ds=this.scale-1;this.angle=prevEvent.angle;this.da=this.angle-gesture.startAngle}else{this.distance=touchDistance(pointerMoves);this.box=touchBBox(pointerMoves);this.scale=this.distance/gesture.startDistance;this.angle=touchAngle(pointerMoves,gesture.prevAngle);this.ds=this.scale-gesture.prevScale;this.da=this.angle-gesture.prevAngle}}if(starting){this.timeStamp=downTime;this.dt=0;this.duration=0;this.speed=0;this.velocityX=0;this.velocityY=0}else if(phase==="inertiastart"){this.timeStamp=(new Date).getTime();this.dt=prevEvent.dt;this.duration=prevEvent.duration;this.speed=prevEvent.speed;this.velocityX=prevEvent.velocityX;this.velocityY=prevEvent.velocityY}else{this.timeStamp=(new Date).getTime();this.dt=this.timeStamp-prevEvent.timeStamp;this.duration=this.timeStamp-downTime;var dx,dy,dt;if(ending||event instanceof InteractEvent){dt=Math.max((ending?this.duration:this.dt)/1e3,.001);dx=this[sourceX]-prevEvent[sourceX];dy=this[sourceY]-prevEvent[sourceY];if(this.snap&&this.snap.locked){dx-=this.snap.dx;dy-=this.snap.dy}if(this.restrict){dx-=this.restrict.dx;dy-=this.restrict.dy}if(prevEvent.snap&&prevEvent.snap.locked){dx-=prevEvent[sourceX]-prevEvent.snap.dx;dy-=prevEvent[sourceY]-prevEvent.snap.dy}if(prevEvent.restrict){dx+=prevEvent.restrict.dx;dy+=prevEvent.restrict.dy}this.speed=hypot(dx,dy)/dt;this.velocityX=dx/dt;this.velocityY=dy/dt}else{this.speed=pointerDelta[deltaSource+"Speed"];this.velocityX=pointerDelta[deltaSource+"VX"];this.velocityY=pointerDelta[deltaSource+"VY"]}}if((ending||phase==="inertiastart")&&prevEvent.speed>600&&this.timeStamp-prevEvent.timeStamp<150){var angle=180*Math.atan2(prevEvent.velocityY,prevEvent.velocityX)/Math.PI,overlap=22.5;if(angle<0){angle+=360}var left=135-overlap<=angle&&angle<225+overlap,up=225-overlap<=angle&&angle<315+overlap,right=!left&&(315-overlap<=angle||angle<45+overlap),down=!up&&45-overlap<=angle&&angle<135+overlap;this.swipe={up:up,down:down,left:left,right:right,angle:angle,speed:prevEvent.speed,velocity:{x:prevEvent.velocityX,y:prevEvent.velocityY}}}}InteractEvent.prototype={preventDefault:blank,stopImmediatePropagation:function(){this.immediatePropagationStopped=this.propagationStopped=true},stopPropagation:function(){this.propagationStopped=true}};function preventOriginalDefault(){this.originalEvent.preventDefault()}function fireTaps(event,targets,elements){var tap={},i;extend(tap,event);tap.preventDefault=preventOriginalDefault;tap.stopPropagation=InteractEvent.prototype.stopPropagation;tap.stopImmediatePropagation=InteractEvent.prototype.stopImmediatePropagation;tap.timeStamp=(new Date).getTime();tap.originalEvent=event;tap.dt=tap.timeStamp-downTime;tap.type="tap";var interval=tap.timeStamp-tapTime,dbl=prevTap&&prevTap.type!=="doubletap"&&prevTap.target===tap.target&&interval<500;tapTime=tap.timeStamp;for(i=0;i<targets.length;i++){var origin=getOriginXY(targets[i],elements[i]);tap.pageX-=origin.x;tap.pageY-=origin.y;tap.clientX-=origin.x;tap.clientY-=origin.y;tap.currentTarget=elements[i];targets[i].fire(tap);if(tap.immediatePropagationStopped||tap.propagationStopped&&targets[i+1]!==tap.currentTarget){break}}if(dbl){var doubleTap={};extend(doubleTap,tap);doubleTap.dt=interval;doubleTap.type="doubletap";for(i=0;i<targets.length;i++){doubleTap.currentTarget=elements[i];targets[i].fire(doubleTap);if(doubleTap.immediatePropagationStopped||doubleTap.propagationStopped&&targets[i+1]!==doubleTap.currentTarget){break}}prevTap=doubleTap}else{prevTap=tap}}function collectTaps(event){if(downEvent){if(pointerWasMoved||!(event instanceof downEvent.constructor)||downEvent.target!==event.target){return}}var tapTargets=[],tapElements=[];var eventTarget=event.target instanceof SVGElementInstance?event.target.correspondingUseElement:event.target,element=eventTarget;function collectSelectorTaps(interactable,selector,context){var elements=ie8MatchesSelector?context.querySelectorAll(selector):undefined;if(element!==document&&inContext(interactable,element)&&!testIgnore(interactable,eventTarget)&&testAllow(interactable,eventTarget)&&matchesSelector(element,selector,elements)){tapTargets.push(interactable);tapElements.push(element)}}while(element){if(interact.isSet(element)){tapTargets.push(interact(element));tapElements.push(element)}interactables.forEachSelector(collectSelectorTaps);element=element.parentNode}if(tapTargets.length){fireTaps(event,tapTargets,tapElements)}}function defaultActionChecker(event){var rect=this.getRect(),right,bottom,action=null,page=getPageXY(event),options=this.options;if(!rect){return null}if(actionIsEnabled.resize&&options.resizable){right=options.resizeAxis!=="y"&&page.x>rect.right-margin;bottom=options.resizeAxis!=="x"&&page.y>rect.bottom-margin}resizeAxes=(right?"x":"")+(bottom?"y":"");action=resizeAxes?"resize"+resizeAxes:actionIsEnabled.drag&&options.draggable?"drag":null;if(actionIsEnabled.gesture&&pointerIds.length>=2&&!(dragging||resizing)){action="gesture"}return action}function validateAction(action,interactable){if(!isString(action)){return null}interactable=interactable||target;
var actionType=action.search("resize")!==-1?"resize":action,options=(interactable||target).options;if((actionType==="resize"&&options.resizable||action==="drag"&&options.draggable||action==="gesture"&&options.gesturable)&&actionIsEnabled[actionType]){if(action==="resize"||action==="resizeyx"){action="resizexy"}return action}return null}function selectorDown(event){if(prepared&&downEvent&&event.type!==downEvent.type){checkAndPreventDefault(event,target);return}if(downEvent&&event.type==="mousedown"&&downEvent.type==="touchstart"&&event.timeStamp-downEvent.timeStamp<300){return}pointerIsDown=true;var eventTarget=event.target instanceof SVGElementInstance?event.target.correspondingUseElement:event.target,element=eventTarget,action;addPointer(event);if(inertiaStatus.active&&target.selector){while(element&&element!==document){if(element===inertiaStatus.targetElement&&validateAction(target.getAction(event))===prepared){cancelFrame(inertiaStatus.i);inertiaStatus.active=false;addPointer(event,selectorGesture);return}element=element.parentNode}}if(dragging||resizing||gesturing){return}function pushMatches(interactable,selector,context){var elements=ie8MatchesSelector?context.querySelectorAll(selector):undefined;if(inContext(interactable,element)&&!testIgnore(interactable,eventTarget)&&testAllow(interactable,eventTarget)&&matchesSelector(element,selector,elements)){interactable._element=element;matches.push(interactable)}}if(matches.length&&/mousedown|pointerdown/i.test(event.type)){action=validateSelector(event,matches)}else{while(element&&element!==document&&!action){matches=[];interactables.forEachSelector(pushMatches);action=validateSelector(event,matches);element=element.parentNode}}if(action){prepared=action;return pointerDown(event,action)}else{downTime=(new Date).getTime();downEvent=cloneEvent(event);setEventXY(prevCoords,event);pointerWasMoved=false}}function pointerDown(event,forceAction){if(!forceAction&&pointerIsDown&&downEvent&&event.type!==downEvent.type){checkAndPreventDefault(event,target);return}pointerIsDown=true;addPointer(event);if((event.touches&&event.touches.length<2||pointerIds&&pointerIds.length<2)&&!target||!prepared){var interactable=interactables.get(event.currentTarget);if(!testIgnore(interactable,event.target)&&testAllow(interactable,event.target)){target=interactable}}var options=target&&target.options;if(target&&!(dragging||resizing||gesturing)){var action=validateAction(forceAction||target.getAction(event));setEventXY(startCoords,event);if(PointerEvent&&event instanceof PointerEvent){if(!target._gesture.target){target._gesture.target=target._element}addPointer(event,target._gesture)}if(!action){return event}if(options.styleCursor){document.documentElement.style.cursor=actions[action].cursor}resizeAxes=action==="resizexy"?"xy":action==="resizex"?"x":action==="resizey"?"y":"";if(action==="gesture"&&(event.touches&&event.touches.length<2||PointerEvent&&pointerIds.length<2)){action=null}prepared=action;snapStatus.snappedX=snapStatus.snappedY=restrictStatus.restrictedX=restrictStatus.restrictedY=NaN;downTime=(new Date).getTime();downEvent=cloneEvent(event);setEventXY(prevCoords,event);pointerWasMoved=false;checkAndPreventDefault(event,target)}else if(inertiaStatus.active&&event.currentTarget===inertiaStatus.targetElement&&target===inertiaStatus.target&&validateAction(target.getAction(event))===prepared){cancelFrame(inertiaStatus.i);inertiaStatus.active=false;if(PointerEvent){if(!target._gesture.target){target._gesture.target=target._element}addPointer(event,target._gesture)}}}function setSnapping(event,status){var snap=target.options.snap,anchors=snap.anchors,page,closest,range,inRange,snapChanged,dx,dy,distance,i,len;status=status||snapStatus;if(status.useStatusXY){page={x:status.x,y:status.y}}else{var origin=getOriginXY(target);page=getPageXY(event);page.x-=origin.x;page.y-=origin.y}page.x-=inertiaStatus.resumeDx;page.y-=inertiaStatus.resumeDy;status.realX=page.x;status.realY=page.y;if(snap.range<0){snap.range=Infinity}if(snap.mode==="path"){anchors=[];for(i=0,len=snap.paths.length;i<len;i++){var path=snap.paths[i];if(isFunction(path)){path=path(page.x,page.y)}anchors.push({x:isNumber(path.x)?path.x:page.x,y:isNumber(path.y)?path.y:page.y,range:isNumber(path.range)?path.range:snap.range})}}if((snap.mode==="anchor"||snap.mode==="path")&&anchors.length){closest={anchor:null,distance:0,range:0,dx:0,dy:0};for(i=0,len=anchors.length;i<len;i++){var anchor=anchors[i];range=isNumber(anchor.range)?anchor.range:snap.range;dx=anchor.x-page.x+snapOffset.x;dy=anchor.y-page.y+snapOffset.y;distance=hypot(dx,dy);inRange=distance<range;if(range===Infinity&&closest.inRange&&closest.range!==Infinity){inRange=false}if(!closest.anchor||(inRange?closest.inRange&&range!==Infinity?distance/range<closest.distance/closest.range:distance<closest.distance:!closest.inRange&&distance<closest.distance)){if(range===Infinity){inRange=true}closest.anchor=anchor;closest.distance=distance;closest.range=range;closest.inRange=inRange;closest.dx=dx;closest.dy=dy;status.range=range}}inRange=closest.inRange;snapChanged=closest.anchor.x!==status.x||closest.anchor.y!==status.y;status.snappedX=closest.anchor.x;status.snappedY=closest.anchor.y;status.dx=closest.dx;status.dy=closest.dy}else if(snap.mode==="grid"){var gridx=Math.round((page.x-snap.gridOffset.x-snapOffset.x)/snap.grid.x),gridy=Math.round((page.y-snap.gridOffset.y-snapOffset.y)/snap.grid.y),newX=gridx*snap.grid.x+snap.gridOffset.x+snapOffset.x,newY=gridy*snap.grid.y+snap.gridOffset.y+snapOffset.y;dx=newX-page.x;dy=newY-page.y;distance=hypot(dx,dy);inRange=distance<snap.range;snapChanged=newX!==status.snappedX||newY!==status.snappedY;status.snappedX=newX;status.snappedY=newY;status.dx=dx;status.dy=dy;status.range=snap.range}status.changed=snapChanged||inRange&&!status.locked;status.locked=inRange;return status}function setRestriction(event,status){var restrict=target&&target.options.restrict,restriction=restrict&&restrict[prepared],page;if(!restriction){return status}status=status||restrictStatus;page=status.useStatusXY?page={x:status.x,y:status.y}:page=getPageXY(event);if(status.snap&&status.snap.locked){page.x+=status.snap.dx||0;page.y+=status.snap.dy||0}page.x-=inertiaStatus.resumeDx;page.y-=inertiaStatus.resumeDy;status.dx=0;status.dy=0;status.restricted=false;var rect;if(restriction==="parent"){restriction=target._element.parentNode}else if(restriction==="self"){restriction=target._element}if(isElement(restriction)){rect=getElementRect(restriction)}else{if(isFunction(restriction)){restriction=restriction(page.x,page.y,target._element)}rect=restriction;if("x"in restriction&&"y"in restriction){rect={left:restriction.x,top:restriction.y,right:restriction.x+restriction.width,bottom:restriction.y+restriction.height}}}var restrictedX=Math.max(Math.min(rect.right-restrictOffset.right,page.x),rect.left+restrictOffset.left),restrictedY=Math.max(Math.min(rect.bottom-restrictOffset.bottom,page.y),rect.top+restrictOffset.top);status.dx=restrictedX-page.x;status.dy=restrictedY-page.y;status.changed=status.restrictedX!==restrictedX||status.restrictedY!==restrictedY;status.restricted=!!(status.dx||status.dy);status.restrictedX=restrictedX;status.restrictedY=restrictedY;return status}function pointerMove(event,preEnd){if(!pointerIsDown){return}if(!(event instanceof InteractEvent)){setEventXY(curCoords,event)}var dx,dy;if(!pointerWasMoved){dx=curCoords.clientX-startCoords.clientX;dy=curCoords.clientY-startCoords.clientY;pointerWasMoved=hypot(dx,dy)>defaultOptions.pointerMoveTolerance}if(!prepared||event.type==="mousemove"&&downEvent.type==="touchstart"){return}if(pointerWasMoved&&(!inertiaStatus.active||event instanceof InteractEvent&&/inertiastart/.test(event.type))){if(!(dragging||resizing||gesturing)){setEventDeltas(pointerDelta,prevCoords,curCoords);if(prepared==="drag"){var absX=Math.abs(dx),absY=Math.abs(dy),targetAxis=target.options.dragAxis,axis=absX>absY?"x":absX<absY?"y":"xy";if(axis!=="xy"&&targetAxis!=="xy"&&targetAxis!==axis){prepared=null;var eventTarget=event.target instanceof SVGElementInstance?event.target.correspondingUseElement:event.target,element=eventTarget;while(element&&element!==document){var elementInteractable=interactables.get(element);if(elementInteractable&&elementInteractable!==target&&elementInteractable.getAction(downEvent)==="drag"&&checkAxis(axis,elementInteractable)){prepared="drag";target=elementInteractable;break}element=element.parentNode}if(!prepared){var getDraggable=function(interactable,selector,context){var elements=ie8MatchesSelector?context.querySelectorAll(selector):undefined;if(interactable===target){return}interactable._element=element;if(inContext(interactable,eventTarget)&&!testIgnore(interactable,eventTarget)&&testAllow(interactable,eventTarget)&&matchesSelector(element,selector,elements)&&interactable.getAction(downEvent)==="drag"&&checkAxis(axis,interactable)){return interactable}};element=eventTarget;while(element&&element!==document){var selectorInteractable=interactables.forEachSelector(getDraggable);if(selectorInteractable){prepared="drag";target=selectorInteractable;break}element=element.parentNode}}}}}if(prepared&&target){var shouldSnap=checkSnap(target)&&(!target.options.snap.endOnly||preEnd),shouldRestrict=checkRestrict(target)&&(!target.options.restrict.endOnly||preEnd),starting=!(dragging||resizing||gesturing),snapEvent=starting?downEvent:event;if(starting){prevEvent=downEvent;var rect=target.getRect(),snap=target.options.snap,restrict=target.options.restrict;if(rect){startOffset.left=startCoords.pageX-rect.left;startOffset.top=startCoords.pageY-rect.top;startOffset.right=rect.right-startCoords.pageX;startOffset.bottom=rect.bottom-startCoords.pageY}else{startOffset.left=startOffset.top=startOffset.right=startOffset.bottom=0}if(rect&&snap.elementOrigin){snapOffset.x=startOffset.left-rect.width*snap.elementOrigin.x;snapOffset.y=startOffset.top-rect.height*snap.elementOrigin.y}else{snapOffset.x=snapOffset.y=0}if(rect&&restrict.elementRect){restrictOffset.left=startOffset.left-rect.width*restrict.elementRect.left;restrictOffset.top=startOffset.top-rect.height*restrict.elementRect.top;restrictOffset.right=startOffset.right-rect.width*(1-restrict.elementRect.right);restrictOffset.bottom=startOffset.bottom-rect.height*(1-restrict.elementRect.bottom)}else{restrictOffset.left=restrictOffset.top=restrictOffset.right=restrictOffset.bottom=0}}if(shouldSnap){setSnapping(snapEvent)}else{snapStatus.locked=false}if(shouldRestrict){setRestriction(snapEvent)}else{restrictStatus.restricted=false}var shouldMove=(shouldSnap?snapStatus.changed||!snapStatus.locked:true)&&(shouldRestrict?!restrictStatus.restricted||restrictStatus.restricted&&restrictStatus.changed:true);if(shouldMove){if(starting){prevEvent=actions[prepared].start(downEvent);if(shouldSnap){setSnapping(event)}if(shouldRestrict){setRestriction(event)}}prevEvent=actions[prepared].move(event)}}}if(!(event instanceof InteractEvent)){setEventDeltas(pointerDelta,prevCoords,curCoords);setEventXY(prevCoords,event)}if(dragging||resizing){autoScroll.edgeMove(event)}}function addPointer(event,gesture,type){type=type||event.type;if(/touch/.test(event.type)){var touches=/cancel|touchend/.test(type)?event.changedTouches:event.touches;for(var i=0;i<touches.length;i++){addPointer(touches[i],gesture,type)}return}if(pointerIds.length&&pointerMoves[0].pointerType!==event.pointerType){return}var id=event.pointerId||event.identifier||0;if(gesture){gesture.addPointer(id)}var index=indexOf(pointerIds,id);if(index===-1){pointerIds.push(id);pointerMoves[pointerIds.length-1]=event}else{pointerMoves[index]=event}}function removePointer(event){var index=indexOf(pointerIds,event.pointerId||event.identifier||0);if(index===-1){return}pointerIds.splice(index,1)}function recordPointers(event,type){var index=indexOf(pointerIds,event.pointerId||event.identifier||0);if(index===-1){return}type=type||event.type;if(/move/i.test(type)){pointerMoves[index]=event}else if(/up|end|cancel/i.test(type)){removePointer(event);if(gesturing&&target._gesture&&pointerIds.length<2){target._gesture.stop()}}}function recordTouches(event){var touches=/cancel|touchend/.test(event.type)?event.changedTouches:event.touches;for(var i=0;i<touches.length;i++){recordPointers(touches[i],event.type)}return}function dragStart(event){var dragEvent=new InteractEvent(event,"drag","start");dragging=true;target.fire(dragEvent);activeDrops.dropzones=[];activeDrops.elements=[];activeDrops.rects=[];if(!dynamicDrop){setActiveDrops(target._element)}var dropEvents=getDropEvents(event,dragEvent);if(dropEvents.activate){fireActiveDrops(dropEvents.activate)}return dragEvent}function dragMove(event){checkAndPreventDefault(event,target);var dragEvent=new InteractEvent(event,"drag","move"),draggableElement=target._element,drop=getDrop(dragEvent,draggableElement);dropTarget=drop.dropzone;dropElement=drop.element;target._element=draggableElement;var dropEvents=getDropEvents(event,dragEvent);target.fire(dragEvent);if(dropEvents.leave){prevDropTarget.fire(dropEvents.leave)}if(dropEvents.enter){dropTarget.fire(dropEvents.enter)}if(dropEvents.move){dropTarget.fire(dropEvents.move)}prevDropTarget=dropTarget;prevDropElement=dropElement;return dragEvent}function resizeStart(event){var resizeEvent=new InteractEvent(event,"resize","start");target.fire(resizeEvent);target.fire(resizeEvent);resizing=true;return resizeEvent}function resizeMove(event){checkAndPreventDefault(event,target);var resizeEvent;resizeEvent=new InteractEvent(event,"resize","move");target.fire(resizeEvent);return resizeEvent}function gestureStart(event){var gestureEvent=new InteractEvent(event,"gesture","start");gestureEvent.ds=0;gesture.startDistance=gesture.prevDistance=gestureEvent.distance;gesture.startAngle=gesture.prevAngle=gestureEvent.angle;gesture.scale=1;gesturing=true;target.fire(gestureEvent);return gestureEvent}function gestureMove(event){if(!pointerIds.length){return prevEvent}checkAndPreventDefault(event,target);var gestureEvent;gestureEvent=new InteractEvent(event,"gesture","move");gestureEvent.ds=gestureEvent.scale-gesture.scale;target.fire(gestureEvent);gesture.prevAngle=gestureEvent.angle;gesture.prevDistance=gestureEvent.distance;if(gestureEvent.scale!==Infinity&&gestureEvent.scale!==null&&gestureEvent.scale!==undefined&&!isNaN(gestureEvent.scale)){gesture.scale=gestureEvent.scale}return gestureEvent}function validateSelector(event,matches){for(var i=0,len=matches.length;i<len;i++){var match=matches[i],action=validateAction(match.getAction(event,match),match);if(action){target=match;return action}}}function pointerOver(event){if(prepared){return}var curMatches=[],prevTargetElement=target&&target._element,eventTarget=event.target instanceof SVGElementInstance?event.target.correspondingUseElement:event.target;if(target&&(testIgnore(target,eventTarget)||!testAllow(target,eventTarget))){target=null;matches=[]}var elementInteractable=interactables.get(eventTarget),elementAction=elementInteractable&&!testIgnore(elementInteractable,eventTarget)&&testAllow(elementInteractable,eventTarget)&&validateAction(elementInteractable.getAction(event),elementInteractable);function pushCurMatches(interactable,selector){if(interactable&&inContext(interactable,eventTarget)&&!testIgnore(interactable,eventTarget)&&testAllow(interactable,eventTarget)&&matchesSelector(eventTarget,selector)){interactable._element=eventTarget;curMatches.push(interactable)}}if(elementAction){target=elementInteractable;matches=[]}else{interactables.forEachSelector(pushCurMatches);if(validateSelector(event,curMatches)){matches=curMatches;pointerHover(event,matches);events.addToElement(eventTarget,"mousemove",pointerHover)}else if(target){var prevTargetChildren=prevTargetElement.querySelectorAll("*");if(contains(prevTargetChildren,eventTarget)){for(var i=0;i<matches.length;i++){matches[i]._element=prevTargetElement}pointerHover(event,matches);events.addToElement(target._element,"mousemove",pointerHover)}else{target=null;matches=[]}}}}function pointerOut(event){if(prepared){return}var eventTarget=event.target instanceof SVGElementInstance?event.target.correspondingUseElement:event.target;if(!interactables.get(eventTarget)){events.removeFromElement(eventTarget,pointerHover)}if(target&&target.options.styleCursor&&!(dragging||resizing||gesturing)){document.documentElement.style.cursor=""}}function pointerHover(event,matches){if(!prepared){var action;if(matches){action=validateSelector(event,matches)}else if(target){action=validateAction(target.getAction(event))}if(target&&target.options.styleCursor){if(action){document.documentElement.style.cursor=actions[action].cursor}else{document.documentElement.style.cursor=""}}}else if(prepared){checkAndPreventDefault(event,target)}}function pointerUp(event){if(!(event instanceof InteractEvent||PointerEvent)&&pointerIsDown&&downEvent&&!(event instanceof downEvent.constructor)){return}if(event.touches&&event.touches.length>=2){return}if(GestureEvent&&event instanceof GestureEvent&&/inertiastart/i.test(event.type)){event.gestureObject.stop();return}var endEvent,options=target&&target.options,inertiaOptions=options&&options.inertia;if(dragging||resizing||gesturing){if(inertiaStatus.active){return}var deltaSource=options.deltaSource,pointerSpeed=pointerDelta[deltaSource+"Speed"],now=(new Date).getTime(),inertiaPossible=false,inertia=false,smoothEnd=false,endSnap=checkSnap(target)&&options.snap.endOnly,endRestrict=checkRestrict(target)&&options.restrict.endOnly,dx=0,dy=0,startEvent;inertiaPossible=options.inertiaEnabled&&prepared!=="gesture"&&contains(inertiaOptions.actions,prepared)&&event!==inertiaStatus.startEvent;inertia=inertiaPossible&&now-curCoords.timeStamp<50&&pointerSpeed>inertiaOptions.minSpeed&&pointerSpeed>inertiaOptions.endSpeed;if(inertiaPossible&&!inertia&&(endSnap||endRestrict)){var snapRestrict={};snapRestrict.snap=snapRestrict.restrict=snapRestrict;if(endSnap){setSnapping(event,snapRestrict);if(snapRestrict.locked){dx+=snapRestrict.dx;dy+=snapRestrict.dy}}if(endRestrict){setRestriction(event,snapRestrict);if(snapRestrict.restricted){dx+=snapRestrict.dx;dy+=snapRestrict.dy}}if(dx||dy){smoothEnd=true}}if(inertia||smoothEnd){if(events.useAttachEvent){extend(inertiaStatus.pointerUp,event)}else{inertiaStatus.pointerUp=event}inertiaStatus.startEvent=startEvent=new InteractEvent(event,prepared,"inertiastart");target.fire(inertiaStatus.startEvent);inertiaStatus.target=target;inertiaStatus.targetElement=target._element;inertiaStatus.t0=now;if(inertia){inertiaStatus.vx0=pointerDelta[deltaSource+"VX"];inertiaStatus.vy0=pointerDelta[deltaSource+"VY"];inertiaStatus.v0=pointerSpeed;calcInertia(inertiaStatus);var page=getPageXY(event),origin=getOriginXY(target,target._element),statusObject;page.x=page.x+(inertia?inertiaStatus.xe:0)-origin.x;page.y=page.y+(inertia?inertiaStatus.ye:0)-origin.y;statusObject={useStatusXY:true,x:page.x,y:page.y,dx:0,dy:0,snap:null};statusObject.snap=statusObject;dx=dy=0;if(endSnap){var snap=setSnapping(event,statusObject);if(snap.locked){dx+=snap.dx;dy+=snap.dy}}if(endRestrict){var restrict=setRestriction(event,statusObject);if(restrict.restricted){dx+=restrict.dx;dy+=restrict.dy}}inertiaStatus.modifiedXe+=dx;inertiaStatus.modifiedYe+=dy;inertiaStatus.i=reqFrame(inertiaFrame)}else{inertiaStatus.smoothEnd=true;inertiaStatus.xe=dx;inertiaStatus.ye=dy;inertiaStatus.sx=inertiaStatus.sy=0;inertiaStatus.i=reqFrame(smoothEndFrame)}inertiaStatus.active=true;return}if(endSnap||endRestrict){pointerMove(event,true)}}if(dragging){endEvent=new InteractEvent(event,"drag","end");var dropEvent,draggableElement=target._element,drop=getDrop(endEvent,draggableElement);dropTarget=drop.dropzone;dropElement=drop.element;target._element=draggableElement;if(dropTarget){dropEvent=new InteractEvent(event,"drop",null,dropElement,draggableElement);endEvent.dropzone=dropElement}else if(prevDropTarget){var dragLeaveEvent=new InteractEvent(event,"drag","leave",dropElement,draggableElement);prevDropTarget.fire(dragLeaveEvent,draggableElement);endEvent.dragLeave=prevDropElement}var dropEvents=getDropEvents(event,endEvent);target.fire(endEvent);if(dropEvents.leave){prevDropTarget.fire(dropEvents.leave)}if(dropEvents.enter){dropTarget.fire(dropEvents.enter)}if(dropEvents.drop){dropTarget.fire(dropEvents.drop)}if(dropEvents.deactivate){fireActiveDrops(dropEvents.deactivate)}}else if(resizing){endEvent=new InteractEvent(event,"resize","end");target.fire(endEvent)}else if(gesturing){endEvent=new InteractEvent(event,"gesture","end");target.fire(endEvent)}interact.stop()}function delegateListener(event,useCapture){var fakeEvent={},delegated=delegatedEvents[event.type],element=event.target;useCapture=useCapture?true:false;for(var prop in event){fakeEvent[prop]=event[prop]}fakeEvent.originalEvent=event;fakeEvent.preventDefault=preventOriginalDefault;while(element&&element!==document){for(var i=0;i<delegated.selectors.length;i++){var selector=delegated.selectors[i],context=delegated.contexts[i];if(matchesSelector(element,selector)&&context===event.currentTarget&&nodeContains(context,element)){var listeners=delegated.listeners[i];fakeEvent.currentTarget=element;for(var j=0;j<listeners.length;j++){if(listeners[j][1]!==useCapture){continue}try{listeners[j][0](fakeEvent)}catch(error){console.error("Error thrown from delegated listener: "+'"'+selector+'" '+event.type+" "+(listeners[j][0].name?listeners[j][0].name:""));console.log(error)}}}}element=element.parentNode}}function delegateUseCapture(event){return delegateListener.call(this,event,true)}interactables.indexOfElement=dropzones.indexOfElement=function indexOfElement(element,context){for(var i=0;i<this.length;i++){var interactable=this[i];if(interactable.selector===element&&interactable._context===(context||document)||!interactable.selector&&interactable._element===element){return i}}return-1};interactables.get=dropzones.get=function interactableGet(element,options){return this[this.indexOfElement(element,options&&options.context)]};interactables.forEachSelector=function(callback){for(var i=0;i<this.length;i++){var interactable=this[i];if(!interactable.selector){continue}var ret=callback(interactable,interactable.selector,interactable._context,i,this);if(ret!==undefined){return ret}}};function clearTargets(){if(target&&!target.selector){target=null}dropTarget=dropElement=prevDropTarget=prevDropElement=null}function interact(element,options){return interactables.get(element,options)||new Interactable(element,options)}function IOptions(options){for(var option in defaultOptions){if(options.hasOwnProperty(option)&&typeof options[option]===typeof defaultOptions[option]){this[option]=options[option]}}}IOptions.prototype=defaultOptions;function Interactable(element,options){this._element=element;this._iEvents=this._iEvents||{};if(isString(element)){document.querySelector(element);this.selector=element;this._gesture=selectorGesture;if(options&&options.context&&(window.Node?options.context instanceof window.Node:isElement(options.context)||options.context===document)){this._context=options.context}}else if(isElement(element)){if(PointerEvent){events.add(this,pEventTypes.down,pointerDown);events.add(this,pEventTypes.move,pointerHover);this._gesture=new Gesture;this._gesture.target=element}else{events.add(this,"mousedown",pointerDown);events.add(this,"mousemove",pointerHover);events.add(this,"touchstart",pointerDown);events.add(this,"touchmove",pointerHover)}}interactables.push(this);this.set(options)}Interactable.prototype={setOnEvents:function(action,phases){if(action==="drop"){var drop=phases.ondrop||phases.onDrop||phases.drop,dropactivate=phases.ondropactivate||phases.onDropActivate||phases.dropactivate,dropdeactivate=phases.ondropdeactivate||phases.onDropDeactivate||phases.dropdeactivate,dragenter=phases.ondragenter||phases.onDropEnter||phases.dragenter,dragleave=phases.ondragleave||phases.onDropLeave||phases.dragleave,dropmove=phases.ondropmove||phases.onDropMove||phases.dropmove;if(isFunction(drop)){this.ondrop=drop}if(isFunction(dropactivate)){this.ondropactivate=dropactivate}if(isFunction(dropdeactivate)){this.ondropdeactivate=dropdeactivate}if(isFunction(dragenter)){this.ondragenter=dragenter}if(isFunction(dragleave)){this.ondragleave=dragleave}if(isFunction(dropmove)){this.ondropmove=dropmove}}else{var start=phases.onstart||phases.onStart||phases.start,move=phases.onmove||phases.onMove||phases.move,end=phases.onend||phases.onEnd||phases.end,inertiastart=phases.oninertiastart||phases.onInertiaStart||phases.inertiastart;action="on"+action;if(isFunction(start)){this[action+"start"]=start}if(isFunction(move)){this[action+"move"]=move}if(isFunction(end)){this[action+"end"]=end}if(isFunction(inertiastart)){this[action+"inertiastart"]=inertiastart}}return this},draggable:function(options){if(isObject(options)){this.options.draggable=true;this.setOnEvents("drag",options);if(/^x$|^y$|^xy$/.test(options.axis)){this.options.dragAxis=options.axis}else if(options.axis===null){delete this.options.dragAxis}return this}if(isBool(options)){this.options.draggable=options;return this}if(options===null){delete this.options.draggable;return this}return this.options.draggable},dropzone:function(options){if(isObject(options)){this.options.dropzone=true;this.setOnEvents("drop",options);this.accept(options.accept);this._dropElements=this.selector?null:[this._element];dropzones.push(this);return this}if(isBool(options)){if(options){this._dropElements=this.selector?null:[this._element];dropzones.push(this)}else{var index=indexOf(dropzones,this);if(index!==-1){dropzones.splice(index,1)}}this.options.dropzone=options;return this}if(options===null){delete this.options.dropzone;return this}return this.options.dropzone},dropCheck:function(event,draggable,draggableElement,rect){if(!(rect=rect||this.getRect())){return false}var page=getPageXY(event),origin=getOriginXY(draggable,draggableElement),horizontal,vertical;page.x+=origin.x;page.y+=origin.y;horizontal=page.x>rect.left&&page.x<rect.right;vertical=page.y>rect.top&&page.y<rect.bottom;return horizontal&&vertical},dropChecker:function(newValue){if(isFunction(newValue)){this.dropCheck=newValue;return this}return this.dropCheck},accept:function(newValue){if(isElement(newValue)){this.options.accept=newValue;return this}if(isString(newValue)){document.querySelector(newValue);this.options.accept=newValue;return this}if(newValue===null){delete this.options.accept;return this}return this.options.accept},resizable:function(options){if(isObject(options)){this.options.resizable=true;this.setOnEvents("resize",options);if(/^x$|^y$|^xy$/.test(options.axis)){this.options.resizeAxis=options.axis}else if(options.axis===null){this.options.resizeAxis=defaultOptions.resizeAxis}return this}if(isBool(options)){this.options.resizable=options;return this}return this.options.resizable},resizeable:blank,squareResize:function(newValue){if(isBool(newValue)){this.options.squareResize=newValue;return this}if(newValue===null){delete this.options.squareResize;return this}return this.options.squareResize},gesturable:function(options){if(isObject(options)){this.options.gesturable=true;this.setOnEvents("gesture",options);return this}if(isBool(options)){this.options.gesturable=options;return this}if(options===null){delete this.options.gesturable;return this}return this.options.gesturable},gestureable:blank,autoScroll:function(options){var defaults=defaultOptions.autoScroll;if(isObject(options)){var autoScroll=this.options.autoScroll;if(autoScroll===defaults){autoScroll=this.options.autoScroll={margin:defaults.margin,distance:defaults.distance,interval:defaults.interval,container:defaults.container}}autoScroll.margin=this.validateSetting("autoScroll","margin",options.margin);autoScroll.speed=this.validateSetting("autoScroll","speed",options.speed);autoScroll.container=isElement(options.container)||options.container instanceof window.Window?options.container:defaults.container;this.options.autoScrollEnabled=true;this.options.autoScroll=autoScroll;return this}if(isBool(options)){this.options.autoScrollEnabled=options;return this}if(options===null){delete this.options.autoScrollEnabled;delete this.options.autoScroll;return this}return this.options.autoScrollEnabled?this.options.autoScroll:false},snap:function(options){var defaults=defaultOptions.snap;if(isObject(options)){var snap=this.options.snap;if(snap===defaults){snap={}}snap.mode=this.validateSetting("snap","mode",options.mode);snap.endOnly=this.validateSetting("snap","endOnly",options.endOnly);snap.actions=this.validateSetting("snap","actions",options.actions);snap.range=this.validateSetting("snap","range",options.range);snap.paths=this.validateSetting("snap","paths",options.paths);snap.grid=this.validateSetting("snap","grid",options.grid);snap.gridOffset=this.validateSetting("snap","gridOffset",options.gridOffset);snap.anchors=this.validateSetting("snap","anchors",options.anchors);snap.elementOrigin=this.validateSetting("snap","elementOrigin",options.elementOrigin);this.options.snapEnabled=true;this.options.snap=snap;return this}if(isBool(options)){this.options.snapEnabled=options;return this}if(options===null){delete this.options.snapEnabled;delete this.options.snap;return this}return this.options.snapEnabled?this.options.snap:false},inertia:function(options){var defaults=defaultOptions.inertia;if(isObject(options)){var inertia=this.options.inertia;if(inertia===defaults){inertia=this.options.inertia={resistance:defaults.resistance,minSpeed:defaults.minSpeed,endSpeed:defaults.endSpeed,actions:defaults.actions,zeroResumeDelta:defaults.zeroResumeDelta,smoothEndDuration:defaults.smoothEndDuration}}inertia.resistance=this.validateSetting("inertia","resistance",options.resistance);inertia.minSpeed=this.validateSetting("inertia","minSpeed",options.minSpeed);inertia.endSpeed=this.validateSetting("inertia","endSpeed",options.endSpeed);inertia.actions=this.validateSetting("inertia","actions",options.actions);inertia.zeroResumeDelta=this.validateSetting("inertia","zeroResumeDelta",options.zeroResumeDelta);inertia.smoothEndDuration=this.validateSetting("inertia","smoothEndDuration",options.smoothEndDuration);this.options.inertiaEnabled=true;this.options.inertia=inertia;return this}if(isBool(options)){this.options.inertiaEnabled=options;return this}if(options===null){delete this.options.inertiaEnabled;delete this.options.inertia;return this}return this.options.inertiaEnabled?this.options.inertia:false},getAction:function(event){var action=this.defaultActionChecker(event);if(this.options.actionChecker){action=this.options.actionChecker(event,action,this)}return action},defaultActionChecker:defaultActionChecker,actionChecker:function(newValue){if(isFunction(newValue)){this.options.actionChecker=newValue;return this}if(newValue===null){delete this.options.actionChecker;return this}return this.options.actionChecker},getRect:function rectCheck(element){element=element||this._element;if(this.selector&&!isElement(element)){element=this._context.querySelector(this.selector)}return getElementRect(element)},rectChecker:function(newValue){if(isFunction(newValue)){this.getRect=newValue;return this}if(newValue===null){delete this.options.getRect;return this}return this.getRect},styleCursor:function(newValue){if(isBool(newValue)){this.options.styleCursor=newValue;return this}if(newValue===null){delete this.options.styleCursor;return this}return this.options.styleCursor},preventDefault:function(newValue){if(isBool(newValue)||newValue==="auto"){this.options.preventDefault=newValue;return this}if(newValue===null){delete this.options.preventDefault;return this}return this.options.preventDefault},origin:function(newValue){if(isObject(newValue)||/^parent$|^self$/.test(newValue)){this.options.origin=newValue;return this}if(newValue===null){delete this.options.origin;return this}return this.options.origin},deltaSource:function(newValue){if(newValue==="page"||newValue==="client"){this.options.deltaSource=newValue;return this
}if(newValue===null){delete this.options.deltaSource;return this}return this.options.deltaSource},restrict:function(newValue){if(newValue===undefined){return this.options.restrict}if(isBool(newValue)){defaultOptions.restrictEnabled=newValue}else if(isObject(newValue)){var newRestrictions={};if(isObject(newValue.drag)||/^parent$|^self$/.test(newValue.drag)){newRestrictions.drag=newValue.drag}if(isObject(newValue.resize)||/^parent$|^self$/.test(newValue.resize)){newRestrictions.resize=newValue.resize}if(isObject(newValue.gesture)||/^parent$|^self$/.test(newValue.gesture)){newRestrictions.gesture=newValue.gesture}if(isBool(newValue.endOnly)){newRestrictions.endOnly=newValue.endOnly}if(isObject(newValue.elementRect)){newRestrictions.elementRect=newValue.elementRect}this.options.restrictEnabled=true;this.options.restrict=newRestrictions}else if(newValue===null){delete this.options.restrict;delete this.options.restrictEnabled}return this},context:function(){return this._context},_context:document,ignoreFrom:function(newValue){if(isString(newValue)){document.querySelector(newValue);this.options.ignoreFrom=newValue;return this}if(isElement(newValue)){this.options.ignoreFrom=newValue;return this}if(newValue===null){delete this.options.ignoreFrom;return this}return this.options.ignoreFrom},allowFrom:function(newValue){if(isString(newValue)){document.querySelector(newValue);this.options.allowFrom=newValue;return this}if(isElement(newValue)){this.options.allowFrom=newValue;return this}if(newValue===null){delete this.options.allowFrom;return this}return this.options.allowFrom},validateSetting:function(context,option,value){var defaults=defaultOptions[context],current=this.options[context];if(defaults!==undefined&&defaults[option]!==undefined){if("objectTypes"in defaults&&defaults.objectTypes.test(option)){if(isObject(value)){return value}else{return option in current&&isObject(current[option])?current[option]:defaults[option]}}if("arrayTypes"in defaults&&defaults.arrayTypes.test(option)){if(isArray(value)){return value}else{return option in current&&isArray(current[option])?current[option]:defaults[option]}}if("stringTypes"in defaults&&defaults.stringTypes.test(option)){if(isString(value)){return value}else{return option in current&&isString(current[option])?current[option]:defaults[option]}}if("numberTypes"in defaults&&defaults.numberTypes.test(option)){if(isNumber(value)){return value}else{return option in current&&isNumber(current[option])?current[option]:defaults[option]}}if("boolTypes"in defaults&&defaults.boolTypes.test(option)){if(isBool(value)){return value}else{return option in current&&isBool(current[option])?current[option]:defaults[option]}}if("elementTypes"in defaults&&defaults.elementTypes.test(option)){if(isElement(value)){return value}else{return option in current&&isElement(current[option])?current[option]:defaults[option]}}}return null},element:function(){return this._element},fire:function(iEvent){if(!(iEvent&&iEvent.type)||!contains(eventTypes,iEvent.type)){return this}var listeners,fireState=0,i=0,len,onEvent="on"+iEvent.type;while(fireState<3){try{switch(fireState){case fireStates.directBind:if(iEvent.type in this._iEvents){listeners=this._iEvents[iEvent.type];for(len=listeners.length;i<len&&!iEvent.immediatePropagationStopped;i++){listeners[i](iEvent)}break}break;case fireStates.onevent:if(isFunction(this[onEvent])){this[onEvent](iEvent)}break;case fireStates.globalBind:if(iEvent.type in globalEvents&&(listeners=globalEvents[iEvent.type])){for(len=listeners.length;i<len&&!iEvent.immediatePropagationStopped;i++){listeners[i](iEvent)}}}if(iEvent.propagationStopped){break}i=0;fireState++}catch(error){console.error("Error thrown from "+iEvent.type+" listener");console.error(error);i++;if(fireState===fireStates.onevent){fireState++}}}return this},on:function(eventType,listener,useCapture){if(eventType==="wheel"){eventType=wheelEvent}useCapture=useCapture?true:false;if(contains(eventTypes,eventType)){if(!(eventType in this._iEvents)){this._iEvents[eventType]=[listener]}else if(!contains(this._iEvents[eventType],listener)){this._iEvents[eventType].push(listener)}}else if(this.selector){if(!delegatedEvents[eventType]){delegatedEvents[eventType]={selectors:[],contexts:[],listeners:[]};events.addToElement(this._context,eventType,delegateListener);events.addToElement(this._context,eventType,delegateUseCapture,true)}var delegated=delegatedEvents[eventType],index;for(index=delegated.selectors.length-1;index>=0;index--){if(delegated.selectors[index]===this.selector&&delegated.contexts[index]===this._context){break}}if(index===-1){index=delegated.selectors.length;delegated.selectors.push(this.selector);delegated.contexts.push(this._context);delegated.listeners.push([])}delegated.listeners[index].push([listener,useCapture])}else{events.add(this,eventType,listener,useCapture)}return this},off:function(eventType,listener,useCapture){var eventList,index=-1;useCapture=useCapture?true:false;if(eventType==="wheel"){eventType=wheelEvent}if(contains(eventTypes,eventType)){eventList=this._iEvents[eventType];if(eventList&&(index=indexOf(eventList,listener))!==-1){this._iEvents[eventType].splice(index,1)}}else if(this.selector){var delegated=delegatedEvents[eventType],matchFound=false;if(!delegated){return this}for(index=delegated.selectors.length-1;index>=0;index--){if(delegated.selectors[index]===this.selector&&delegated.contexts[index]===this._context){var listeners=delegated.listeners[index];for(var i=listeners.length-1;i>=0;i--){var fn=listeners[i][0],useCap=listeners[i][1];if(fn===listener&&useCap===useCapture){listeners.splice(i,1);if(!listeners.length){delegated.selectors.splice(index,1);delegated.contexts.splice(index,1);delegated.listeners.splice(index,1);events.removeFromElement(this._context,eventType,delegateListener);events.removeFromElement(this._context,eventType,delegateUseCapture,true);if(!delegated.selectors.length){delegatedEvents[eventType]=null}}matchFound=true;break}}if(matchFound){break}}}}else{events.remove(this,listener,useCapture)}return this},set:function(options){if(!options||!isObject(options)){options={}}this.options=new IOptions(options);this.draggable("draggable"in options?options.draggable:this.options.draggable);this.dropzone("dropzone"in options?options.dropzone:this.options.dropzone);this.resizable("resizable"in options?options.resizable:this.options.resizable);this.gesturable("gesturable"in options?options.gesturable:this.options.gesturable);var settings=["accept","actionChecker","allowFrom","autoScroll","deltaSource","dropChecker","ignoreFrom","inertia","origin","preventDefault","rectChecker","restrict","snap","styleCursor"];for(var i=0,len=settings.length;i<len;i++){var setting=settings[i];if(setting in options){this[setting](options[setting])}}return this},unset:function(){events.remove(this,"all");if(!isString(this.selector)){events.remove(this,"all");if(this.options.styleCursor){this._element.style.cursor=""}if(this._gesture){this._gesture.target=null}}else{for(var type in delegatedEvents){var delegated=delegatedEvents[type];for(var i=0;i<delegated.selectors.length;i++){if(delegated.selectors[i]===this.selector&&delegated.contexts[i]===this._context){delegated.selectors.splice(i,1);delegated.contexts.splice(i,1);delegated.listeners.splice(i,1);if(!delegated.selectors.length){delegatedEvents[type]=null}}events.removeFromElement(this._context,type,delegateListener);events.removeFromElement(this._context,type,delegateUseCapture,true);break}}}this.dropzone(false);interactables.splice(indexOf(interactables,this),1);return interact}};Interactable.prototype.gestureable=Interactable.prototype.gesturable;Interactable.prototype.resizeable=Interactable.prototype.resizable;interact.isSet=function(element,options){return interactables.indexOfElement(element,options&&options.context)!==-1};interact.on=function(type,listener,useCapture){if(contains(eventTypes,type)){if(!globalEvents[type]){globalEvents[type]=[listener]}else if(!contains(globalEvents[type],listener)){globalEvents[type].push(listener)}}else{events.add(docTarget,type,listener,useCapture)}return interact};interact.off=function(type,listener,useCapture){if(!contains(eventTypes,type)){events.remove(docTarget,type,listener,useCapture)}else{var index;if(type in globalEvents&&(index=indexOf(globalEvents[type],listener))!==-1){globalEvents[type].splice(index,1)}}return interact};interact.simulate=function(action,element,pointerEvent){var event={},clientRect;if(action==="resize"){action="resizexy"}if(!(action in actions)){return interact}if(pointerEvent){extend(event,pointerEvent)}else{clientRect=target._element instanceof SVGElement?element.getBoundingClientRect():clientRect=element.getClientRects()[0];if(action==="drag"){event.pageX=clientRect.left+clientRect.width/2;event.pageY=clientRect.top+clientRect.height/2}else{event.pageX=clientRect.right;event.pageY=clientRect.bottom}}event.target=event.currentTarget=element;event.preventDefault=event.stopPropagation=blank;pointerDown(event,action);return interact};interact.enableDragging=function(newValue){if(newValue!==null&&newValue!==undefined){actionIsEnabled.drag=newValue;return interact}return actionIsEnabled.drag};interact.enableResizing=function(newValue){if(newValue!==null&&newValue!==undefined){actionIsEnabled.resize=newValue;return interact}return actionIsEnabled.resize};interact.enableGesturing=function(newValue){if(newValue!==null&&newValue!==undefined){actionIsEnabled.gesture=newValue;return interact}return actionIsEnabled.gesture};interact.eventTypes=eventTypes;interact.debug=function(){return{target:target,dragging:dragging,resizing:resizing,gesturing:gesturing,prepared:prepared,matches:matches,prevCoords:prevCoords,downCoords:startCoords,pointerIds:pointerIds,pointerMoves:pointerMoves,addPointer:addPointer,removePointer:removePointer,recordPointers:recordPointers,recordTouches:recordTouches,snap:snapStatus,restrict:restrictStatus,inertia:inertiaStatus,downTime:downTime,downEvent:downEvent,prevEvent:prevEvent,Interactable:Interactable,IOptions:IOptions,interactables:interactables,dropzones:dropzones,pointerIsDown:pointerIsDown,defaultOptions:defaultOptions,defaultActionChecker:defaultActionChecker,actions:actions,dragMove:dragMove,resizeMove:resizeMove,gestureMove:gestureMove,pointerUp:pointerUp,pointerDown:pointerDown,pointerMove:pointerMove,pointerHover:pointerHover,events:events,globalEvents:globalEvents,delegatedEvents:delegatedEvents}};interact.getTouchAverage=touchAverage;interact.getTouchBBox=touchBBox;interact.getTouchDistance=touchDistance;interact.getTouchAngle=touchAngle;interact.getElementRect=getElementRect;interact.margin=function(newvalue){if(isNumber(newvalue)){margin=newvalue;return interact}return margin};interact.styleCursor=function(newValue){if(isBool(newValue)){defaultOptions.styleCursor=newValue;return interact}return defaultOptions.styleCursor};interact.autoScroll=function(options){var defaults=defaultOptions.autoScroll;if(isObject(options)){defaultOptions.autoScrollEnabled=true;if(isNumber(options.margin)){defaults.margin=options.margin}if(isNumber(options.speed)){defaults.speed=options.speed}defaults.container=isElement(options.container)||options.container instanceof window.Window?options.container:defaults.container;return interact}if(isBool(options)){defaultOptions.autoScrollEnabled=options;return interact}return defaultOptions.autoScrollEnabled?defaults:false};interact.snap=function(options){var snap=defaultOptions.snap;if(isObject(options)){defaultOptions.snapEnabled=true;if(isString(options.mode)){snap.mode=options.mode}if(isBool(options.endOnly)){snap.endOnly=options.endOnly}if(isNumber(options.range)){snap.range=options.range}if(isArray(options.actions)){snap.actions=options.actions}if(isArray(options.anchors)){snap.anchors=options.anchors}if(isObject(options.grid)){snap.grid=options.grid}if(isObject(options.gridOffset)){snap.gridOffset=options.gridOffset}if(isObject(options.elementOrigin)){snap.elementOrigin=options.elementOrigin}return interact}if(isBool(options)){defaultOptions.snapEnabled=options;return interact}return{enabled:defaultOptions.snapEnabled,mode:snap.mode,actions:snap.actions,grid:snap.grid,gridOffset:snap.gridOffset,anchors:snap.anchors,paths:snap.paths,range:snap.range,locked:snapStatus.locked,x:snapStatus.snappedX,y:snapStatus.snappedY,realX:snapStatus.realX,realY:snapStatus.realY,dx:snapStatus.dx,dy:snapStatus.dy}};interact.inertia=function(options){var inertia=defaultOptions.inertia;if(isObject(options)){defaultOptions.inertiaEnabled=true;if(isNumber(options.resistance)){inertia.resistance=options.resistance}if(isNumber(options.minSpeed)){inertia.minSpeed=options.minSpeed}if(isNumber(options.endSpeed)){inertia.endSpeed=options.endSpeed}if(isNumber(options.smoothEndDuration)){inertia.smoothEndDuration=options.smoothEndDuration}if(isBool(options.zeroResumeDelta)){inertia.zeroResumeDelta=options.zeroResumeDelta}if(isArray(options.actions)){inertia.actions=options.actions}return interact}if(isBool(options)){defaultOptions.inertiaEnabled=options;return interact}return{enabled:defaultOptions.inertiaEnabled,resistance:inertia.resistance,minSpeed:inertia.minSpeed,endSpeed:inertia.endSpeed,actions:inertia.actions,zeroResumeDelta:inertia.zeroResumeDelta}};interact.supportsTouch=function(){return supportsTouch};interact.currentAction=function(){return dragging&&"drag"||resizing&&"resize"||gesturing&&"gesture"||null};interact.stop=function(event){if(dragging||resizing||gesturing){autoScroll.stop();matches=[];if(target.options.styleCursor){document.documentElement.style.cursor=""}if(target._gesture){target._gesture.stop()}if(event&&isFunction(event.preventDefault)){checkAndPreventDefault(event,target)}if(dragging){activeDrops.dropzones=activeDrops.elements=activeDrops.rects=null;for(var i=0;i<dropzones.length;i++){if(dropzones[i].selector){dropzones[i]._dropElements=null}}}clearTargets()}pointerIds.splice(0);pointerMoves.splice(0);pointerIsDown=snapStatus.locked=dragging=resizing=gesturing=false;prepared=prevEvent=null;inertiaStatus.resumeDx=inertiaStatus.resumeDy=0;return interact};interact.dynamicDrop=function(newValue){if(isBool(newValue)){dynamicDrop=newValue;return interact}return dynamicDrop};interact.deltaSource=function(newValue){if(newValue==="page"||newValue==="client"){defaultOptions.deltaSource=newValue;return this}return defaultOptions.deltaSource};interact.restrict=function(newValue){var defaults=defaultOptions.restrict;if(newValue===undefined){return defaultOptions.restrict}if(isBool(newValue)){defaultOptions.restrictEnabled=newValue}else if(isObject(newValue)){if(isObject(newValue.drag)||/^parent$|^self$/.test(newValue.drag)){defaults.drag=newValue.drag}if(isObject(newValue.resize)||/^parent$|^self$/.test(newValue.resize)){defaults.resize=newValue.resize}if(isObject(newValue.gesture)||/^parent$|^self$/.test(newValue.gesture)){defaults.gesture=newValue.gesture}if(isBool(newValue.endOnly)){defaults.endOnly=newValue.endOnly}if(isObject(newValue.elementRect)){defaults.elementRect=newValue.elementRect}defaultOptions.restrictEnabled=true}else if(newValue===null){defaults.drag=defaults.resize=defaults.gesture=null;defaults.endOnly=false}return this};interact.pointerMoveTolerance=function(newValue){if(isNumber(newValue)){defaultOptions.pointerMoveTolerance=newValue;return this}return defaultOptions.pointerMoveTolerance};if(PointerEvent){if(PointerEvent===window.MSPointerEvent){pEventTypes={up:"MSPointerUp",down:"MSPointerDown",over:"MSPointerOver",out:"MSPointerOut",move:"MSPointerMove",cancel:"MSPointerCancel"}}else{pEventTypes={up:"pointerup",down:"pointerdown",over:"pointerover",out:"pointerout",move:"pointermove",cancel:"pointercancel"}}if(GestureEvent===window.MSGestureEvent){gEventTypes={start:"MSGestureStart",change:"MSGestureChange",inertia:"MSInertiaStart",end:"MSGestureEnd"}}else{gEventTypes={start:"gesturestart",change:"gesturechange",inertia:"inertiastart",end:"gestureend"}}events.add(docTarget,pEventTypes.up,collectTaps);events.add(docTarget,pEventTypes.down,selectorDown);events.add(docTarget,gEventTypes.change,pointerMove);events.add(docTarget,gEventTypes.end,pointerUp);events.add(docTarget,gEventTypes.inertia,pointerUp);events.add(docTarget,pEventTypes.over,pointerOver);events.add(docTarget,pEventTypes.out,pointerOut);events.add(docTarget,pEventTypes.move,recordPointers);events.add(docTarget,pEventTypes.up,recordPointers);events.add(docTarget,pEventTypes.cancel,recordPointers);events.add(docTarget,pEventTypes.up,function(){if(!(dragging||resizing||gesturing)){pointerIsDown=false}});selectorGesture=new Gesture;selectorGesture.target=document.documentElement}else{events.add(docTarget,"mouseup",collectTaps);events.add(docTarget,"touchend",collectTaps);events.add(docTarget,"mousedown",selectorDown);events.add(docTarget,"mousemove",pointerMove);events.add(docTarget,"mouseup",pointerUp);events.add(docTarget,"mouseover",pointerOver);events.add(docTarget,"mouseout",pointerOut);events.add(docTarget,"touchmove",recordTouches);events.add(docTarget,"touchend",recordTouches);events.add(docTarget,"touchcancel",recordTouches);events.add(docTarget,"touchstart",selectorDown);events.add(docTarget,"touchmove",pointerMove);events.add(docTarget,"touchend",pointerUp);events.add(docTarget,"touchcancel",pointerUp)}events.add(windowTarget,"blur",pointerUp);try{if(window.frameElement){parentDocTarget._element=window.frameElement.ownerDocument;events.add(parentDocTarget,"mouseup",pointerUp);events.add(parentDocTarget,"touchend",pointerUp);events.add(parentDocTarget,"touchcancel",pointerUp);events.add(parentDocTarget,"pointerup",pointerUp);events.add(parentDocTarget,"MSPointerUp",pointerUp);events.add(parentWindowTarget,"blur",pointerUp)}}catch(error){interact.windowParentError=error}function indexOf(array,target){for(var i=0,len=array.length;i<len;i++){if(array[i]===target){return i}}return-1}function contains(array,target){return indexOf(array,target)!==-1}events.add(docTarget,"selectstart",function(event){if(dragging||resizing||gesturing){checkAndPreventDefault(event,target)}});function matchesSelector(element,selector,nodeList){if(ie8MatchesSelector){return ie8MatchesSelector(element,selector,nodeList)}return element[prefixedMatchesSelector](selector)}if(!(prefixedMatchesSelector in Element.prototype)||!isFunction(Element.prototype[prefixedMatchesSelector])){ie8MatchesSelector=function(element,selector,elems){elems=elems||element.parentNode.querySelectorAll(selector);for(var i=0,len=elems.length;i<len;i++){if(elems[i]===element){return true}}return false}}(function(){var lastTime=0,vendors=["ms","moz","webkit","o"];for(var x=0;x<vendors.length&&!window.requestAnimationFrame;++x){reqFrame=window[vendors[x]+"RequestAnimationFrame"];cancelFrame=window[vendors[x]+"CancelAnimationFrame"]||window[vendors[x]+"CancelRequestAnimationFrame"]}if(!reqFrame){reqFrame=function(callback){var currTime=(new Date).getTime(),timeToCall=Math.max(0,16-(currTime-lastTime)),id=window.setTimeout(function(){callback(currTime+timeToCall)},timeToCall);lastTime=currTime+timeToCall;return id}}if(!cancelFrame){cancelFrame=function(id){clearTimeout(id)}}})();if(typeof exports!=="undefined"){if(typeof module!=="undefined"&&module.exports){exports=module.exports=interact}exports.interact=interact}else if(typeof define==="function"&&define.amd){define("interact",function(){return interact})}else{window.interact=interact}})();