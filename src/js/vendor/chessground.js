(function(){"use strict";var document=window.document,console=window.console,SVGElement=window.SVGElement||blank,SVGSVGElement=window.SVGSVGElement||blank,SVGElementInstance=window.SVGElementInstance||blank,HTMLElement=window.HTMLElement||window.Element,Gesture=window.Gesture||window.MSGesture,PointerEvent=Gesture&&(window.PointerEvent||window.MSPointerEvent),GestureEvent=Gesture&&(window.GestureEvent||window.MSGestureEvent),hypot=Math.hypot||function(x,y){return Math.sqrt(x*x+y*y)},prevCoords={pageX:0,pageY:0,clientX:0,clientY:0,timeStamp:0},curCoords={pageX:0,pageY:0,clientX:0,clientY:0,timeStamp:0},startCoords={pageX:0,pageY:0,clientX:0,clientY:0,timeStamp:0},pointerDelta={pageX:0,pageY:0,clientX:0,clientY:0,timeStamp:0,pageSpeed:0,clientSpeed:0},pointerIds=PointerEvent?[]:null,pointerMoves=PointerEvent?[]:null,downTime=0,downEvent=null,prevEvent=null,tapTime=0,prevTap=null,tmpXY={},inertiaStatus={active:false,target:null,targetElement:null,startEvent:null,pointerUp:{},xe:0,ye:0,duration:0,t0:0,vx0:0,vys:0,lambda_v0:0,one_ve_v0:0,i:null},gesture={start:{x:0,y:0},startDistance:0,prevDistance:0,distance:0,scale:1,startAngle:0,prevAngle:0},interactables=[],dropzones=[],selectorDZs=[],matches=[],selectorGesture=null,delegatedEvents={},target=null,dropTarget=null,dropElement=null,prevDropTarget=null,prevDropElement=null,defaultOptions={draggable:false,dropzone:false,accept:null,resizable:false,squareResize:false,resizeAxis:"xy",gesturable:false,actionChecker:null,styleCursor:true,snap:{mode:"grid",endOnly:false,actions:["drag"],range:Infinity,grid:{x:100,y:100},gridOffset:{x:0,y:0},anchors:[],paths:[],arrayTypes:/^anchors$|^paths$|^actions$/,objectTypes:/^grid$|^gridOffset$/,stringTypes:/^mode$/,numberTypes:/^range$/,boolTypes:/^endOnly$/},snapEnabled:false,restrict:{drag:null,resize:null,gesture:null,endOnly:false},restrictEnabled:true,autoScroll:{container:window,margin:60,speed:300,numberTypes:/^margin$|^speed$/},autoScrollEnabled:false,inertia:{resistance:10,minSpeed:100,endSpeed:10,actions:["drag","resize"],zeroResumeDelta:false,numberTypes:/^resistance$|^minSpeed$|^endSpeed$/,arrayTypes:/^actions$/,boolTypes:/^zeroResumeDelta$/},inertiaEnabled:false,origin:{x:0,y:0},deltaSource:"page",context:document},snapStatus={locked:false,x:0,y:0,dx:0,dy:0,realX:0,realY:0,anchors:[],paths:[]},restrictStatus={dx:0,dy:0,snap:snapStatus,restricted:false},autoScroll={target:null,i:null,x:0,y:0,scroll:function(){var options=autoScroll.target.options.autoScroll,container=options.container,now=(new Date).getTime(),dt=(now-autoScroll.prevTime)/1e3,s=options.speed*dt;if(s>=1){if(container instanceof window.Window){container.scrollBy(autoScroll.x*s,autoScroll.y*s)}else if(container){container.scrollLeft+=autoScroll.x*s;container.scrollTop+=autoScroll.y*s}autoScroll.prevTime=now}if(autoScroll.isScrolling){cancelFrame(autoScroll.i);autoScroll.i=reqFrame(autoScroll.scroll)}},edgeMove:function(event){if(target&&target.options.autoScrollEnabled&&(dragging||resizing)){var top,right,bottom,left,options=target.options.autoScroll;if(options.container instanceof window.Window){left=event.clientX<autoScroll.margin;top=event.clientY<autoScroll.margin;right=event.clientX>options.container.innerWidth-autoScroll.margin;bottom=event.clientY>options.container.innerHeight-autoScroll.margin}else{var rect=getElementRect(options.container);left=event.clientX<rect.left+autoScroll.margin;top=event.clientY<rect.top+autoScroll.margin;right=event.clientX>rect.right-autoScroll.margin;bottom=event.clientY>rect.bottom-autoScroll.margin}autoScroll.x=right?1:left?-1:0;autoScroll.y=bottom?1:top?-1:0;if(!autoScroll.isScrolling){autoScroll.margin=options.margin;autoScroll.speed=options.speed;autoScroll.start(target)}}},isScrolling:false,prevTime:0,start:function(target){autoScroll.isScrolling=true;cancelFrame(autoScroll.i);autoScroll.target=target;autoScroll.prevTime=(new Date).getTime();autoScroll.i=reqFrame(autoScroll.scroll)},stop:function(){autoScroll.isScrolling=false;cancelFrame(autoScroll.i)}},supportsTouch="createTouch"in document,margin=supportsTouch?20:10,pointerIsDown=false,pointerWasMoved=false,gesturing=false,dragging=false,dynamicDrop=false,resizing=false,resizeAxes="xy",actions={drag:{cursor:"move",moveListener:dragMove},resizex:{cursor:"e-resize",moveListener:resizeMove},resizey:{cursor:"s-resize",moveListener:resizeMove},resizexy:{cursor:"se-resize",moveListener:resizeMove},gesture:{cursor:"",moveListener:gestureMove}},actionIsEnabled={drag:true,resize:true,gesture:true},prepared=null,wheelEvent="onmousewheel"in document?"mousewheel":"wheel",eventTypes=["dragstart","dragmove","draginertiastart","dragend","dragenter","dragleave","drop","resizestart","resizemove","resizeinertiastart","resizeend","gesturestart","gesturemove","gestureinertiastart","gestureend","tap","doubletap"],globalEvents={},fireStates={directBind:0,onevent:1,globalBind:2},isOperaMobile=navigator.appName=="Opera"&&supportsTouch&&navigator.userAgent.match("Presto"),matchesSelector="matchesSelector"in Element.prototype?"matchesSelector":"webkitMatchesSelector"in Element.prototype?"webkitMatchesSelector":"mozMatchesSelector"in Element.prototype?"mozMatchesSelector":"oMatchesSelector"in Element.prototype?"oMatchesSelector":"msMatchesSelector",IE8MatchesSelector,reqFrame=window.requestAnimationFrame,cancelFrame=window.cancelAnimationFrame,windowTarget={_element:window,events:{}},docTarget={_element:document,events:{}},parentWindowTarget={_element:window.parent,events:{}},parentDocTarget={_element:null,events:{}},events=function(){var Event=window.Event,useAttachEvent="attachEvent"in window&&!("addEventListener"in window),addEvent=!useAttachEvent?"addEventListener":"attachEvent",removeEvent=!useAttachEvent?"removeEventListener":"detachEvent",on=useAttachEvent?"on":"",elements=[],targets=[],attachedListeners=[];if(!("indexOf"in Array.prototype)){Array.prototype.indexOf=function(elt){var len=this.length>>>0;var from=Number(arguments[1])||0;from=from<0?Math.ceil(from):Math.floor(from);if(from<0){from+=len}for(;from<len;from++){if(from in this&&this[from]===elt){return from}}return-1}}if(!("stopPropagation"in Event.prototype)){Event.prototype.stopPropagation=function(){this.cancelBubble=true};Event.prototype.stopImmediatePropagation=function(){this.cancelBubble=true;this.immediatePropagationStopped=true}}if(!("preventDefault"in Event.prototype)){Event.prototype.preventDefault=function(){this.returnValue=false}}if(!("hasOwnProperty"in Event.prototype)){Event.prototype.hasOwnProperty=Object.prototype.hasOwnProperty}function add(element,type,listener,useCapture){var elementIndex=elements.indexOf(element),target=targets[elementIndex];if(!target){target={events:{},typeCount:0};elementIndex=elements.push(element)-1;targets.push(target);attachedListeners.push(useAttachEvent?{supplied:[],wrapped:[],useCount:[]}:null)}if(!target.events[type]){target.events[type]=[];target.typeCount++}if(target.events[type].indexOf(listener)===-1){var ret;if(useAttachEvent){var listeners=attachedListeners[elementIndex],listenerIndex=listeners.supplied.indexOf(listener);var wrapped=listeners.wrapped[listenerIndex]||function(event){if(!event.immediatePropagationStopped){event.target=event.srcElement;event.currentTarget=element;if(/mouse|click/.test(event.type)){event.pageX=event.clientX+document.documentElement.scrollLeft;event.pageY=event.clientY+document.documentElement.scrollTop}listener(event)}};ret=element[addEvent](on+type,wrapped,Boolean(useCapture));if(listenerIndex===-1){listeners.supplied.push(listener);listeners.wrapped.push(wrapped);listeners.useCount.push(1)}else{listeners.useCount[listenerIndex]++}}else{ret=element[addEvent](type,listener,useCapture||false)}target.events[type].push(listener);return ret}}function remove(element,type,listener,useCapture){var i,elementIndex=elements.indexOf(element),target=targets[elementIndex],listeners,listenerIndex,wrapped=listener;if(!target||!target.events){return}if(useAttachEvent){listeners=attachedListeners[elementIndex];listenerIndex=listeners.supplied.indexOf(listener);wrapped=listeners.wrapped[listenerIndex]}if(type==="all"){for(type in target.events){if(target.events.hasOwnProperty(type)){remove(element,type,"all")}}return}if(target.events[type]){var len=target.events[type].length;if(listener==="all"){for(i=0;i<len;i++){remove(element,type,target.events[type][i],Boolean(useCapture))}}else{for(i=0;i<len;i++){if(target.events[type][i]===listener){element[removeEvent](on+type,wrapped,useCapture||false);target.events[type].splice(i,1);if(useAttachEvent&&listeners){listeners.useCount[listenerIndex]--;if(listeners.useCount[listenerIndex]===0){listeners.supplied.splice(listenerIndex,1);listeners.wrapped.splice(listenerIndex,1);listeners.useCount.splice(listenerIndex,1)}}break}}}if(target.events[type]&&target.events[type].length===0){target.events[type]=null;target.typeCount--}}if(!target.typeCount){targets.splice(elementIndex);elements.splice(elementIndex);attachedListeners.splice(elementIndex)}}return{add:function(target,type,listener,useCapture){add(target._element,type,listener,useCapture)},remove:function(target,type,listener,useCapture){remove(target._element,type,listener,useCapture)},addToElement:add,removeFromElement:remove,useAttachEvent:useAttachEvent}}();function blank(){}function isElement(o){return!!o&&(typeof Element==="object"?o instanceof Element:o&&typeof o==="object"&&o!==null&&o.nodeType===1&&typeof o.nodeName==="string")}function setEventXY(targetObj,source){getPageXY(source,tmpXY);targetObj.pageX=tmpXY.x;targetObj.pageY=tmpXY.y;getClientXY(source,tmpXY);targetObj.clientX=tmpXY.x;targetObj.clientY=tmpXY.y;targetObj.timeStamp=(new Date).getTime()}function setEventDeltas(targetObj,prev,cur){targetObj.pageX=cur.pageX-prev.pageX;targetObj.pageY=cur.pageY-prev.pageY;targetObj.clientX=cur.clientX-prev.clientX;targetObj.clientY=cur.clientY-prev.clientY;targetObj.timeStamp=(new Date).getTime()-prev.timeStamp;var dt=Math.max(targetObj.timeStamp/1e3,.001);targetObj.pageSpeed=hypot(targetObj.pageX,targetObj.pageY)/dt;targetObj.pageVX=targetObj.pageX/dt;targetObj.pageVY=targetObj.pageY/dt;targetObj.clientSpeed=hypot(targetObj.clientX,targetObj.pageY)/dt;targetObj.clientVX=targetObj.clientX/dt;targetObj.clientVY=targetObj.clientY/dt}function getXY(type,event,xy){var touch,x,y;xy=xy||{};type=type||"page";if(/touch/.test(event.type)&&event.touches){touch=event.touches.length?event.touches[0]:event.changedTouches[0];x=touch[type+"X"];y=touch[type+"Y"]}else{x=event[type+"X"];y=event[type+"Y"]}xy.x=x;xy.y=y;return xy}function getPageXY(event,page){page=page||{};if(event instanceof InteractEvent){if(/inertiastart/.test(event.type)){getPageXY(inertiaStatus.pointerUp,page);page.x+=inertiaStatus.sx;page.y+=inertiaStatus.sy}else{page.x=event.pageX;page.y=event.pageY}}else if(isOperaMobile){getXY("screen",event,page);page.x+=window.scrollX;page.y+=window.scrollY}else if(/gesture|inertia/i.test(event.type)){getXY("client",event,page);page.x+=document.documentElement.scrollLeft;page.y+=document.documentElement.scrollTop}else{getXY("page",event,page)}return page}function getClientXY(event,client){client=client||{};if(event instanceof InteractEvent){if(/inertiastart/.test(event.type)){getClientXY(inertiaStatus.pointerUp,client);client.x+=inertiaStatus.sx;client.y+=inertiaStatus.sy}else{client.x=event.clientX;client.y=event.clientY}}else{getXY(isOperaMobile?"screen":"client",event,client)}return client}function getScrollXY(){return{x:window.scrollX||document.documentElement.scrollLeft,y:window.scrollY||document.documentElement.scrollTop}}function getElementRect(element){var scroll=/ipad|iphone|ipod/i.test(navigator.userAgent)?{x:0,y:0}:getScrollXY(),clientRect=element instanceof SVGElement?element.getBoundingClientRect():element.getClientRects()[0];return clientRect&&{left:clientRect.left+scroll.x,right:clientRect.right+scroll.x,top:clientRect.top+scroll.y,bottom:clientRect.bottom+scroll.y,width:clientRect.width||clientRect.right-clientRect.left,height:clientRect.heigh||clientRect.bottom-clientRect.top}}function getTouchPair(event){var touches=[];if(event instanceof Array){touches[0]=event[0];touches[1]=event[1]}else if(PointerEvent){touches[0]=pointerMoves[0];touches[1]=pointerMoves[1]}else{touches[0]=event.touches[0];if(event.type==="touchend"&&event.touches.length===1){touches[1]=event.changedTouches[0]}else{touches[1]=event.touches[1]}}return touches}function touchAverage(event){var touches=getTouchPair(event);return{pageX:(touches[0].pageX+touches[1].pageX)/2,pageY:(touches[0].pageY+touches[1].pageY)/2,clientX:(touches[0].clientX+touches[1].clientX)/2,clientY:(touches[0].clientY+touches[1].clientY)/2}}function touchBBox(event){if(!(event.touches&&event.touches.length)&&!(PointerEvent&&pointerMoves.length)){return}var touches=getTouchPair(event),minX=Math.min(touches[0].pageX,touches[1].pageX),minY=Math.min(touches[0].pageY,touches[1].pageY),maxX=Math.max(touches[0].pageX,touches[1].pageX),maxY=Math.max(touches[0].pageY,touches[1].pageY);return{x:minX,y:minY,left:minX,top:minY,width:maxX-minX,height:maxY-minY}}function touchDistance(event){var deltaSource=(target&&target.options||defaultOptions).deltaSource,sourceX=deltaSource+"X",sourceY=deltaSource+"Y",touches=getTouchPair(event);var dx=touches[0][sourceX]-touches[1][sourceX],dy=touches[0][sourceY]-touches[1][sourceY];return hypot(dx,dy)}function touchAngle(event,prevAngle){var deltaSource=(target&&target.options||defaultOptions).deltaSource,sourceX=deltaSource+"X",sourceY=deltaSource+"Y",touches=getTouchPair(event),dx=touches[0][sourceX]-touches[1][sourceX],dy=touches[0][sourceY]-touches[1][sourceY],angle=180*Math.atan(dy/dx)/Math.PI;if(typeof prevAngle==="number"){var dr=angle-prevAngle,drClamped=dr%360;if(drClamped>315){angle-=360+angle/360|0*360}else if(drClamped>135){angle-=180+angle/360|0*360}else if(drClamped<-315){angle+=360+angle/360|0*360}else if(drClamped<-135){angle+=180+angle/360|0*360}}return angle}function getOriginXY(interactable,element){interactable=interactable||target;var origin=interactable?interactable.options.origin:defaultOptions.origin;element=element||interactable._element;if(origin==="parent"){origin=element.parentNode}else if(origin==="self"){origin=element}if(isElement(origin)){origin=getElementRect(origin);origin.x=origin.left;origin.y=origin.top}else if(typeof origin==="function"){origin=origin(interactable&&element)}return origin}function calcRects(interactableList){for(var i=0,len=interactableList.length;i<len;i++){interactableList[i].rect=interactableList[i].getRect()}}function inertiaFrame(){var options=inertiaStatus.target.options.inertia,lambda=options.resistance,t=(new Date).getTime()/1e3-inertiaStatus.t0;if(t<inertiaStatus.te){var progress=1-(Math.exp(-lambda*t)-inertiaStatus.lambda_v0)/inertiaStatus.one_ve_v0;if(inertiaStatus.modifiedXe===inertiaStatus.xe&&inertiaStatus.modifiedYe===inertiaStatus.ye){inertiaStatus.sx=inertiaStatus.xe*progress;inertiaStatus.sy=inertiaStatus.ye*progress}else{var quadPoint=getQuadraticCurvePoint(0,0,inertiaStatus.xe,inertiaStatus.ye,inertiaStatus.modifiedXe,inertiaStatus.modifiedYe,progress);inertiaStatus.sx=quadPoint.x;inertiaStatus.sy=quadPoint.y}pointerMove(inertiaStatus.startEvent);inertiaStatus.i=reqFrame(inertiaFrame)}else{inertiaStatus.sx=inertiaStatus.modifiedXe;inertiaStatus.sy=inertiaStatus.modifiedYe;inertiaStatus.active=false;pointerMove(inertiaStatus.startEvent);pointerUp(inertiaStatus.startEvent)}}function _getQBezierValue(t,p1,p2,p3){var iT=1-t;return iT*iT*p1+2*iT*t*p2+t*t*p3}function getQuadraticCurvePoint(startX,startY,cpX,cpY,endX,endY,position){return{x:_getQBezierValue(position,startX,cpX,endX),y:_getQBezierValue(position,startY,cpY,endY)}}function nodeContains(parent,child){while(child=child.parentNode){if(child===parent){return true}}return false}function inContext(interactable,element){return interactable._context===document||nodeContains(interactable._context,element)}function testIgnore(interactable,element){var ignoreFrom=interactable.options.ignoreFrom;if(!element||!isElement(element)){return false}if(typeof ignoreFrom==="string"){return element[matchesSelector](ignoreFrom)||testIgnore(interactable,element.parentNode)}else if(isElement(ignoreFrom)){return element===ignoreFrom||nodeContains(ignoreFrom,element)}return false}function resolveDrops(elements){if(elements.length){var dropzone,deepestZone=elements[0],parent,deepestZoneParents=[],dropzoneParents=[],child,i,n;for(i=1;i<elements.length;i++){dropzone=elements[i];if(deepestZone.parentNode===document){deepestZone=dropzone;continue}else if(dropzone.parentNode===document){continue}if(!deepestZoneParents.length){parent=deepestZone;while(parent.parentNode!==document){deepestZoneParents.unshift(parent);parent=parent.parentNode}}if(deepestZone instanceof HTMLElement&&dropzone instanceof SVGElement&&!(dropzone instanceof SVGSVGElement)){if(dropzone===deepestZone.parentNode){continue}parent=dropzone.ownerSVGElement}else{parent=dropzone}dropzoneParents=[];while(parent.parentNode!==document){dropzoneParents.unshift(parent);parent=parent.parentNode}n=0;while(dropzoneParents[n]&&dropzoneParents[n]===deepestZoneParents[n]){n++}var parents=[dropzoneParents[n-1],dropzoneParents[n],deepestZoneParents[n]];child=parents[0].lastChild;while(child){if(child===parents[1]){deepestZone=dropzone;deepestZoneParents=[];break}else if(child===parents[2]){break}child=child.previousSibling}}return{element:deepestZone,index:elements.indexOf(deepestZone)}}}function getDrop(event,element){if(dropzones.length||selectorDZs.length){var i,drops=[],elements=[],selectorDrops=[],selectorElements=[],drop,dropzone;element=element||target._element;for(i=0;i<dropzones.length;i++){var current=dropzones[i];if(isElement(current.options.accept)){if(current.options.accept!==element){continue}}else if(typeof current.options.accept==="string"){if(!element[matchesSelector](current.options.accept)){continue}}if(element!==current._element&&current.dropCheck(event,target,element)){drops.push(current);elements.push(current._element)}}drop=resolveDrops(elements);dropzone=drop?drops[drop.index]:null;if(selectorDZs.length){for(i=0;i<selectorDZs.length;i++){var selector=selectorDZs[i],context=selector._context,nodeList=context.querySelectorAll(selector.selector);for(var j=0,len=nodeList.length;j<len;j++){selector._element=nodeList[j];selector.rect=selector.getRect();if(isElement(selector.options.accept)){if(selector.options.accept!==element){continue}}else if(typeof selector.options.accept==="string"){if(!element[matchesSelector](selector.options.accept)){continue}}if(selector._element!==element&&elements.indexOf(selector._element)===-1&&selectorElements.indexOf(selector._element)===-1&&selector.dropCheck(event,target)){selectorDrops.push(selector);selectorElements.push(selector._element)}}}if(selectorElements.length){if(dropzone){selectorDrops.push(dropzone);selectorElements.push(dropzone._element)}drop=resolveDrops(selectorElements);if(drop){dropzone=selectorDrops[drop.index];if(dropzone.selector){dropzone._element=selectorElements[drop.index]}}}}return dropzone?{dropzone:dropzone,element:dropzone._element}:null}}function InteractEvent(event,action,phase,element,related){var client,page,deltaSource=(target&&target.options||defaultOptions).deltaSource,sourceX=deltaSource+"X",sourceY=deltaSource+"Y",options=target?target.options:defaultOptions,origin=getOriginXY(target,element);element=element||target._element;if(action==="gesture"){var average=touchAverage(event);page={x:average.pageX-origin.x,y:average.pageY-origin.y};client={x:average.clientX-origin.x,y:average.clientY-origin.y}}else{page=getPageXY(event);client=getClientXY(event);page.x-=origin.x;page.y-=origin.y;client.x-=origin.x;client.y-=origin.y;if(options.snapEnabled&&options.snap.actions.indexOf(action)!==-1){this.snap={range:snapStatus.range,locked:snapStatus.locked,x:snapStatus.x,y:snapStatus.y,realX:snapStatus.realX,realY:snapStatus.realY,dx:snapStatus.dx,dy:snapStatus.dy};if(snapStatus.locked){page.x+=snapStatus.dx;page.y+=snapStatus.dy;client.x+=snapStatus.dx;client.y+=snapStatus.dy}}}if(target.options.restrict[action]&&restrictStatus.restricted){page.x+=restrictStatus.dx;page.y+=restrictStatus.dy;client.x+=restrictStatus.dx;client.y+=restrictStatus.dy;this.restrict={dx:restrictStatus.dx,dy:restrictStatus.dy}}this.pageX=page.x;this.pageY=page.y;this.clientX=client.x;this.clientY=client.y;if(phase==="start"&&!(event instanceof InteractEvent)){setEventXY(startCoords,this)}this.x0=startCoords.pageX;this.y0=startCoords.pageY;this.clientX0=startCoords.clientX;this.clientY0=startCoords.clientY;this.ctrlKey=event.ctrlKey;this.altKey=event.altKey;this.shiftKey=event.shiftKey;this.metaKey=event.metaKey;this.button=event.button;this.target=element;this.t0=downTime;this.type=action+(phase||"");if(inertiaStatus.active){this.detail="inertia"}if(related){this.relatedTarget=related}if(prevEvent&&prevEvent.detail==="inertia"&&!inertiaStatus.active&&options.inertia.zeroResumeDelta){this.dx=this.dy=0}else if(phase==="end"||action==="drop"){if(deltaSource==="client"){this.dx=client.x-startCoords.clientX;this.dy=client.y-startCoords.clientY}else{this.dx=page.x-startCoords.pageX;this.dy=page.y-startCoords.pageY}}else if(phase==="inertiastart"){this.dx=prevEvent.dx;this.dy=prevEvent.dy}else{if(deltaSource==="client"){this.dx=client.x-prevEvent.clientX;this.dy=client.y-prevEvent.clientY}else{this.dx=page.x-prevEvent.pageX;this.dy=page.y-prevEvent.pageY}}if(action==="resize"){if(options.squareResize||event.shiftKey){if(resizeAxes==="y"){this.dx=this.dy}else{this.dy=this.dx}this.axes="xy"}else{this.axes=resizeAxes;if(resizeAxes==="x"){this.dy=0}else if(resizeAxes==="y"){this.dx=0}}}else if(action==="gesture"){this.touches=PointerEvent?[pointerMoves[0],pointerMoves[1]]:event.touches;if(phase==="start"){this.distance=touchDistance(event);this.box=touchBBox(event);this.scale=1;this.ds=0;this.angle=touchAngle(event);this.da=0}else if(phase==="end"||event instanceof InteractEvent){this.distance=prevEvent.distance;this.box=prevEvent.box;this.scale=prevEvent.scale;this.ds=this.scale-1;this.angle=prevEvent.angle;this.da=this.angle-gesture.startAngle}else{this.distance=touchDistance(event);this.box=touchBBox(event);this.scale=this.distance/gesture.startDistance;this.angle=touchAngle(event,gesture.prevAngle);this.ds=this.scale-gesture.prevScale;this.da=this.angle-gesture.prevAngle}}if(phase==="start"){this.timeStamp=downTime;this.dt=0;this.duration=0;this.speed=0;this.velocityX=0;this.velocityY=0}else if(phase==="inertiastart"){this.timeStamp=(new Date).getTime();this.dt=prevEvent.dt;this.duration=prevEvent.duration;this.speed=prevEvent.speed;this.velocityX=prevEvent.velocityX;this.velocityY=prevEvent.velocityY}else{this.timeStamp=(new Date).getTime();this.dt=this.timeStamp-prevEvent.timeStamp;this.duration=this.timeStamp-downTime;var dx,dy,dt;if(phase==="end"||event instanceof InteractEvent){dt=Math.max((phase==="end"?this.duration:this.dt)/1e3,.001);dx=this[sourceX]-prevEvent[sourceX];dy=this[sourceY]-prevEvent[sourceY];if(this.snap&&this.snap.locked){dx-=this.snap.dx;dy-=this.snap.dy}if(this.restrict){dx-=this.restrict.dx;dy-=this.restrict.dy}if(prevEvent.snap&&prevEvent.snap.locked){dx-=prevEvent[sourceX]-prevEvent.snap.dx;dy-=prevEvent[sourceY]-prevEvent.snap.dy}if(prevEvent.restrict){dx+=prevEvent.restrict.dx;dy+=prevEvent.restrict.dy}this.speed=hypot(dx,dy)/dt;this.velocityX=dx/dt;this.velocityY=dy/dt}else{this.speed=pointerDelta[deltaSource+"Speed"];this.velocityX=pointerDelta[deltaSource+"VX"];this.velocityY=pointerDelta[deltaSource+"VY"]}}}InteractEvent.prototype={preventDefault:blank,stopImmediatePropagation:function(){this.immediatePropagationStopped=this.propagationStopped=true},stopPropagation:function(){this.propagationStopped=true}};function preventOriginalDefault(){this.originalEvent.preventDefault()}function fireTaps(event,targets,elements){var tap={},prop,i;for(prop in event){tap[prop]=event[prop]}tap.preventDefault=preventOriginalDefault;tap.stopPropagation=InteractEvent.prototype.stopPropagation;tap.stopImmediatePropagation=InteractEvent.prototype.stopImmediatePropagation;tap.timeStamp=(new Date).getTime();tap.originalEvent=event;tap.dt=tap.timeStamp-downTime;tap.type="tap";var interval=tap.timeStamp-tapTime,dbl=prevTap&&prevTap.type!=="doubletap"&&prevTap.target===tap.target&&interval<500;tapTime=tap.timeStamp;for(i=0;i<targets.length;i++){var origin=getOriginXY(targets[i],elements[i]);tap.pageX-=origin.x;tap.pageY-=origin.y;tap.clientX-=origin.x;tap.clientY-=origin.y;tap.currentTarget=elements[i];targets[i].fire(tap);if(tap.immediatePropagationStopped||tap.propagationStopped&&targets[i+1]!==tap.currentTarget){break}}if(dbl){var doubleTap={};for(prop in tap){doubleTap[prop]=tap[prop]}doubleTap.dt=interval;doubleTap.type="doubletap";for(i=0;i<targets.length;i++){doubleTap.currentTarget=elements[i];targets[i].fire(doubleTap);if(doubleTap.immediatePropagationStopped||doubleTap.propagationStopped&&targets[i+1]!==doubleTap.currentTarget){break}}prevTap=doubleTap}else{prevTap=tap}}function collectTaps(event){if(downEvent){if(pointerWasMoved||!(event instanceof downEvent.constructor)||downEvent.target!==event.target){return}}var tapTargets=[],tapElements=[];var eventTarget=event.target instanceof SVGElementInstance?event.target.correspondingUseElement:event.target,element=eventTarget;function collectSelectorTaps(interactable,selector,context){var elements=Element.prototype[matchesSelector]===IE8MatchesSelector?context.querySelectorAll(selector):undefined;if(element!==document&&inContext(interactable,element)&&!testIgnore(interactable,eventTarget)&&element[matchesSelector](selector,elements)){tapTargets.push(interactable);tapElements.push(element)}}while(element){if(interact.isSet(element)){tapTargets.push(interact(element));tapElements.push(element)}interactables.forEachSelector(collectSelectorTaps);element=element.parentNode}if(tapTargets.length){fireTaps(event,tapTargets,tapElements)}}function defaultActionChecker(event){var rect=this.getRect(),right,bottom,action=null,page=getPageXY(event),options=this.options;if(!rect){return null}if(actionIsEnabled.resize&&options.resizable){right=options.resizeAxis!=="y"&&page.x>rect.right-margin;bottom=options.resizeAxis!=="x"&&page.y>rect.bottom-margin}resizeAxes=(right?"x":"")+(bottom?"y":"");action=resizeAxes?"resize"+resizeAxes:actionIsEnabled.drag&&options.draggable?"drag":null;if(actionIsEnabled.gesture&&(event.touches&&event.touches.length>=2||PointerEvent&&pointerIds.length>=2)&&!(dragging||resizing)){action="gesture"}return action}function validateAction(action,interactable){if(typeof action!=="string"){return null}interactable=interactable||target;var actionType=action.indexOf("resize")!==-1?"resize":action,options=(interactable||target).options;if((actionType==="resize"&&options.resizable||action==="drag"&&options.draggable||action==="gesture"&&options.gesturable)&&actionIsEnabled[actionType]){if(action==="resize"||action==="resizeyx"){action="resizexy"}return action}return null}function selectorDown(event){if(prepared&&downEvent&&event.type!==downEvent.type){if(!/^input$|^textarea$/i.test(target._element.nodeName)){event.preventDefault()}return}if(downEvent&&event.type==="mousedown"&&downEvent.type==="touchstart"&&event.timeStamp-downEvent.timeStamp<300){return}var eventTarget=event.target instanceof SVGElementInstance?event.target.correspondingUseElement:event.target,element=eventTarget,action;if(PointerEvent){addPointer(event)}if(inertiaStatus.active&&target.selector){while(element&&element!==document){if(element===inertiaStatus.targetElement&&validateAction(target.getAction(event))===prepared){cancelFrame(inertiaStatus.i);inertiaStatus.active=false;if(PointerEvent){addPointer(event,selectorGesture)}return}element=element.parentNode}}if(dragging||resizing||gesturing){return}function pushMatches(interactable,selector,context){var elements=Element.prototype[matchesSelector]===IE8MatchesSelector?context.querySelectorAll(selector):undefined;if(inContext(interactable,element)&&!testIgnore(interactable,eventTarget)&&element[matchesSelector](selector,elements)){interactable._element=element;matches.push(interactable)}}if(matches.length&&/mousedown|pointerdown/i.test(event.type)){action=validateSelector(event,matches)}else{while(element&&element!==document&&!action){matches=[];interactables.forEachSelector(pushMatches);action=validateSelector(event,matches);element=element.parentNode}}if(action){pointerIsDown=true;prepared=action;return pointerDown(event,action)}else{downTime=(new Date).getTime();downEvent=event;setEventXY(prevCoords,event);pointerWasMoved=false}}function pointerDown(event,forceAction){if(!forceAction&&pointerIsDown&&downEvent&&event.type!==downEvent.type){if(!/^input$|^textarea$/i.test(target._element.nodeName)){event.preventDefault()}return}pointerIsDown=true;if(PointerEvent){addPointer(event)}if((event.touches&&event.touches.length<2||pointerIds&&pointerIds.length<2)&&!target||!prepared){var interactable=interactables.get(event.currentTarget);if(!testIgnore(interactable,event.target)){target=interactable}}var options=target&&target.options;if(target&&!(dragging||resizing||gesturing)){var action=validateAction(forceAction||target.getAction(event));setEventXY(startCoords,event);if(PointerEvent&&event instanceof PointerEvent){if(!target._gesture.target){target._gesture.target=target._element}addPointer(event,target._gesture)}if(!action){return event}pointerWasMoved=false;if(options.styleCursor){document.documentElement.style.cursor=actions[action].cursor}resizeAxes=action==="resizexy"?"xy":action==="resizex"?"x":action==="resizey"?"y":"";if(action==="gesture"&&(event.touches&&event.touches.length<2||PointerEvent&&pointerIds.length<2)){action=null}prepared=action;snapStatus.x=null;snapStatus.y=null;downTime=(new Date).getTime();downEvent=event;setEventXY(prevCoords,event);pointerWasMoved=false;if(!/^input$|^textarea$/i.test(target._element.nodeName)){event.preventDefault()}}else if(inertiaStatus.active&&event.currentTarget===inertiaStatus.targetElement&&target===inertiaStatus.target&&validateAction(target.getAction(event))===prepared){cancelFrame(inertiaStatus.i);inertiaStatus.active=false;if(PointerEvent){if(!target._gesture.target){target._gesture.target=target._element}addPointer(event,target._gesture)}}}function setSnapping(event,status){var snap=target.options.snap,anchors=snap.anchors,page,closest,range,inRange,snapChanged,dx,dy,distance,i,len;status=status||snapStatus;if(status.useStatusXY){page={x:status.x,y:status.y}}else{var origin=getOriginXY(target);page=getPageXY(event);page.x-=origin.x;page.y-=origin.y}status.realX=page.x;status.realY=page.y;if(snap.range<0){snap.range=Infinity}if(snap.mode==="path"){anchors=[];for(i=0,len=snap.paths.length;i<len;i++){var path=snap.paths[i];if(typeof path==="function"){path=path(page.x,page.y)}anchors.push({x:typeof path.x==="number"?path.x:page.x,y:typeof path.y==="number"?path.y:page.y,range:typeof path.range==="number"?path.range:snap.range})}}if((snap.mode==="anchor"||snap.mode==="path")&&anchors.length){closest={anchor:null,distance:0,range:0,dx:0,dy:0};for(i=0,len=anchors.length;i<len;i++){var anchor=anchors[i];range=typeof anchor.range==="number"?anchor.range:snap.range;dx=anchor.x-page.x;dy=anchor.y-page.y;distance=hypot(dx,dy);inRange=distance<range;if(range===Infinity&&closest.inRange&&closest.range!==Infinity){inRange=false}if(!closest.anchor||(inRange?closest.inRange&&range!==Infinity?distance/range<closest.distance/closest.range:distance<closest.distance:!closest.inRange&&distance<closest.distance)){if(range===Infinity){inRange=true}closest.anchor=anchor;closest.distance=distance;closest.range=range;closest.inRange=inRange;closest.dx=dx;closest.dy=dy;status.range=range}}inRange=closest.inRange;snapChanged=closest.anchor.x!==status.x||closest.anchor.y!==status.y;status.x=closest.anchor.x;status.y=closest.anchor.y;status.dx=closest.dx;
status.dy=closest.dy}else if(snap.mode==="grid"){var gridx=Math.round((page.x-snap.gridOffset.x)/snap.grid.x),gridy=Math.round((page.y-snap.gridOffset.y)/snap.grid.y),newX=gridx*snap.grid.x+snap.gridOffset.x,newY=gridy*snap.grid.y+snap.gridOffset.y;dx=newX-page.x;dy=newY-page.y;distance=hypot(dx,dy);inRange=distance<snap.range;snapChanged=newX!==status.x||newY!==status.y;status.x=newX;status.y=newY;status.dx=dx;status.dy=dy;status.range=snap.range}status.changed=snapChanged||inRange&&!status.locked;status.locked=inRange;return status}function setRestriction(event,status){var action=interact.currentAction()||prepared,restriction=target&&target.options.restrict[action],page;status=status||restrictStatus;page=status.useStatusXY?page={x:status.x,y:status.y}:page=getPageXY(event);if(status.snap&&status.snap.locked){page.x+=status.snap.dx||0;page.y+=status.snap.dy||0}status.dx=0;status.dy=0;status.restricted=false;if(!action||!restriction){return status}var rect;if(restriction==="parent"){restriction=target._element.parentNode}else if(restriction==="self"){restriction=target._element}if(isElement(restriction)){rect=getElementRect(restriction)}else{if(typeof restriction==="function"){restriction=restriction(page.x,page.y,target._element)}rect=restriction;if("x"in restriction&&"y"in restriction){rect={left:restriction.x,top:restriction.y,right:restriction.x+restriction.width,bottom:restriction.y+restriction.height}}}status.dx=Math.max(Math.min(rect.right,page.x),rect.left)-page.x;status.dy=Math.max(Math.min(rect.bottom,page.y),rect.top)-page.y;status.restricted=true;return status}function pointerMove(event,preEnd){if(!pointerIsDown){return}if(!(event instanceof InteractEvent)){setEventXY(curCoords,event)}if(!pointerWasMoved){var dx=curCoords.clientX-startCoords.clientX,dy=curCoords.clientY-startCoords.clientY;pointerWasMoved=hypot(dx,dy)>1}if(!prepared||event.type==="mousemove"&&downEvent.type==="touchstart"){return}if(pointerWasMoved&&(!inertiaStatus.active||event instanceof InteractEvent&&/inertiastart/.test(event.type))){if(!(dragging||resizing||gesturing)){setEventDeltas(pointerDelta,prevCoords,curCoords)}if(prepared&&target){var shouldRestrict=target.options.restrictEnabled&&(!target.options.restrict.endOnly||preEnd),starting=!(dragging||resizing||gesturing),snapEvent=starting?downEvent:event;if(starting){prevEvent=downEvent}if(!shouldRestrict){restrictStatus.restricted=false}if(target.options.snapEnabled&&target.options.snap.actions.indexOf(prepared)!==-1&&(!target.options.snap.endOnly||preEnd)){setSnapping(snapEvent);if(snapStatus.changed||!snapStatus.locked||shouldRestrict){if(shouldRestrict){setRestriction(event)}actions[prepared].moveListener(event)}}else{if(shouldRestrict){setRestriction(event)}actions[prepared].moveListener(event)}}}if(!(event instanceof InteractEvent)){setEventDeltas(pointerDelta,prevCoords,curCoords);setEventXY(prevCoords,event)}if(dragging||resizing){autoScroll.edgeMove(event)}}function addPointer(event,gesture){if(pointerIds.length&&pointerMoves[0].pointerType!==event.pointerType){return}if(gesture){gesture.addPointer(event.pointerId)}var index=pointerIds.indexOf(event.pointerId);if(index===-1){pointerIds.push(event.pointerId);pointerMoves[pointerIds.length-1]=event}else{pointerMoves[index]=event}}function removePointer(event){var index=pointerIds.indexOf(event.pointerId);if(index===-1){return}pointerIds.splice(index,1)}function recordPointers(event){var index=pointerIds.indexOf(event.pointerId);if(index===-1){return}if(/move/i.test(event.type)){pointerMoves[index]=event}else if(/up|cancel/i.test(event.type)){removePointer(event);if(gesturing&&pointerIds.length<2){target._gesture.stop()}}}function dragMove(event){event.preventDefault();var dragEvent,dragEnterEvent,dragLeaveEvent,dropTarget,leaveDropTarget;if(!dragging){dragEvent=new InteractEvent(downEvent,"drag","start");dragging=true;target.fire(dragEvent);if(!dynamicDrop){calcRects(dropzones);for(var i=0;i<selectorDZs.length;i++){var interactable=selectorDZs[i],context=interactable._context;interactable._elements=context.querySelectorAll(interactable.selector)}}prevEvent=dragEvent;if(target.options.snapEnabled&&!target.options.snap.endOnly){setSnapping(event)}}dragEvent=new InteractEvent(event,"drag","move");var draggableElement=target._element,drop=getDrop(dragEvent,draggableElement);if(drop){dropTarget=drop.dropzone;dropElement=drop.element}else{dropTarget=dropElement=null}target._element=draggableElement;if(dropElement!==prevDropElement){if(prevDropTarget){dragLeaveEvent=new InteractEvent(event,"drag","leave",prevDropElement,draggableElement);dragEvent.dragLeave=prevDropElement;leaveDropTarget=prevDropTarget;prevDropTarget=prevDropElement=null}if(dropTarget){dragEnterEvent=new InteractEvent(event,"drag","enter",dropElement,draggableElement);dragEvent.dragEnter=dropTarget._element;prevDropTarget=dropTarget;prevDropElement=prevDropTarget._element}}target.fire(dragEvent);if(dragLeaveEvent){leaveDropTarget.fire(dragLeaveEvent)}if(dragEnterEvent){dropTarget.fire(dragEnterEvent)}prevEvent=dragEvent}function resizeMove(event){event.preventDefault();var resizeEvent;if(!resizing){resizeEvent=new InteractEvent(downEvent,"resize","start");target.fire(resizeEvent);target.fire(resizeEvent);resizing=true;prevEvent=resizeEvent;if(target.options.snapEnabled&&!target.options.snap.endOnly){setSnapping(event)}}resizeEvent=new InteractEvent(event,"resize","move");target.fire(resizeEvent);prevEvent=resizeEvent}function gestureMove(event){if((!event.touches||event.touches.length<2)&&!PointerEvent){return}event.preventDefault();var gestureEvent;if(!gesturing){gestureEvent=new InteractEvent(downEvent,"gesture","start");gestureEvent.ds=0;gesture.startDistance=gesture.prevDistance=gestureEvent.distance;gesture.startAngle=gesture.prevAngle=gestureEvent.angle;gesture.scale=1;gesturing=true;target.fire(gestureEvent);prevEvent=gestureEvent;if(target.options.snapEnabled&&!target.options.snap.endOnly){setSnapping(event)}}gestureEvent=new InteractEvent(event,"gesture","move");gestureEvent.ds=gestureEvent.scale-gesture.scale;target.fire(gestureEvent);prevEvent=gestureEvent;gesture.prevAngle=gestureEvent.angle;gesture.prevDistance=gestureEvent.distance;if(gestureEvent.scale!==Infinity&&gestureEvent.scale!==null&&gestureEvent.scale!==undefined&&!isNaN(gestureEvent.scale)){gesture.scale=gestureEvent.scale}}function validateSelector(event,matches){for(var i=0,len=matches.length;i<len;i++){var match=matches[i],action=validateAction(match.getAction(event,match),match);if(action){target=match;return action}}}function pointerOver(event){if(pointerIsDown||dragging||resizing||gesturing){return}var curMatches=[],prevTargetElement=target&&target._element,eventTarget=event.target instanceof SVGElementInstance?event.target.correspondingUseElement:event.target;if(target&&testIgnore(target,eventTarget)){target=null;matches=[]}var elementInteractable=interactables.get(eventTarget),elementAction=elementInteractable&&!testIgnore(elementInteractable,eventTarget)&&validateAction(elementInteractable.getAction(event),elementInteractable);function pushCurMatches(interactable,selector){if(interactable&&inContext(interactable,eventTarget)&&!testIgnore(interactable,eventTarget)&&eventTarget[matchesSelector](selector)){interactable._element=eventTarget;curMatches.push(interactable)}}if(elementAction){target=elementInteractable;matches=[]}else{interactables.forEachSelector(pushCurMatches);if(validateSelector(event,curMatches)){matches=curMatches;pointerHover(event,matches);events.addToElement(eventTarget,"mousemove",pointerHover)}else if(target){var prevTargetChildren=prevTargetElement.querySelectorAll("*");if(Array.prototype.indexOf.call(prevTargetChildren,eventTarget)!==-1){for(var i=0;i<matches.length;i++){matches[i]._element=prevTargetElement}pointerHover(event,matches);events.addToElement(target._element,"mousemove",pointerHover)}else{target=null;matches=[]}}}}function pointerOut(event){if(pointerIsDown||dragging||resizing||gesturing){return}var eventTarget=event.target instanceof SVGElementInstance?event.target.correspondingUseElement:event.target;if(!interactables.get(eventTarget)){events.removeFromElement(eventTarget,pointerHover)}if(target&&target.options.styleCursor&&!(dragging||resizing||gesturing)){document.documentElement.style.cursor=""}}function pointerHover(event,matches){if(!(pointerIsDown||dragging||resizing||gesturing)){var action;if(matches){action=validateSelector(event,matches)}else if(target){action=validateAction(target.getAction(event))}if(target&&target.options.styleCursor){if(action){document.documentElement.style.cursor=actions[action].cursor}else{document.documentElement.style.cursor=""}}}else if(prepared){event.preventDefault()}}function pointerUp(event){if(!(event instanceof InteractEvent||PointerEvent)&&pointerIsDown&&downEvent&&!(event instanceof downEvent.constructor)){return}if(event.touches&&event.touches.length>=2){return}if(GestureEvent&&event instanceof GestureEvent&&/inertiastart/i.test(event.type)){event.gestureObject.stop();return}var endEvent,inertiaOptions=target&&target.options.inertia,prop;if(dragging||resizing||gesturing){if(inertiaStatus.active){return}var deltaSource=target.options.deltaSource,pointerSpeed=pointerDelta[deltaSource+"Speed"];if(target.options.inertiaEnabled&&prepared!=="gesture"&&inertiaOptions.actions.indexOf(prepared)!==-1&&event!==inertiaStatus.startEvent&&(new Date).getTime()-curCoords.timeStamp<50&&pointerSpeed>inertiaOptions.minSpeed&&pointerSpeed>inertiaOptions.endSpeed){var lambda=inertiaOptions.resistance,inertiaDur=-Math.log(inertiaOptions.endSpeed/pointerSpeed)/lambda,startEvent;inertiaStatus.active=true;inertiaStatus.target=target;inertiaStatus.targetElement=target._element;if(events.useAttachEvent){for(prop in event){inertiaStatus.pointerUp[prop]=event[prop]}}else{inertiaStatus.pointerUp=event}inertiaStatus.startEvent=startEvent=new InteractEvent(event,"drag","inertiastart");inertiaStatus.vx0=pointerDelta[deltaSource+"VX"];inertiaStatus.vy0=pointerDelta[deltaSource+"VY"];inertiaStatus.v0=pointerSpeed;inertiaStatus.x0=prevEvent.pageX;inertiaStatus.y0=prevEvent.pageY;inertiaStatus.t0=inertiaStatus.startEvent.timeStamp/1e3;inertiaStatus.sx=inertiaStatus.sy=0;inertiaStatus.modifiedXe=inertiaStatus.xe=(inertiaStatus.vx0-inertiaDur)/lambda;inertiaStatus.modifiedYe=inertiaStatus.ye=(inertiaStatus.vy0-inertiaDur)/lambda;inertiaStatus.te=inertiaDur;inertiaStatus.lambda_v0=lambda/inertiaStatus.v0;inertiaStatus.one_ve_v0=1-inertiaOptions.endSpeed/inertiaStatus.v0;var startX=startEvent.pageX,startY=startEvent.pageY,statusObject;if(startEvent.snap&&startEvent.snap.locked){startX-=startEvent.snap.dx;startY-=startEvent.snap.dy}if(startEvent.restrict){startX-=startEvent.restrict.dx;startY-=startEvent.restrict.dy}statusObject={useStatusXY:true,x:startX+inertiaStatus.xe,y:startY+inertiaStatus.ye,dx:0,dy:0,snap:null};statusObject.snap=statusObject;if(target.options.snapEnabled&&target.options.snap.endOnly){var snap=setSnapping(event,statusObject);if(snap.locked){inertiaStatus.modifiedXe+=snap.dx;inertiaStatus.modifiedYe+=snap.dy}}if(target.options.restrictEnabled&&target.options.restrict.endOnly){var restrict=setRestriction(event,statusObject);inertiaStatus.modifiedXe+=restrict.dx;inertiaStatus.modifiedYe+=restrict.dy}cancelFrame(inertiaStatus.i);inertiaStatus.i=reqFrame(inertiaFrame);target.fire(inertiaStatus.startEvent);return}if(target.options.snapEnabled&&target.options.snap.endOnly||target.options.restrictEnabled&&target.options.restrict.endOnly){pointerMove(event,true)}}if(dragging){endEvent=new InteractEvent(event,"drag","end");var dropEvent,draggableElement=target._element,drop=getDrop(endEvent,draggableElement);if(drop){dropTarget=drop.dropzone;dropElement=drop.element}else{dropTarget=null;dropElement=null}target._element=draggableElement;if(dropTarget){dropEvent=new InteractEvent(event,"drop",null,dropElement,draggableElement);endEvent.dropzone=dropElement}else if(prevDropTarget){var dragLeaveEvent=new InteractEvent(event,"drag","leave",dropElement,draggableElement);prevDropTarget.fire(dragLeaveEvent,draggableElement);endEvent.dragLeave=prevDropElement}target.fire(endEvent);if(dropEvent){dropTarget.fire(dropEvent)}}else if(resizing){endEvent=new InteractEvent(event,"resize","end");target.fire(endEvent)}else if(gesturing){endEvent=new InteractEvent(event,"gesture","end");target.fire(endEvent)}interact.stop()}function delegateListener(event,useCapture){var fakeEvent={},delegated=delegatedEvents[event.type],element=event.target;useCapture=useCapture?true:false;for(var prop in event){fakeEvent[prop]=event[prop]}fakeEvent.originalEvent=event;fakeEvent.preventDefault=preventOriginalDefault;while(element&&element!==document){for(var i=0;i<delegated.selectors.length;i++){var selector=delegated.selectors[i],context=delegated.contexts[i];if(element[matchesSelector](selector)&&context===event.currentTarget&&nodeContains(context,element)){var listeners=delegated.listeners[i];fakeEvent.currentTarget=element;for(var j=0;j<listeners.length;j++){if(listeners[j][1]!==useCapture){continue}try{listeners[j][0](fakeEvent)}catch(error){console.error("Error thrown from delegated listener: "+'"'+selector+'" '+event.type+" "+(listeners[j][0].name?listeners[j][0].name:""));console.log(error)}}}}element=element.parentNode}}function delegateUseCapture(event){return delegateListener.call(this,event,true)}interactables.indexOfElement=dropzones.indexOfElement=function indexOfElement(element,context){for(var i=0;i<this.length;i++){var interactable=this[i];if(interactable.selector===element&&interactable._context===(context||document)||!interactable.selector&&interactable._element===element){return i}}return-1};interactables.get=dropzones.get=function interactableGet(element,options){return this[this.indexOfElement(element,options&&options.context)]};interactables.forEachSelector=function(callback){for(var i=0;i<this.length;i++){var interactable=this[i];if(!interactable.selector){continue}if(callback(interactable,interactable.selector,interactable._context,i,this)===false){return}}};function clearTargets(){if(target&&!target.selector){target=null}dropTarget=dropElement=prevDropTarget=prevDropElement=null}function interact(element,options){return interactables.get(element,options)||new Interactable(element,options)}function IOptions(options){for(var option in defaultOptions){if(options.hasOwnProperty(option)&&typeof options[option]===typeof defaultOptions[option]){this[option]=options[option]}}}IOptions.prototype=defaultOptions;function Interactable(element,options){this._element=element;this._iEvents=this._iEvents||{};if(typeof element==="string"){document.querySelector(element);this.selector=element;this._gesture=selectorGesture;if(options&&options.context&&(window.Node?options.context instanceof window.Node:isElement(options.context)||options.context===document)){this._context=options.context}}else if(isElement(element)){if(PointerEvent){events.add(this,"pointerdown",pointerDown);events.add(this,"pointermove",pointerHover);this._gesture=new Gesture;this._gesture.target=element}else{events.add(this,"mousedown",pointerDown);events.add(this,"mousemove",pointerHover);events.add(this,"touchstart",pointerDown);events.add(this,"touchmove",pointerHover)}}interactables.push(this);this.set(options)}Interactable.prototype={setOnEvents:function(action,phases){if(action==="drop"){var drop=phases.ondrop||phases.onDrop||phases.drop,dragenter=phases.ondragenter||phases.onDropEnter||phases.dragenter,dragleave=phases.ondragleave||phases.onDropLeave||phases.dragleave;if(typeof drop==="function"){this.ondrop=drop}if(typeof dragenter==="function"){this.ondragenter=dragenter}if(typeof dragleave==="function"){this.ondragleave=dragleave}}else{var start=phases.onstart||phases.onStart||phases.start,move=phases.onmove||phases.onMove||phases.move,end=phases.onend||phases.onEnd||phases.end;var inertiastart=phases.oninertiastart||phases.onInertiaStart||phases.inertiastart;action="on"+action;if(typeof start==="function"){this[action+"start"]=start}if(typeof move==="function"){this[action+"move"]=move}if(typeof end==="function"){this[action+"end"]=end}if(typeof inertiastart==="function"){this[action+"inertiastart"]=inertiastart}}return this},draggable:function(options){if(options instanceof Object){this.options.draggable=true;this.setOnEvents("drag",options);return this}if(typeof options==="boolean"){this.options.draggable=options;return this}if(options===null){delete this.options.draggable;return this}return this.options.draggable},dropzone:function(options){if(options instanceof Object){this.options.dropzone=true;this.setOnEvents("drop",options);this.accept(options.accept);(this.selector?selectorDZs:dropzones).push(this);if(!dynamicDrop&&!this.selector){this.rect=this.getRect()}return this}if(typeof options==="boolean"){if(options){(this.selector?selectorDZs:dropzones).push(this);if(!dynamicDrop&&!this.selector){this.rect=this.getRect()}}else{var array=this.selector?selectorDZs:dropzones,index=array.indexOf(this);if(index!==-1){array.splice(index,1)}}this.options.dropzone=options;return this}if(options===null){delete this.options.dropzone;return this}return this.options.dropzone},dropCheck:function(event,draggable,element){var page=getPageXY(event),origin=getOriginXY(draggable,element),horizontal,vertical;page.x+=origin.x;page.y+=origin.y;if(dynamicDrop){this.rect=this.getRect()}if(!this.rect){return false}horizontal=page.x>this.rect.left&&page.x<this.rect.right;vertical=page.y>this.rect.top&&page.y<this.rect.bottom;return horizontal&&vertical},dropChecker:function(newValue){if(typeof newValue==="function"){this.dropCheck=newValue;return this}return this.dropCheck},accept:function(newValue){if(isElement(newValue)){this.options.accept=newValue;return this}if(typeof newValue==="string"){document.querySelector(newValue);this.options.accept=newValue;return this}if(newValue===null){delete this.options.accept;return this}return this.options.accept},resizable:function(options){if(options instanceof Object){this.options.resizable=true;this.setOnEvents("resize",options);if(/^x$|^y$|^xy$/.test(options.axis)){this.options.resizeAxis=options.axis}else if(options.axis===null){this.options.resizeAxis=defaultOptions.resizeAxis}return this}if(typeof options==="boolean"){this.options.resizable=options;return this}return this.options.resizable},resizeable:blank,squareResize:function(newValue){if(typeof newValue==="boolean"){this.options.squareResize=newValue;return this}if(newValue===null){delete this.options.squareResize;return this}return this.options.squareResize},gesturable:function(options){if(options instanceof Object){this.options.gesturable=true;this.setOnEvents("gesture",options);return this}if(typeof options==="boolean"){this.options.gesturable=options;return this}if(options===null){delete this.options.gesturable;return this}return this.options.gesturable},gestureable:blank,autoScroll:function(options){var defaults=defaultOptions.autoScroll;if(options instanceof Object){var autoScroll=this.options.autoScroll;if(autoScroll===defaults){autoScroll=this.options.autoScroll={margin:defaults.margin,distance:defaults.distance,interval:defaults.interval,container:defaults.container}}autoScroll.margin=this.validateSetting("autoScroll","margin",options.margin);autoScroll.speed=this.validateSetting("autoScroll","speed",options.speed);autoScroll.container=isElement(options.container)||options.container instanceof window.Window?options.container:defaults.container;this.options.autoScrollEnabled=true;this.options.autoScroll=autoScroll;return this}if(typeof options==="boolean"){this.options.autoScrollEnabled=options;return this}if(options===null){delete this.options.autoScrollEnabled;delete this.options.autoScroll;return this}return this.options.autoScrollEnabled?this.options.autoScroll:false},snap:function(options){var defaults=defaultOptions.snap;if(options instanceof Object){var snap=this.options.snap;if(snap===defaults){snap={}}snap.mode=this.validateSetting("snap","mode",options.mode);snap.endOnly=this.validateSetting("snap","endOnly",options.endOnly);snap.actions=this.validateSetting("snap","actions",options.actions);snap.range=this.validateSetting("snap","range",options.range);snap.paths=this.validateSetting("snap","paths",options.paths);snap.grid=this.validateSetting("snap","grid",options.grid);snap.gridOffset=this.validateSetting("snap","gridOffset",options.gridOffset);snap.anchors=this.validateSetting("snap","anchors",options.anchors);this.options.snapEnabled=true;this.options.snap=snap;return this}if(typeof options==="boolean"){this.options.snapEnabled=options;return this}if(options===null){delete this.options.snapEnabled;delete this.options.snap;return this}return this.options.snapEnabled?this.options.snap:false},inertia:function(options){var defaults=defaultOptions.inertia;if(options instanceof Object){var inertia=this.options.inertia;if(inertia===defaults){inertia=this.options.inertia={resistance:defaults.resistance,minSpeed:defaults.minSpeed,endSpeed:defaults.endSpeed,actions:defaults.actions,zeroResumeDelta:defaults.zeroResumeDelta}}inertia.resistance=this.validateSetting("inertia","resistance",options.resistance);inertia.minSpeed=this.validateSetting("inertia","minSpeed",options.minSpeed);inertia.endSpeed=this.validateSetting("inertia","endSpeed",options.endSpeed);inertia.actions=this.validateSetting("inertia","actions",options.actions);inertia.zeroResumeDelta=this.validateSetting("inertia","zeroResumeDelta",options.zeroResumeDelta);this.options.inertiaEnabled=true;this.options.inertia=inertia;return this}if(typeof options==="boolean"){this.options.inertiaEnabled=options;return this}if(options===null){delete this.options.inertiaEnabled;delete this.options.inertia;return this}return this.options.inertiaEnabled?this.options.inertia:false},getAction:function(event){var action=this.defaultActionChecker(event);if(this.options.actionChecker){action=this.options.actionChecker(event,action,this)}return action},defaultActionChecker:defaultActionChecker,actionChecker:function(newValue){if(typeof newValue==="function"){this.options.actionChecker=newValue;return this}if(newValue===null){delete this.options.actionChecker;return this}return this.options.actionChecker},getRect:function rectCheck(){if(this.selector&&!isElement(this._element)){this._element=this._context.querySelector(this.selector)}return getElementRect(this._element)},rectChecker:function(newValue){if(typeof newValue==="function"){this.getRect=newValue;return this}if(newValue===null){delete this.options.getRect;return this}return this.getRect},styleCursor:function(newValue){if(typeof newValue==="boolean"){this.options.styleCursor=newValue;return this}if(newValue===null){delete this.options.styleCursor;return this}return this.options.styleCursor},origin:function(newValue){if(newValue instanceof Object||/^parent$|^self$/.test(newValue)){this.options.origin=newValue;return this}if(newValue===null){delete this.options.origin;return this}return this.options.origin},deltaSource:function(newValue){if(newValue==="page"||newValue==="client"){this.options.deltaSource=newValue;return this}if(newValue===null){delete this.options.deltaSource;return this}return this.options.deltaSource},restrict:function(newValue){if(newValue===undefined){return this.options.restrict}if(newValue instanceof Object){var newRestrictions={};if(newValue.drag instanceof Object||/^parent$|^self$/.test(newValue.drag)){newRestrictions.drag=newValue.drag}if(newValue.resize instanceof Object||/^parent$|^self$/.test(newValue.resize)){newRestrictions.resize=newValue.resize}if(newValue.gesture instanceof Object||/^parent$|^self$/.test(newValue.gesture)){newRestrictions.gesture=newValue.gesture}if(typeof newValue.endOnly==="boolean"){newRestrictions.endOnly=newValue.endOnly}this.options.restrictEnabled=true;this.options.restrict=newRestrictions}else if(newValue===null){delete this.options.restrict;delete this.options.restrictEnabled}return this},context:function(){return this._context},_context:document,ignoreFrom:function(newValue){if(typeof newValue==="string"||isElement(newValue)){this.options.ignoreFrom=newValue;return this}else if(newValue===null){delete this.options.ignoreFrom;return this}return this.options.ignoreFrom},validateSetting:function(context,option,value){var defaults=defaultOptions[context],current=this.options[context];if(defaults!==undefined&&defaults[option]!==undefined){if("objectTypes"in defaults&&defaults.objectTypes.test(option)){if(value instanceof Object){return value}else{return option in current&&current[option]instanceof Object?current[option]:defaults[option]}}if("arrayTypes"in defaults&&defaults.arrayTypes.test(option)){if(value instanceof Array){return value}else{return option in current&&current[option]instanceof Array?current[option]:defaults[option]}}if("stringTypes"in defaults&&defaults.stringTypes.test(option)){if(typeof value==="string"){return value}else{return option in current&&typeof current[option]==="string"?current[option]:defaults[option]}}if("numberTypes"in defaults&&defaults.numberTypes.test(option)){if(typeof value==="number"){return value}else{return option in current&&typeof current[option]==="number"?current[option]:defaults[option]}}if("boolTypes"in defaults&&defaults.boolTypes.test(option)){if(typeof value==="boolean"){return value}else{return option in current&&typeof current[option]==="boolean"?current[option]:defaults[option]}}if("elementTypes"in defaults&&defaults.elementTypes.test(option)){if(isElement(value)){return value}else{return option in current&&isElement(current[option])?current[option]:defaults[option]}}}return null},element:function(){return this._element},fire:function(iEvent){if(!(iEvent&&iEvent.type)||eventTypes.indexOf(iEvent.type)===-1){return this}var listeners,fireState=0,i=0,len,onEvent="on"+iEvent.type;while(fireState<3){try{switch(fireState){case fireStates.directBind:if(iEvent.type in this._iEvents){listeners=this._iEvents[iEvent.type];for(len=listeners.length;i<len&&!iEvent.immediatePropagationStopped;i++){listeners[i](iEvent)}break}break;case fireStates.onevent:if(typeof this[onEvent]==="function"){this[onEvent](iEvent)}break;case fireStates.globalBind:if(iEvent.type in globalEvents&&(listeners=globalEvents[iEvent.type])){for(len=listeners.length;i<len&&!iEvent.immediatePropagationStopped;i++){listeners[i](iEvent)}}}if(iEvent.propagationStopped){break}i=0;fireState++}catch(error){console.error("Error thrown from "+iEvent.type+" listener");console.error(error);i++;if(fireState===fireStates.onevent){fireState++}}}return this},on:function(eventType,listener,useCapture){if(eventType==="wheel"){eventType=wheelEvent}useCapture=useCapture?true:false;if(eventTypes.indexOf(eventType)!==-1){if(!(eventType in this._iEvents)){this._iEvents[eventType]=[listener]}else if(this._iEvents[eventType].indexOf(listener)===-1){this._iEvents[eventType].push(listener)}}else if(this.selector){if(!delegatedEvents[eventType]){delegatedEvents[eventType]={selectors:[],contexts:[],listeners:[]};events.addToElement(this._context,eventType,delegateListener);events.addToElement(this._context,eventType,delegateUseCapture,true)}var delegated=delegatedEvents[eventType],index;for(index=delegated.selectors.length-1;index>=0;index--){if(delegated.selectors[index]===this.selector&&delegated.contexts[index]===this._context){break}}if(index===-1){index=delegated.selectors.length;delegated.selectors.push(this.selector);delegated.contexts.push(this._context);delegated.listeners.push([])}delegated.listeners[index].push([listener,useCapture])}else{events.add(this,eventType,listener,useCapture)}return this},off:function(eventType,listener,useCapture){var eventList,index=-1;useCapture=useCapture?true:false;if(eventType==="wheel"){eventType=wheelEvent}if(eventTypes.indexOf(eventType)!==-1){eventList=this._iEvents[eventType];if(eventList&&(index=eventList.indexOf(listener))!==-1){this._iEvents[eventType].splice(index,1)}}else if(this.selector){var delegated=delegatedEvents[eventType],matchFound=false;if(!delegated){return this}for(index=delegated.selectors.length-1;index>=0;index--){if(delegated.selectors[index]===this.selector&&delegated.contexts[index]===this._context){var listeners=delegated.listeners[index];for(var i=listeners.length-1;i>=0;i--){var fn=listeners[i][0],useCap=listeners[i][1];if(fn===listener&&useCap===useCapture){listeners.splice(i,1);if(!listeners.length){delegated.selectors.splice(index,1);delegated.contexts.splice(index,1);delegated.listeners.splice(index,1);events.removeFromElement(this._context,eventType,delegateListener);events.removeFromElement(this._context,eventType,delegateUseCapture,true);if(!delegated.selectors.length){delegatedEvents[eventType]=null}}matchFound=true;break}}if(matchFound){break}}}}else{events.remove(this,listener,useCapture)}return this},set:function(options){if(!options||typeof options!=="object"){options={}}this.options=new IOptions(options);this.draggable("draggable"in options?options.draggable:this.options.draggable);this.dropzone("dropzone"in options?options.dropzone:this.options.dropzone);this.resizable("resizable"in options?options.resizable:this.options.resizable);this.gesturable("gesturable"in options?options.gesturable:this.options.gesturable);var settings=["accept","actionChecker","autoScroll","dropChecker","ignoreFrom","inertia","origin","rectChecker","restrict","snap"];for(var i=0,len=settings.length;i<len;i++){var setting=settings[i];if(setting in options){this[setting](options[setting])}}return this},unset:function(){events.remove(this,"all");if(typeof this.selector!=="string"){events.remove(this,"all");if(this.options.styleCursor){this._element.style.cursor=""}if(this._gesture){this._gesture.target=null}}else{for(var type in delegatedEvents){var delegated=delegatedEvents[type];for(var i=0;i<delegated.selectors.length;i++){if(delegated.selectors[i]===this.selector&&delegated.contexts[i]===this._context){delegated.selectors.splice(i,1);delegated.contexts.splice(i,1);delegated.listeners.splice(i,1);if(!delegated.selectors.length){delegatedEvents[type]=null}}events.removeFromElement(this._context,type,delegateListener);events.removeFromElement(this._context,type,delegateUseCapture,true);break}}}this.dropzone(false);interactables.splice(interactables.indexOf(this),1);return interact}};Interactable.prototype.gestureable=Interactable.prototype.gesturable;Interactable.prototype.resizeable=Interactable.prototype.resizable;interact.isSet=function(element,options){return interactables.indexOfElement(element,options&&options.context)!==-1};interact.on=function(type,listener,useCapture){if(eventTypes.indexOf(type)!==-1){if(!globalEvents[type]){globalEvents[type]=[listener]}else if(globalEvents[type].indexOf(listener)===-1){globalEvents[type].push(listener)}}else{events.add(docTarget,type,listener,useCapture)}return interact};interact.off=function(type,listener,useCapture){if(eventTypes.indexOf(type)===-1){events.remove(docTarget,type,listener,useCapture)}else{var index;if(type in globalEvents&&(index=globalEvents[type].indexOf(listener))!==-1){globalEvents[type].splice(index,1)}}return interact};interact.simulate=function(action,element,pointerEvent){var event={},prop,clientRect;if(action==="resize"){action="resizexy"}if(!(action in actions)){return interact}if(pointerEvent){for(prop in pointerEvent){event[prop]=pointerEvent[prop]}}else{clientRect=target._element instanceof SVGElement?element.getBoundingClientRect():clientRect=element.getClientRects()[0];if(action==="drag"){event.pageX=clientRect.left+clientRect.width/2;event.pageY=clientRect.top+clientRect.height/2}else{event.pageX=clientRect.right;event.pageY=clientRect.bottom}}event.target=event.currentTarget=element;event.preventDefault=event.stopPropagation=blank;pointerDown(event,action);return interact};interact.enableDragging=function(newValue){if(newValue!==null&&newValue!==undefined){actionIsEnabled.drag=newValue;
return interact}return actionIsEnabled.drag};interact.enableResizing=function(newValue){if(newValue!==null&&newValue!==undefined){actionIsEnabled.resize=newValue;return interact}return actionIsEnabled.resize};interact.enableGesturing=function(newValue){if(newValue!==null&&newValue!==undefined){actionIsEnabled.gesture=newValue;return interact}return actionIsEnabled.gesture};interact.eventTypes=eventTypes;interact.debug=function(){return{target:target,dragging:dragging,resizing:resizing,gesturing:gesturing,prepared:prepared,prevCoords:prevCoords,downCoords:startCoords,pointerIds:pointerIds,pointerMoves:pointerMoves,addPointer:addPointer,removePointer:removePointer,recordPointers:recordPointers,inertia:inertiaStatus,downTime:downTime,downEvent:downEvent,prevEvent:prevEvent,Interactable:Interactable,IOptions:IOptions,interactables:interactables,dropzones:dropzones,pointerIsDown:pointerIsDown,defaultOptions:defaultOptions,defaultActionChecker:defaultActionChecker,actions:actions,dragMove:dragMove,resizeMove:resizeMove,gestureMove:gestureMove,pointerUp:pointerUp,pointerDown:pointerDown,pointerMove:pointerMove,pointerHover:pointerHover,events:events,globalEvents:globalEvents,delegatedEvents:delegatedEvents}};interact.getTouchAverage=touchAverage;interact.getTouchBBox=touchBBox;interact.getTouchDistance=touchDistance;interact.getTouchAngle=touchAngle;interact.getElementRect=getElementRect;interact.margin=function(newvalue){if(typeof newvalue==="number"){margin=newvalue;return interact}return margin};interact.styleCursor=function(newValue){if(typeof newValue==="boolean"){defaultOptions.styleCursor=newValue;return interact}return defaultOptions.styleCursor};interact.autoScroll=function(options){var defaults=defaultOptions.autoScroll;if(options instanceof Object){defaultOptions.autoScrollEnabled=true;if(typeof options.margin==="number"){defaults.margin=options.margin}if(typeof options.speed==="number"){defaults.speed=options.speed}defaults.container=isElement(options.container)||options.container instanceof window.Window?options.container:defaults.container;return interact}if(typeof options==="boolean"){defaultOptions.autoScrollEnabled=options;return interact}return defaultOptions.autoScrollEnabled?defaults:false};interact.snap=function(options){var snap=defaultOptions.snap;if(options instanceof Object){defaultOptions.snapEnabled=true;if(typeof options.mode==="string"){snap.mode=options.mode}if(typeof options.endOnly==="boolean"){snap.endOnly=options.endOnly}if(typeof options.range==="number"){snap.range=options.range}if(options.actions instanceof Array){snap.actions=options.actions}if(options.anchors instanceof Array){snap.anchors=options.anchors}if(options.grid instanceof Object){snap.grid=options.grid}if(options.gridOffset instanceof Object){snap.gridOffset=options.gridOffset}return interact}if(typeof options==="boolean"){defaultOptions.snapEnabled=options;return interact}return{enabled:defaultOptions.snapEnabled,mode:snap.mode,actions:snap.actions,grid:snap.grid,gridOffset:snap.gridOffset,anchors:snap.anchors,paths:snap.paths,range:snap.range,locked:snapStatus.locked,x:snapStatus.x,y:snapStatus.y,realX:snapStatus.realX,realY:snapStatus.realY,dx:snapStatus.dx,dy:snapStatus.dy}};interact.inertia=function(options){var inertia=defaultOptions.inertia;if(options instanceof Object){defaultOptions.inertiaEnabled=true;if(typeof options.resistance==="number"){inertia.resistance=options.resistance}if(typeof options.minSpeed==="number"){inertia.minSpeed=options.minSpeed}if(typeof options.endSpeed==="number"){inertia.endSpeed=options.endSpeed}if(typeof options.zeroResumeDelta==="boolean"){inertia.zeroResumeDelta=options.zeroResumeDelta}if(options.actions instanceof Array){inertia.actions=options.actions}return interact}if(typeof options==="boolean"){defaultOptions.inertiaEnabled=options;return interact}return{enabled:defaultOptions.inertiaEnabled,resistance:inertia.resistance,minSpeed:inertia.minSpeed,endSpeed:inertia.endSpeed,actions:inertia.actions,zeroResumeDelta:inertia.zeroResumeDelta}};interact.supportsTouch=function(){return supportsTouch};interact.currentAction=function(){return dragging&&"drag"||resizing&&"resize"||gesturing&&"gesture"||null};interact.stop=function(event){if(dragging||resizing||gesturing){autoScroll.stop();matches=[];if(target.options.styleCursor){document.documentElement.style.cursor=""}if(target._gesture){target._gesture.stop()}clearTargets();for(var i=0;i<selectorDZs.length;i++){selectorDZs._elements=[]}if(event&&typeof event.preventDefault==="function"){event.preventDefault()}}if(pointerIds&&pointerIds.length){pointerIds.splice(0);pointerMoves.splice(0)}pointerIsDown=snapStatus.locked=dragging=resizing=gesturing=false;prepared=prevEvent=null;return interact};interact.dynamicDrop=function(newValue){if(typeof newValue==="boolean"){if(dragging&&dynamicDrop!==newValue&&!newValue){calcRects(dropzones)}dynamicDrop=newValue;return interact}return dynamicDrop};interact.deltaSource=function(newValue){if(newValue==="page"||newValue==="client"){defaultOptions.deltaSource=newValue;return this}return defaultOptions.deltaSource};interact.restrict=function(newValue){var defaults=defaultOptions.restrict;if(newValue===undefined){return defaultOptions.restrict}if(newValue instanceof Object){if(newValue.drag instanceof Object||/^parent$|^self$/.test(newValue.drag)){defaults.drag=newValue.drag}if(newValue.resize instanceof Object||/^parent$|^self$/.test(newValue.resize)){defaults.resize=newValue.resize}if(newValue.gesture instanceof Object||/^parent$|^self$/.test(newValue.gesture)){defaults.gesture=newValue.gesture}if(typeof newValue.endOnly==="boolean"){defaults.endOnly=newValue.endOnly}}else if(newValue===null){defaults.drag=defaults.resize=defaults.gesture=null;defaults.endOnly=false}return this};if(PointerEvent){events.add(docTarget,"pointerup",collectTaps);events.add(docTarget,"pointerdown",selectorDown);events.add(docTarget,"MSGestureChange",pointerMove);events.add(docTarget,"MSGestureEnd",pointerUp);events.add(docTarget,"MSInertiaStart",pointerUp);events.add(docTarget,"pointerover",pointerOver);events.add(docTarget,"pointerout",pointerOut);events.add(docTarget,"pointermove",recordPointers);events.add(docTarget,"pointerup",recordPointers);events.add(docTarget,"pointercancel",recordPointers);events.add(docTarget,"pointerup",function(){if(!(dragging||resizing||gesturing)){pointerIsDown=false}});selectorGesture=new Gesture;selectorGesture.target=document.documentElement}else{events.add(docTarget,"mouseup",collectTaps);events.add(docTarget,"touchend",collectTaps);events.add(docTarget,"mousedown",selectorDown);events.add(docTarget,"mousemove",pointerMove);events.add(docTarget,"mouseup",pointerUp);events.add(docTarget,"mouseover",pointerOver);events.add(docTarget,"mouseout",pointerOut);events.add(docTarget,"touchstart",selectorDown);events.add(docTarget,"touchmove",pointerMove);events.add(docTarget,"touchend",pointerUp);events.add(docTarget,"touchcancel",pointerUp)}events.add(windowTarget,"blur",pointerUp);try{if(window.frameElement){parentDocTarget._element=window.frameElement.ownerDocument;events.add(parentDocTarget,"mouseup",pointerUp);events.add(parentDocTarget,"touchend",pointerUp);events.add(parentDocTarget,"touchcancel",pointerUp);events.add(parentDocTarget,"pointerup",pointerUp);events.add(parentWindowTarget,"blur",pointerUp)}}catch(error){interact.windowParentError=error}events.add(docTarget,"selectstart",function(e){if(dragging||resizing||gesturing){e.preventDefault()}});if(!(matchesSelector in Element.prototype)||typeof Element.prototype[matchesSelector]!=="function"){Element.prototype[matchesSelector]=IE8MatchesSelector=function(selector,elems){elems=elems||this.parentNode.querySelectorAll(selector);var count=elems.length;for(var i=0;i<count;i++){if(elems[i]===this){return true}}return false}}(function(){var lastTime=0,vendors=["ms","moz","webkit","o"];for(var x=0;x<vendors.length&&!window.requestAnimationFrame;++x){reqFrame=window[vendors[x]+"RequestAnimationFrame"];cancelFrame=window[vendors[x]+"CancelAnimationFrame"]||window[vendors[x]+"CancelRequestAnimationFrame"]}if(!reqFrame){reqFrame=function(callback){var currTime=(new Date).getTime(),timeToCall=Math.max(0,16-(currTime-lastTime)),id=window.setTimeout(function(){callback(currTime+timeToCall)},timeToCall);lastTime=currTime+timeToCall;return id}}if(!cancelFrame){cancelFrame=function(id){clearTimeout(id)}}})();window.interact=interact})();(function(definition){if(typeof exports==="object"){module.exports=definition()}else if(typeof define==="function"&&define.amd){define(definition)}else{chessground=definition()}})(function(){return function(){var h;function q(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";else if("function"==b&&"undefined"==typeof a.call)return"object";return b}var aa="closure_uid_"+(1e9*Math.random()>>>0),ba=0;function ca(a,b){for(var c in a)b.call(void 0,a[c],c,a)}function da(a,b){null!=a&&this.append.apply(this,arguments)}da.prototype.Fa="";da.prototype.set=function(a){this.Fa=""+a};da.prototype.append=function(a,b,c){this.Fa+=a;if(null!=b)for(var d=1;d<arguments.length;d++)this.Fa+=arguments[d];return this};da.prototype.toString=function(){return this.Fa};var ea=null;function fa(){return new r(null,5,[ga,!0,ha,!0,ia,!1,ja,!1,ka,null],null)}function u(a){return null!=a&&!1!==a}function la(a){return u(a)?!1:!0}function v(a,b){return a[q(null==b?null:b)]?!0:a._?!0:w?!1:null}function ma(a){return null==a?null:a.constructor}function z(a,b){var c=ma(b),c=u(u(c)?c.Xa:c)?c.Wa:q(b);return Error(["No protocol method ",a," defined for type ",c,": ",b].join(""))}function oa(a){var b=a.Wa;return u(b)?b:""+A.a(a)}function pa(a){for(var b=a.length,c=Array(b),d=0;;)if(d<b)c[d]=a[d],d+=1;else break;return c}function qa(a){return Array.prototype.slice.call(arguments)}var ra={},sa={};function ua(a){if(a?a.I:a)return a.I(a);var b;b=ua[q(null==a?null:a)];if(!b&&(b=ua._,!b))throw z("ICounted.-count",a);return b.call(null,a)}function va(a){if(a?a.M:a)return a.M(a);var b;b=va[q(null==a?null:a)];if(!b&&(b=va._,!b))throw z("IEmptyableCollection.-empty",a);return b.call(null,a)}var wa={};function xa(a,b){if(a?a.H:a)return a.H(a,b);var c;c=xa[q(null==a?null:a)];if(!c&&(c=xa._,!c))throw z("ICollection.-conj",a);return c.call(null,a,b)}var ya={},B=function(){function a(a,b,c){if(a?a.$:a)return a.$(a,b,c);var g;g=B[q(null==a?null:a)];if(!g&&(g=B._,!g))throw z("IIndexed.-nth",a);return g.call(null,a,b,c)}function b(a,b){if(a?a.t:a)return a.t(a,b);var c;c=B[q(null==a?null:a)];if(!c&&(c=B._,!c))throw z("IIndexed.-nth",a);return c.call(null,a,b)}var c=null,c=function(d,c,f){switch(arguments.length){case 2:return b.call(this,d,c);case 3:return a.call(this,d,c,f)}throw Error("Invalid arity: "+arguments.length)};c.b=b;c.c=a;return c}(),za={};function D(a){if(a?a.T:a)return a.T(a);var b;b=D[q(null==a?null:a)];if(!b&&(b=D._,!b))throw z("ISeq.-first",a);return b.call(null,a)}function Aa(a){if(a?a.V:a)return a.V(a);var b;b=Aa[q(null==a?null:a)];if(!b&&(b=Aa._,!b))throw z("ISeq.-rest",a);return b.call(null,a)}var Ba={},Ca={},Da=function(){function a(a,b,c){if(a?a.K:a)return a.K(a,b,c);var g;g=Da[q(null==a?null:a)];if(!g&&(g=Da._,!g))throw z("ILookup.-lookup",a);return g.call(null,a,b,c)}function b(a,b){if(a?a.J:a)return a.J(a,b);var c;c=Da[q(null==a?null:a)];if(!c&&(c=Da._,!c))throw z("ILookup.-lookup",a);return c.call(null,a,b)}var c=null,c=function(c,e,f){switch(arguments.length){case 2:return b.call(this,c,e);case 3:return a.call(this,c,e,f)}throw Error("Invalid arity: "+arguments.length)};c.b=b;c.c=a;return c}();function Ea(a,b){if(a?a.$a:a)return a.$a(a,b);var c;c=Ea[q(null==a?null:a)];if(!c&&(c=Ea._,!c))throw z("IAssociative.-contains-key?",a);return c.call(null,a,b)}function Fa(a,b,c){if(a?a.Ka:a)return a.Ka(a,b,c);var d;d=Fa[q(null==a?null:a)];if(!d&&(d=Fa._,!d))throw z("IAssociative.-assoc",a);return d.call(null,a,b,c)}var Ga={};function Ha(a,b){if(a?a.fb:a)return a.fb(a,b);var c;c=Ha[q(null==a?null:a)];if(!c&&(c=Ha._,!c))throw z("IMap.-dissoc",a);return c.call(null,a,b)}var Ia={};function Ja(a){if(a?a.gb:a)return a.gb();var b;b=Ja[q(null==a?null:a)];if(!b&&(b=Ja._,!b))throw z("IMapEntry.-key",a);return b.call(null,a)}function Ka(a){if(a?a.qb:a)return a.qb();var b;b=Ka[q(null==a?null:a)];if(!b&&(b=Ka._,!b))throw z("IMapEntry.-val",a);return b.call(null,a)}var La={},Ma={};function Na(a,b,c){if(a?a.hb:a)return a.hb(a,b,c);var d;d=Na[q(null==a?null:a)];if(!d&&(d=Na._,!d))throw z("IVector.-assoc-n",a);return d.call(null,a,b,c)}function Oa(a){if(a?a.eb:a)return a.eb(a);var b;b=Oa[q(null==a?null:a)];if(!b&&(b=Oa._,!b))throw z("IDeref.-deref",a);return b.call(null,a)}var Pa={};function Qa(a){if(a?a.D:a)return a.D(a);var b;b=Qa[q(null==a?null:a)];if(!b&&(b=Qa._,!b))throw z("IMeta.-meta",a);return b.call(null,a)}var Ra={};function Sa(a,b){if(a?a.F:a)return a.F(a,b);var c;c=Sa[q(null==a?null:a)];if(!c&&(c=Sa._,!c))throw z("IWithMeta.-with-meta",a);return c.call(null,a,b)}var Ta={},Ua=function(){function a(a,b,c){if(a?a.Q:a)return a.Q(a,b,c);var g;g=Ua[q(null==a?null:a)];if(!g&&(g=Ua._,!g))throw z("IReduce.-reduce",a);return g.call(null,a,b,c)}function b(a,b){if(a?a.P:a)return a.P(a,b);var c;c=Ua[q(null==a?null:a)];if(!c&&(c=Ua._,!c))throw z("IReduce.-reduce",a);return c.call(null,a,b)}var c=null,c=function(c,e,f){switch(arguments.length){case 2:return b.call(this,c,e);case 3:return a.call(this,c,e,f)}throw Error("Invalid arity: "+arguments.length)};c.b=b;c.c=a;return c}();function Va(a,b){if(a?a.B:a)return a.B(a,b);var c;c=Va[q(null==a?null:a)];if(!c&&(c=Va._,!c))throw z("IEquiv.-equiv",a);return c.call(null,a,b)}function Wa(a){if(a?a.C:a)return a.C(a);var b;b=Wa[q(null==a?null:a)];if(!b&&(b=Wa._,!b))throw z("IHash.-hash",a);return b.call(null,a)}var Xa={};function Ya(a){if(a?a.G:a)return a.G(a);var b;b=Ya[q(null==a?null:a)];if(!b&&(b=Ya._,!b))throw z("ISeqable.-seq",a);return b.call(null,a)}var Za={};function E(a,b){if(a?a.ub:a)return a.ub(0,b);var c;c=E[q(null==a?null:a)];if(!c&&(c=E._,!c))throw z("IWriter.-write",a);return c.call(null,a,b)}var $a={};function ab(a,b,c){if(a?a.w:a)return a.w(a,b,c);var d;d=ab[q(null==a?null:a)];if(!d&&(d=ab._,!d))throw z("IPrintWithWriter.-pr-writer",a);return d.call(null,a,b,c)}function bb(a,b,c){if(a?a.tb:a)return a.tb(0,b,c);var d;d=bb[q(null==a?null:a)];if(!d&&(d=bb._,!d))throw z("IWatchable.-notify-watches",a);return d.call(null,a,b,c)}function cb(a){if(a?a.La:a)return a.La(a);var b;b=cb[q(null==a?null:a)];if(!b&&(b=cb._,!b))throw z("IEditableCollection.-as-transient",a);return b.call(null,a)}function db(a,b){if(a?a.Oa:a)return a.Oa(a,b);var c;c=db[q(null==a?null:a)];if(!c&&(c=db._,!c))throw z("ITransientCollection.-conj!",a);return c.call(null,a,b)}function eb(a){if(a?a.Pa:a)return a.Pa(a);var b;b=eb[q(null==a?null:a)];if(!b&&(b=eb._,!b))throw z("ITransientCollection.-persistent!",a);return b.call(null,a)}function fb(a,b,c){if(a?a.Na:a)return a.Na(a,b,c);var d;d=fb[q(null==a?null:a)];if(!d&&(d=fb._,!d))throw z("ITransientAssociative.-assoc!",a);return d.call(null,a,b,c)}function hb(a,b,c){if(a?a.sb:a)return a.sb(0,b,c);var d;d=hb[q(null==a?null:a)];if(!d&&(d=hb._,!d))throw z("ITransientVector.-assoc-n!",a);return d.call(null,a,b,c)}function ib(a){if(a?a.nb:a)return a.nb();var b;b=ib[q(null==a?null:a)];if(!b&&(b=ib._,!b))throw z("IChunk.-drop-first",a);return b.call(null,a)}function F(a){if(a?a.bb:a)return a.bb(a);var b;b=F[q(null==a?null:a)];if(!b&&(b=F._,!b))throw z("IChunkedSeq.-chunked-first",a);return b.call(null,a)}function H(a){if(a?a.cb:a)return a.cb(a);var b;b=H[q(null==a?null:a)];if(!b&&(b=H._,!b))throw z("IChunkedSeq.-chunked-rest",a);return b.call(null,a)}function jb(a){if(a?a.ab:a)return a.ab(a);var b;b=jb[q(null==a?null:a)];if(!b&&(b=jb._,!b))throw z("IChunkedNext.-chunked-next",a);return b.call(null,a)}function kb(a){this.Vb=a;this.p=0;this.g=1073741824}kb.prototype.ub=function(a,b){return this.Vb.append(b)};function lb(a){var b=new da;a.w(null,new kb(b),fa());return""+A.a(b)}var mb="undefined"!==typeof Math.imul&&0!==(Math.imul.b?Math.imul.b(4294967295,5):Math.imul.call(null,4294967295,5))?function(a,b){return Math.imul(a,b)}:function(a,b){var c=a&65535,d=b&65535;return c*d+((a>>>16&65535)*d+c*(b>>>16&65535)<<16>>>0)|0};function nb(a){a=mb(a,3432918353);return mb(a<<15|a>>>-15,461845907)}function ob(a,b){var c=a^b;return mb(c<<13|c>>>-13,5)+3864292196}function pb(a,b){var c=a^b,c=mb(c^c>>>16,2246822507),c=mb(c^c>>>13,3266489909);return c^c>>>16}function qb(a){var b;a:{b=1;for(var c=0;;)if(b<a.length){var d=b+2,c=ob(c,nb(a.charCodeAt(b-1)|a.charCodeAt(b)<<16));b=d}else{b=c;break a}b=void 0}b=1===(a.length&1)?b^nb(a.charCodeAt(a.length-1)):b;return pb(b,mb(2,a.length))}var rb={},sb=0;function tb(a){255<sb&&(rb={},sb=0);var b=rb[a];if("number"!==typeof b){a:if(null!=a)if(b=a.length,0<b){for(var c=0,d=0;;)if(c<b)var e=c+1,d=mb(31,d)+a.charCodeAt(c),c=e;else{b=d;break a}b=void 0}else b=0;else b=0;rb[a]=b;sb+=1}return a=b}function ub(a){a&&(a.g&4194304||a.ac)?a=a.C(null):"number"===typeof a?a=Math.floor(a)%2147483647:!0===a?a=1:!1===a?a=0:"string"===typeof a?(a=tb(a),0!==a&&(a=nb(a),a=ob(0,a),a=pb(a,4))):a=null==a?0:w?Wa(a):null;return a}function vb(a,b){return a^b+2654435769+(a<<6)+(a>>2)}function wb(a,b){if(u(I.b?I.b(a,b):I.call(null,a,b)))return 0;var c=la(a.Z);if(u(c?b.Z:c))return-1;if(u(a.Z)){if(la(b.Z))return 1;c=xb.b?xb.b(a.Z,b.Z):xb.call(null,a.Z,b.Z);return 0===c?xb.b?xb.b(a.name,b.name):xb.call(null,a.name,b.name):c}return yb?xb.b?xb.b(a.name,b.name):xb.call(null,a.name,b.name):null}function J(a,b,c,d,e){this.Z=a;this.name=b;this.Ca=c;this.Ea=d;this.ba=e;this.g=2154168321;this.p=4096}h=J.prototype;h.w=function(a,b){return E(b,this.Ca)};h.C=function(){var a=this.Ea;return null!=a?a:this.Ea=a=vb(qb(this.name),tb(this.Z))};h.F=function(a,b){return new J(this.Z,this.name,this.Ca,this.Ea,b)};h.D=function(){return this.ba};h.call=function(){var a=null;return a=function(a,c,d){switch(arguments.length){case 2:return Da.c(c,this,null);case 3:return Da.c(c,this,d)}throw Error("Invalid arity: "+arguments.length)}}();h.apply=function(a,b){return this.call.apply(this,[this].concat(pa(b)))};h.a=function(a){return Da.c(a,this,null)};h.b=function(a,b){return Da.c(a,this,b)};h.B=function(a,b){return b instanceof J?this.Ca===b.Ca:!1};h.toString=function(){return this.Ca};function K(a){if(null==a)return null;if(a&&(a.g&8388608||a.Kb))return a.G(null);if(a instanceof Array||"string"===typeof a)return 0===a.length?null:new zb(a,0);if(v(Xa,a))return Ya(a);if(w)throw Error(""+A.a(a)+" is not ISeqable");return null}function L(a){if(null==a)return null;if(a&&(a.g&64||a.Ma))return a.T(null);a=K(a);return null==a?null:D(a)}function N(a){return null!=a?a&&(a.g&64||a.Ma)?a.V(null):(a=K(a))?Aa(a):O:O}function P(a){return null==a?null:a&&(a.g&128||a.rb)?a.W(null):K(N(a))}var I=function(){function a(a,b){return null==a?null==b:a===b||Va(a,b)}var b=null,c=function(){function a(b,d,k){var l=null;2<arguments.length&&(l=Q(Array.prototype.slice.call(arguments,2),0));return c.call(this,b,d,l)}function c(a,d,e){for(;;)if(b.b(a,d))if(P(e))a=d,d=L(e),e=P(e);else return b.b(d,L(e));else return!1}a.o=2;a.j=function(a){var b=L(a);a=P(a);var d=L(a);a=N(a);return c(b,d,a)};a.f=c;return a}(),b=function(b,e,f){switch(arguments.length){case 1:return!0;case 2:return a.call(this,b,e);default:return c.f(b,e,Q(arguments,2))}throw Error("Invalid arity: "+arguments.length)};b.o=2;b.j=c.j;b.a=function(){return!0};b.b=a;b.f=c.f;return b}();function Ab(a,b){var c=nb(a),c=ob(0,c);return pb(c,b)}function Bb(a){var b=0,c=1;for(a=K(a);;)if(null!=a)b+=1,c=mb(31,c)+ub(L(a))|0,a=P(a);else return Ab(c,b)}function Cb(a){var b=0,c=0;for(a=K(a);;)if(null!=a)b+=1,c=c+ub(L(a))|0,a=P(a);else return Ab(c,b)}sa["null"]=!0;ua["null"]=function(){return 0};Date.prototype.B=function(a,b){return b instanceof Date&&this.toString()===b.toString()};Va.number=function(a,b){return a===b};Pa["function"]=!0;Qa["function"]=function(){return null};ra["function"]=!0;Wa._=function(a){return a[aa]||(a[aa]=++ba)};function Db(a){return a+1}var Eb=function(){function a(a,b,c,d){for(var l=ua(a);;)if(d<l)c=b.b?b.b(c,B.b(a,d)):b.call(null,c,B.b(a,d)),d+=1;else return c}function b(a,b,c){for(var d=ua(a),l=0;;)if(l<d)c=b.b?b.b(c,B.b(a,l)):b.call(null,c,B.b(a,l)),l+=1;else return c}function c(a,b){var c=ua(a);if(0===c)return b.n?b.n():b.call(null);for(var d=B.b(a,0),l=1;;)if(l<c)d=b.b?b.b(d,B.b(a,l)):b.call(null,d,B.b(a,l)),l+=1;else return d}var d=null,d=function(d,f,g,k){switch(arguments.length){case 2:return c.call(this,d,f);case 3:return b.call(this,d,f,g);case 4:return a.call(this,d,f,g,k)}throw Error("Invalid arity: "+arguments.length)};d.b=c;d.c=b;d.l=a;return d}(),Fb=function(){function a(a,b,c,d){for(var l=a.length;;)if(d<l)c=b.b?b.b(c,a[d]):b.call(null,c,a[d]),d+=1;else return c}function b(a,b,c){for(var d=a.length,l=0;;)if(l<d)c=b.b?b.b(c,a[l]):b.call(null,c,a[l]),l+=1;else return c}function c(a,b){var c=a.length;if(0===a.length)return b.n?b.n():b.call(null);for(var d=a[0],l=1;;)if(l<c)d=b.b?b.b(d,a[l]):b.call(null,d,a[l]),l+=1;else return d}var d=null,d=function(d,f,g,k){switch(arguments.length){case 2:return c.call(this,d,f);case 3:return b.call(this,d,f,g);case 4:return a.call(this,d,f,g,k)}throw Error("Invalid arity: "+arguments.length)};d.b=c;d.c=b;d.l=a;return d}();function Gb(a){return a?a.g&2||a.Ab?!0:a.g?!1:v(sa,a):v(sa,a)}function Hb(a){return a?a.g&16||a.ob?!0:a.g?!1:v(ya,a):v(ya,a)}function zb(a,b){this.d=a;this.i=b;this.g=166199550;this.p=8192}h=zb.prototype;h.toString=function(){return lb(this)};h.t=function(a,b){var c=b+this.i;return c<this.d.length?this.d[c]:null};h.$=function(a,b,c){a=b+this.i;return a<this.d.length?this.d[a]:c};h.W=function(){return this.i+1<this.d.length?new zb(this.d,this.i+1):null};h.I=function(){return this.d.length-this.i};h.C=function(){return Bb(this)};h.B=function(a,b){return Ib.b?Ib.b(this,b):Ib.call(null,this,b)};h.M=function(){return O};h.P=function(a,b){return Fb.l(this.d,b,this.d[this.i],this.i+1)};h.Q=function(a,b,c){return Fb.l(this.d,b,c,this.i)};h.T=function(){return this.d[this.i]};h.V=function(){return this.i+1<this.d.length?new zb(this.d,this.i+1):O};h.G=function(){return this};h.H=function(a,b){return S.b?S.b(b,this):S.call(null,b,this)};var Jb=function(){function a(a,b){return b<a.length?new zb(a,b):null}function b(a){return c.b(a,0)}var c=null,c=function(c,e){switch(arguments.length){case 1:return b.call(this,c);case 2:return a.call(this,c,e)}throw Error("Invalid arity: "+arguments.length)};c.a=b;c.b=a;return c}(),Q=function(){function a(a,b){return Jb.b(a,b)}function b(a){return Jb.b(a,0)}var c=null,c=function(c,e){switch(arguments.length){case 1:return b.call(this,c);case 2:return a.call(this,c,e)}throw Error("Invalid arity: "+arguments.length)};c.a=b;c.b=a;return c}();Va._=function(a,b){return a===b};var Kb=function(){function a(a,b){return null!=a?xa(a,b):xa(O,b)}var b=null,c=function(){function a(b,d,k){var l=null;2<arguments.length&&(l=Q(Array.prototype.slice.call(arguments,2),0));return c.call(this,b,d,l)}function c(a,d,e){for(;;)if(u(e))a=b.b(a,d),d=L(e),e=P(e);else return b.b(a,d)}a.o=2;a.j=function(a){var b=L(a);a=P(a);var d=L(a);a=N(a);return c(b,d,a)};a.f=c;return a}(),b=function(b,e,f){switch(arguments.length){case 2:return a.call(this,b,e);default:return c.f(b,e,Q(arguments,2))}throw Error("Invalid arity: "+arguments.length)};b.o=2;b.j=c.j;b.b=a;b.f=c.f;return b}();function T(a){if(null!=a)if(a&&(a.g&2||a.Ab))a=a.I(null);else if(a instanceof Array)a=a.length;else if("string"===typeof a)a=a.length;else if(v(sa,a))a=ua(a);else if(w)a:{a=K(a);for(var b=0;;){if(Gb(a)){a=b+ua(a);break a}a=P(a);b+=1}a=void 0}else a=null;else a=0;return a}var Lb=function(){function a(a,b,c){for(;;){if(null==a)return c;if(0===b)return K(a)?L(a):c;if(Hb(a))return B.c(a,b,c);if(K(a))a=P(a),b-=1;else return w?c:null}}function b(a,b){for(;;){if(null==a)throw Error("Index out of bounds");if(0===b){if(K(a))return L(a);throw Error("Index out of bounds")}if(Hb(a))return B.b(a,b);if(K(a)){var c=P(a),g=b-1;a=c;b=g}else{if(w)throw Error("Index out of bounds");return null}}}var c=null,c=function(c,e,f){switch(arguments.length){case 2:return b.call(this,c,e);case 3:return a.call(this,c,e,f)}throw Error("Invalid arity: "+arguments.length)};c.b=b;c.c=a;return c}(),U=function(){function a(a,b,c){if("number"!==typeof b)throw Error("index argument to nth must be a number.");if(null==a)return c;if(a&&(a.g&16||a.ob))return a.$(null,b,c);if(a instanceof Array||"string"===typeof a)return b<a.length?a[b]:c;if(v(ya,a))return B.b(a,b);if(a?a.g&64||a.Ma||(a.g?0:v(za,a)):v(za,a))return Lb.c(a,b,c);if(w)throw Error("nth not supported on this type "+A.a(oa(ma(a))));return null}function b(a,b){if("number"!==typeof b)throw Error("index argument to nth must be a number");if(null==a)return a;if(a&&(a.g&16||a.ob))return a.t(null,b);if(a instanceof Array||"string"===typeof a)return b<a.length?a[b]:null;if(v(ya,a))return B.b(a,b);if(a?a.g&64||a.Ma||(a.g?0:v(za,a)):v(za,a))return Lb.b(a,b);if(w)throw Error("nth not supported on this type "+A.a(oa(ma(a))));return null}var c=null,c=function(c,e,f){switch(arguments.length){case 2:return b.call(this,c,e);case 3:return a.call(this,c,e,f)}throw Error("Invalid arity: "+arguments.length)};c.b=b;c.c=a;return c}(),V=function(){function a(a,b,c){return null!=a?a&&(a.g&256||a.pb)?a.K(null,b,c):a instanceof Array?b<a.length?a[b]:c:"string"===typeof a?b<a.length?a[b]:c:v(Ca,a)?Da.c(a,b,c):w?c:null:c}function b(a,b){return null==a?null:a&&(a.g&256||a.pb)?a.J(null,b):a instanceof Array?b<a.length?a[b]:null:"string"===typeof a?b<a.length?a[b]:null:v(Ca,a)?Da.b(a,b):null}var c=null,c=function(c,e,f){switch(arguments.length){case 2:return b.call(this,c,e);case 3:return a.call(this,c,e,f)}throw Error("Invalid arity: "+arguments.length)};c.b=b;c.c=a;return c}(),W=function(){function a(a,b,c){return null!=a?Fa(a,b,c):Mb.b?Mb.b([b],[c]):Mb.call(null,[b],[c])}var b=null,c=function(){function a(b,d,k,l){var m=null;3<arguments.length&&(m=Q(Array.prototype.slice.call(arguments,3),0));return c.call(this,b,d,k,m)}function c(a,d,e,l){for(;;)if(a=b.c(a,d,e),u(l))d=L(l),e=L(P(l)),l=P(P(l));else return a}a.o=3;a.j=function(a){var b=L(a);a=P(a);var d=L(a);a=P(a);var l=L(a);a=N(a);return c(b,d,l,a)};a.f=c;return a}(),b=function(b,e,f,g){switch(arguments.length){case 3:return a.call(this,b,e,f);default:return c.f(b,e,f,Q(arguments,3))}throw Error("Invalid arity: "+arguments.length)};b.o=3;b.j=c.j;b.c=a;b.f=c.f;return b}(),Nb=function(){function a(a,b){return null==a?null:Ha(a,b)}var b=null,c=function(){function a(b,d,k){var l=null;2<arguments.length&&(l=Q(Array.prototype.slice.call(arguments,2),0));return c.call(this,b,d,l)}function c(a,d,e){for(;;){if(null==a)return null;a=b.b(a,d);if(u(e))d=L(e),e=P(e);else return a}}a.o=2;a.j=function(a){var b=L(a);a=P(a);var d=L(a);a=N(a);return c(b,d,a)};a.f=c;return a}(),b=function(b,e,f){switch(arguments.length){case 1:return b;case 2:return a.call(this,b,e);default:return c.f(b,e,Q(arguments,2))}throw Error("Invalid arity: "+arguments.length)};b.o=2;b.j=c.j;b.a=function(a){return a};b.b=a;b.f=c.f;return b}();function Ob(a){var b="function"==q(a);return b?b:a?u(u(null)?null:a.zb)?!0:a.kb?!1:v(ra,a):v(ra,a)}function Pb(a,b){this.e=a;this.k=b;this.p=0;this.g=393217}h=Pb.prototype;h.call=function(){var a=null;return a=function(a,c,d,e,f,g,k,l,m,n,p,t,y,x,C,G,M,R,Y,ta,na,gb){switch(arguments.length){case 1:var s=a,s=this;return s.e.n?s.e.n():s.e.call(null);case 2:return s=a,s=this,s.e.a?s.e.a(c):s.e.call(null,c);case 3:return s=a,s=this,s.e.b?s.e.b(c,d):s.e.call(null,c,d);case 4:return s=a,s=this,s.e.c?s.e.c(c,d,e):s.e.call(null,c,d,e);case 5:return s=a,s=this,s.e.l?s.e.l(c,d,e,f):s.e.call(null,c,d,e,f);case 6:return s=a,s=this,s.e.u?s.e.u(c,d,e,f,g):s.e.call(null,c,d,e,f,g);case 7:return s=a,s=this,s.e.S?s.e.S(c,d,e,f,g,k):s.e.call(null,c,d,e,f,g,k);case 8:return s=a,s=this,s.e.ca?s.e.ca(c,d,e,f,g,k,l):s.e.call(null,c,d,e,f,g,k,l);case 9:return s=a,s=this,s.e.xa?s.e.xa(c,d,e,f,g,k,l,m):s.e.call(null,c,d,e,f,g,k,l,m);case 10:return s=a,s=this,s.e.ya?s.e.ya(c,d,e,f,g,k,l,m,n):s.e.call(null,c,d,e,f,g,k,l,m,n);case 11:return s=a,s=this,s.e.ma?s.e.ma(c,d,e,f,g,k,l,m,n,p):s.e.call(null,c,d,e,f,g,k,l,m,n,p);case 12:return s=a,s=this,s.e.na?s.e.na(c,d,e,f,g,k,l,m,n,p,t):s.e.call(null,c,d,e,f,g,k,l,m,n,p,t);case 13:return s=a,s=this,s.e.oa?s.e.oa(c,d,e,f,g,k,l,m,n,p,t,y):s.e.call(null,c,d,e,f,g,k,l,m,n,p,t,y);case 14:return s=a,s=this,s.e.pa?s.e.pa(c,d,e,f,g,k,l,m,n,p,t,y,x):s.e.call(null,c,d,e,f,g,k,l,m,n,p,t,y,x);case 15:return s=a,s=this,s.e.qa?s.e.qa(c,d,e,f,g,k,l,m,n,p,t,y,x,C):s.e.call(null,c,d,e,f,g,k,l,m,n,p,t,y,x,C);case 16:return s=a,s=this,s.e.ra?s.e.ra(c,d,e,f,g,k,l,m,n,p,t,y,x,C,G):s.e.call(null,c,d,e,f,g,k,l,m,n,p,t,y,x,C,G);case 17:return s=a,s=this,s.e.sa?s.e.sa(c,d,e,f,g,k,l,m,n,p,t,y,x,C,G,M):s.e.call(null,c,d,e,f,g,k,l,m,n,p,t,y,x,C,G,M);case 18:return s=a,s=this,s.e.ta?s.e.ta(c,d,e,f,g,k,l,m,n,p,t,y,x,C,G,M,R):s.e.call(null,c,d,e,f,g,k,l,m,n,p,t,y,x,C,G,M,R);case 19:return s=a,s=this,s.e.ua?s.e.ua(c,d,e,f,g,k,l,m,n,p,t,y,x,C,G,M,R,Y):s.e.call(null,c,d,e,f,g,k,l,m,n,p,t,y,x,C,G,M,R,Y);case 20:return s=a,s=this,s.e.va?s.e.va(c,d,e,f,g,k,l,m,n,p,t,y,x,C,G,M,R,Y,ta):s.e.call(null,c,d,e,f,g,k,l,m,n,p,t,y,x,C,G,M,R,Y,ta);case 21:return s=a,s=this,s.e.wa?s.e.wa(c,d,e,f,g,k,l,m,n,p,t,y,x,C,G,M,R,Y,ta,na):s.e.call(null,c,d,e,f,g,k,l,m,n,p,t,y,x,C,G,M,R,Y,ta,na);case 22:return s=a,s=this,Qb.Eb?Qb.Eb(s.e,c,d,e,f,g,k,l,m,n,p,t,y,x,C,G,M,R,Y,ta,na,gb):Qb.call(null,s.e,c,d,e,f,g,k,l,m,n,p,t,y,x,C,G,M,R,Y,ta,na,gb)}throw Error("Invalid arity: "+arguments.length)}}();h.apply=function(a,b){return this.call.apply(this,[this].concat(pa(b)))};h.n=function(){return this.e.n?this.e.n():this.e.call(null)};h.a=function(a){return this.e.a?this.e.a(a):this.e.call(null,a)};h.b=function(a,b){return this.e.b?this.e.b(a,b):this.e.call(null,a,b)};h.c=function(a,b,c){return this.e.c?this.e.c(a,b,c):this.e.call(null,a,b,c)};h.l=function(a,b,c,d){return this.e.l?this.e.l(a,b,c,d):this.e.call(null,a,b,c,d)};h.u=function(a,b,c,d,e){return this.e.u?this.e.u(a,b,c,d,e):this.e.call(null,a,b,c,d,e)};h.S=function(a,b,c,d,e,f){return this.e.S?this.e.S(a,b,c,d,e,f):this.e.call(null,a,b,c,d,e,f)};h.ca=function(a,b,c,d,e,f,g){return this.e.ca?this.e.ca(a,b,c,d,e,f,g):this.e.call(null,a,b,c,d,e,f,g)};h.xa=function(a,b,c,d,e,f,g,k){return this.e.xa?this.e.xa(a,b,c,d,e,f,g,k):this.e.call(null,a,b,c,d,e,f,g,k)};h.ya=function(a,b,c,d,e,f,g,k,l){return this.e.ya?this.e.ya(a,b,c,d,e,f,g,k,l):this.e.call(null,a,b,c,d,e,f,g,k,l)};h.ma=function(a,b,c,d,e,f,g,k,l,m){return this.e.ma?this.e.ma(a,b,c,d,e,f,g,k,l,m):this.e.call(null,a,b,c,d,e,f,g,k,l,m)};h.na=function(a,b,c,d,e,f,g,k,l,m,n){return this.e.na?this.e.na(a,b,c,d,e,f,g,k,l,m,n):this.e.call(null,a,b,c,d,e,f,g,k,l,m,n)};h.oa=function(a,b,c,d,e,f,g,k,l,m,n,p){return this.e.oa?this.e.oa(a,b,c,d,e,f,g,k,l,m,n,p):this.e.call(null,a,b,c,d,e,f,g,k,l,m,n,p)};h.pa=function(a,b,c,d,e,f,g,k,l,m,n,p,t){return this.e.pa?this.e.pa(a,b,c,d,e,f,g,k,l,m,n,p,t):this.e.call(null,a,b,c,d,e,f,g,k,l,m,n,p,t)};h.qa=function(a,b,c,d,e,f,g,k,l,m,n,p,t,y){return this.e.qa?this.e.qa(a,b,c,d,e,f,g,k,l,m,n,p,t,y):this.e.call(null,a,b,c,d,e,f,g,k,l,m,n,p,t,y)};h.ra=function(a,b,c,d,e,f,g,k,l,m,n,p,t,y,x){return this.e.ra?this.e.ra(a,b,c,d,e,f,g,k,l,m,n,p,t,y,x):this.e.call(null,a,b,c,d,e,f,g,k,l,m,n,p,t,y,x)};h.sa=function(a,b,c,d,e,f,g,k,l,m,n,p,t,y,x,C){return this.e.sa?this.e.sa(a,b,c,d,e,f,g,k,l,m,n,p,t,y,x,C):this.e.call(null,a,b,c,d,e,f,g,k,l,m,n,p,t,y,x,C)
};h.ta=function(a,b,c,d,e,f,g,k,l,m,n,p,t,y,x,C,G){return this.e.ta?this.e.ta(a,b,c,d,e,f,g,k,l,m,n,p,t,y,x,C,G):this.e.call(null,a,b,c,d,e,f,g,k,l,m,n,p,t,y,x,C,G)};h.ua=function(a,b,c,d,e,f,g,k,l,m,n,p,t,y,x,C,G,M){return this.e.ua?this.e.ua(a,b,c,d,e,f,g,k,l,m,n,p,t,y,x,C,G,M):this.e.call(null,a,b,c,d,e,f,g,k,l,m,n,p,t,y,x,C,G,M)};h.va=function(a,b,c,d,e,f,g,k,l,m,n,p,t,y,x,C,G,M,R){return this.e.va?this.e.va(a,b,c,d,e,f,g,k,l,m,n,p,t,y,x,C,G,M,R):this.e.call(null,a,b,c,d,e,f,g,k,l,m,n,p,t,y,x,C,G,M,R)};h.wa=function(a,b,c,d,e,f,g,k,l,m,n,p,t,y,x,C,G,M,R,Y){return this.e.wa?this.e.wa(a,b,c,d,e,f,g,k,l,m,n,p,t,y,x,C,G,M,R,Y):this.e.call(null,a,b,c,d,e,f,g,k,l,m,n,p,t,y,x,C,G,M,R,Y)};h.zb=!0;h.F=function(a,b){return new Pb(this.e,b)};h.D=function(){return this.k};function Rb(a,b){return Ob(a)&&!(a?a.g&262144||a.fc||(a.g?0:v(Ra,a)):v(Ra,a))?new Pb(a,b):null==a?null:Sa(a,b)}function Sb(a){var b=null!=a;return(b?a?a.g&131072||a.Gb||(a.g?0:v(Pa,a)):v(Pa,a):b)?Qa(a):null}function Tb(a){return null==a||la(K(a))}function Ub(a){return null==a?!1:a?a.g&8||a.Yb?!0:a.g?!1:v(wa,a):v(wa,a)}function Vb(a){return null==a?!1:a?a.g&4096||a.dc?!0:a.g?!1:v(La,a):v(La,a)}function Wb(a){return a?a.g&16777216||a.cc?!0:a.g?!1:v(Za,a):v(Za,a)}function Xb(a){return null==a?!1:a?a.g&1024||a.bc?!0:a.g?!1:v(Ga,a):v(Ga,a)}function Yb(a){return a?a.g&16384||a.ec?!0:a.g?!1:v(Ma,a):v(Ma,a)}function Zb(a){return a?a.p&512||a.Xb?!0:!1:!1}function $b(a){var b=[];ca(a,function(a){return function(b,e){return a.push(e)}}(b));return b}function ac(a,b,c,d,e){for(;0!==e;)c[d]=a[b],d+=1,e-=1,b+=1}var bc={};function cc(a){return null==a?!1:a?a.g&64||a.Ma?!0:a.g?!1:v(za,a):v(za,a)}function dc(a){return u(a)?!0:!1}function xb(a,b){if(a===b)return 0;if(null==a)return-1;if(null==b)return 1;if(ma(a)===ma(b))return a&&(a.p&2048||a.Ua)?a.Va(null,b):a>b?1:a<b?-1:0;if(w)throw Error("compare on non-nil objects of different types");return null}var ec=function(){function a(a,b,c,g){for(;;){var k=xb(U.b(a,g),U.b(b,g));if(0===k&&g+1<c)g+=1;else return k}}function b(a,b){var f=T(a),g=T(b);return f<g?-1:f>g?1:w?c.l(a,b,f,0):null}var c=null,c=function(c,e,f,g){switch(arguments.length){case 2:return b.call(this,c,e);case 4:return a.call(this,c,e,f,g)}throw Error("Invalid arity: "+arguments.length)};c.b=b;c.l=a;return c}(),gc=function(){function a(a,b,c){for(c=K(c);;)if(c)b=a.b?a.b(b,L(c)):a.call(null,b,L(c)),c=P(c);else return b}function b(a,b){var c=K(b);return c?fc.c?fc.c(a,L(c),P(c)):fc.call(null,a,L(c),P(c)):a.n?a.n():a.call(null)}var c=null,c=function(c,e,f){switch(arguments.length){case 2:return b.call(this,c,e);case 3:return a.call(this,c,e,f)}throw Error("Invalid arity: "+arguments.length)};c.b=b;c.c=a;return c}(),fc=function(){function a(a,b,c){return c&&(c.g&524288||c.Ib)?c.Q(null,a,b):c instanceof Array?Fb.c(c,a,b):"string"===typeof c?Fb.c(c,a,b):v(Ta,c)?Ua.c(c,a,b):w?gc.c(a,b,c):null}function b(a,b){return b&&(b.g&524288||b.Ib)?b.P(null,a):b instanceof Array?Fb.b(b,a):"string"===typeof b?Fb.b(b,a):v(Ta,b)?Ua.b(b,a):w?gc.b(a,b):null}var c=null,c=function(c,e,f){switch(arguments.length){case 2:return b.call(this,c,e);case 3:return a.call(this,c,e,f)}throw Error("Invalid arity: "+arguments.length)};c.b=b;c.c=a;return c}();function hc(a){a=(a-a%2)/2;return 0<=a?Math.floor.a?Math.floor.a(a):Math.floor.call(null,a):Math.ceil.a?Math.ceil.a(a):Math.ceil.call(null,a)}function ic(a){a-=a>>1&1431655765;a=(a&858993459)+(a>>2&858993459);return 16843009*(a+(a>>4)&252645135)>>24}function jc(a){var b=1;for(a=K(a);;)if(a&&0<b)b-=1,a=P(a);else return a}var A=function(){function a(a){return null==a?"":a.toString()}var b=null,c=function(){function a(b,d){var k=null;1<arguments.length&&(k=Q(Array.prototype.slice.call(arguments,1),0));return c.call(this,b,k)}function c(a,d){for(var e=new da(b.a(a)),l=d;;)if(u(l))e=e.append(b.a(L(l))),l=P(l);else return e.toString()}a.o=1;a.j=function(a){var b=L(a);a=N(a);return c(b,a)};a.f=c;return a}(),b=function(b,e){switch(arguments.length){case 0:return"";case 1:return a.call(this,b);default:return c.f(b,Q(arguments,1))}throw Error("Invalid arity: "+arguments.length)};b.o=1;b.j=c.j;b.n=function(){return""};b.a=a;b.f=c.f;return b}(),kc=function(){var a=null,a=function(a,c,d){switch(arguments.length){case 2:return a.substring(c);case 3:return a.substring(c,d)}throw Error("Invalid arity: "+arguments.length)};a.b=function(a,c){return a.substring(c)};a.c=function(a,c,d){return a.substring(c,d)};return a}();function Ib(a,b){return dc(Wb(b)?function(){for(var c=K(a),d=K(b);;){if(null==c)return null==d;if(null==d)return!1;if(I.b(L(c),L(d)))c=P(c),d=P(d);else return w?!1:null}}():null)}function lc(a,b,c,d,e){this.k=a;this.first=b;this.ka=c;this.count=d;this.m=e;this.g=65937646;this.p=8192}h=lc.prototype;h.toString=function(){return lb(this)};h.D=function(){return this.k};h.W=function(){return 1===this.count?null:this.ka};h.I=function(){return this.count};h.C=function(){var a=this.m;return null!=a?a:this.m=a=Bb(this)};h.B=function(a,b){return Ib(this,b)};h.M=function(){return O};h.P=function(a,b){return gc.b(b,this)};h.Q=function(a,b,c){return gc.c(b,c,this)};h.T=function(){return this.first};h.V=function(){return 1===this.count?O:this.ka};h.G=function(){return this};h.F=function(a,b){return new lc(b,this.first,this.ka,this.count,this.m)};h.H=function(a,b){return new lc(this.k,b,this,this.count+1,null)};function mc(a){this.k=a;this.g=65937614;this.p=8192}h=mc.prototype;h.toString=function(){return lb(this)};h.D=function(){return this.k};h.W=function(){return null};h.I=function(){return 0};h.C=function(){return 0};h.B=function(a,b){return Ib(this,b)};h.M=function(){return this};h.P=function(a,b){return gc.b(b,this)};h.Q=function(a,b,c){return gc.c(b,c,this)};h.T=function(){return null};h.V=function(){return O};h.G=function(){return null};h.F=function(a,b){return new mc(b)};h.H=function(a,b){return new lc(this.k,b,null,1,null)};var O=new mc(null),nc=function(){function a(a){var d=null;0<arguments.length&&(d=Q(Array.prototype.slice.call(arguments,0),0));return b.call(this,d)}function b(a){var b;if(a instanceof zb&&0===a.i)b=a.d;else a:{for(b=[];;)if(null!=a)b.push(a.T(null)),a=a.W(null);else break a;b=void 0}a=b.length;for(var e=O;;)if(0<a){var f=a-1,e=e.H(null,b[a-1]);a=f}else return e}a.o=0;a.j=function(a){a=K(a);return b(a)};a.f=b;return a}();function oc(a,b,c,d){this.k=a;this.first=b;this.ka=c;this.m=d;this.g=65929452;this.p=8192}h=oc.prototype;h.toString=function(){return lb(this)};h.D=function(){return this.k};h.W=function(){return null==this.ka?null:K(this.ka)};h.C=function(){var a=this.m;return null!=a?a:this.m=a=Bb(this)};h.B=function(a,b){return Ib(this,b)};h.M=function(){return Rb(O,this.k)};h.P=function(a,b){return gc.b(b,this)};h.Q=function(a,b,c){return gc.c(b,c,this)};h.T=function(){return this.first};h.V=function(){return null==this.ka?O:this.ka};h.G=function(){return this};h.F=function(a,b){return new oc(b,this.first,this.ka,this.m)};h.H=function(a,b){return new oc(null,b,this,this.m)};function S(a,b){var c=null==b;return(c?c:b&&(b.g&64||b.Ma))?new oc(null,a,b,null):new oc(null,a,K(b),null)}function X(a,b,c,d){this.Z=a;this.name=b;this.za=c;this.Ea=d;this.g=2153775105;this.p=4096}h=X.prototype;h.w=function(a,b){return E(b,":"+A.a(this.za))};h.C=function(){var a=this.Ea;return null!=a?a:this.Ea=a=vb(qb(this.name),tb(this.Z))+2654435769};h.call=function(){var a=null;return a=function(a,c,d){switch(arguments.length){case 2:return V.b(c,this);case 3:return V.c(c,this,d)}throw Error("Invalid arity: "+arguments.length)}}();h.apply=function(a,b){return this.call.apply(this,[this].concat(pa(b)))};h.a=function(a){return V.b(a,this)};h.b=function(a,b){return V.c(a,this,b)};h.B=function(a,b){return b instanceof X?this.za===b.za:!1};h.toString=function(){return":"+A.a(this.za)};function pc(a,b){return a===b?!0:a instanceof X&&b instanceof X?a.za===b.za:!1}var rc=function(){function a(a,b){return new X(a,b,""+A.a(u(a)?""+A.a(a)+"/":null)+A.a(b),null)}function b(a){if(a instanceof X)return a;if(a instanceof J){var b;if(a&&(a.p&4096||a.Hb))b=a.Z;else throw Error("Doesn't support namespace: "+A.a(a));return new X(b,qc.a?qc.a(a):qc.call(null,a),a.Ca,null)}return"string"===typeof a?(b=a.split("/"),2===b.length?new X(b[0],b[1],a,null):new X(null,b[0],a,null)):null}var c=null,c=function(c,e){switch(arguments.length){case 1:return b.call(this,c);case 2:return a.call(this,c,e)}throw Error("Invalid arity: "+arguments.length)};c.a=b;c.b=a;return c}();function sc(a,b,c,d){this.k=a;this.Ia=b;this.v=c;this.m=d;this.p=0;this.g=32374988}h=sc.prototype;h.toString=function(){return lb(this)};function tc(a){null!=a.Ia&&(a.v=a.Ia.n?a.Ia.n():a.Ia.call(null),a.Ia=null);return a.v}h.D=function(){return this.k};h.W=function(){Ya(this);return null==this.v?null:P(this.v)};h.C=function(){var a=this.m;return null!=a?a:this.m=a=Bb(this)};h.B=function(a,b){return Ib(this,b)};h.M=function(){return Rb(O,this.k)};h.P=function(a,b){return gc.b(b,this)};h.Q=function(a,b,c){return gc.c(b,c,this)};h.T=function(){Ya(this);return null==this.v?null:L(this.v)};h.V=function(){Ya(this);return null!=this.v?N(this.v):O};h.G=function(){tc(this);if(null==this.v)return null;for(var a=this.v;;)if(a instanceof sc)a=tc(a);else return this.v=a,K(this.v)};h.F=function(a,b){return new sc(b,this.Ia,this.v,this.m)};h.H=function(a,b){return S(b,this)};function uc(a,b){this.R=a;this.end=b;this.p=0;this.g=2}uc.prototype.I=function(){return this.end};uc.prototype.add=function(a){this.R[this.end]=a;return this.end+=1};uc.prototype.L=function(){var a=new vc(this.R,0,this.end);this.R=null;return a};function wc(a){return new uc(Array(a),0)}function vc(a,b,c){this.d=a;this.off=b;this.end=c;this.p=0;this.g=524306}h=vc.prototype;h.P=function(a,b){return Fb.l(this.d,b,this.d[this.off],this.off+1)};h.Q=function(a,b,c){return Fb.l(this.d,b,c,this.off)};h.nb=function(){if(this.off===this.end)throw Error("-drop-first of empty chunk");return new vc(this.d,this.off+1,this.end)};h.t=function(a,b){return this.d[this.off+b]};h.$=function(a,b,c){return 0<=b&&b<this.end-this.off?this.d[this.off+b]:c};h.I=function(){return this.end-this.off};var xc=function(){function a(a,b,c){return new vc(a,b,c)}function b(a,b){return new vc(a,b,a.length)}function c(a){return new vc(a,0,a.length)}var d=null,d=function(d,f,g){switch(arguments.length){case 1:return c.call(this,d);case 2:return b.call(this,d,f);case 3:return a.call(this,d,f,g)}throw Error("Invalid arity: "+arguments.length)};d.a=c;d.b=b;d.c=a;return d}();function yc(a,b,c,d){this.L=a;this.ha=b;this.k=c;this.m=d;this.g=31850732;this.p=1536}h=yc.prototype;h.toString=function(){return lb(this)};h.D=function(){return this.k};h.W=function(){if(1<ua(this.L))return new yc(ib(this.L),this.ha,this.k,null);var a=Ya(this.ha);return null==a?null:a};h.C=function(){var a=this.m;return null!=a?a:this.m=a=Bb(this)};h.B=function(a,b){return Ib(this,b)};h.M=function(){return Rb(O,this.k)};h.T=function(){return B.b(this.L,0)};h.V=function(){return 1<ua(this.L)?new yc(ib(this.L),this.ha,this.k,null):null==this.ha?O:this.ha};h.G=function(){return this};h.bb=function(){return this.L};h.cb=function(){return null==this.ha?O:this.ha};h.F=function(a,b){return new yc(this.L,this.ha,b,this.m)};h.H=function(a,b){return S(b,this)};h.ab=function(){return null==this.ha?null:this.ha};function zc(a,b){return 0===ua(a)?b:new yc(a,b,null,null)}function Ac(a){for(var b=[];;)if(K(a))b.push(L(a)),a=P(a);else return b}function Bc(a,b){if(Gb(a))return T(a);for(var c=a,d=b,e=0;;)if(0<d&&K(c))c=P(c),d-=1,e+=1;else return e}var Dc=function Cc(b){return null==b?null:null==P(b)?K(L(b)):w?S(L(b),Cc(P(b))):null},Ec=function(){function a(a,b){return new sc(null,function(){var c=K(a);return c?Zb(c)?zc(F(c),d.b(H(c),b)):S(L(c),d.b(N(c),b)):b},null,null)}function b(a){return new sc(null,function(){return a},null,null)}function c(){return new sc(null,function(){return null},null,null)}var d=null,e=function(){function a(c,d,e){var f=null;2<arguments.length&&(f=Q(Array.prototype.slice.call(arguments,2),0));return b.call(this,c,d,f)}function b(a,c,e){return function p(a,b){return new sc(null,function(){var c=K(a);return c?Zb(c)?zc(F(c),p(H(c),b)):S(L(c),p(N(c),b)):u(b)?p(L(b),P(b)):null},null,null)}(d.b(a,c),e)}a.o=2;a.j=function(a){var c=L(a);a=P(a);var d=L(a);a=N(a);return b(c,d,a)};a.f=b;return a}(),d=function(d,g,k){switch(arguments.length){case 0:return c.call(this);case 1:return b.call(this,d);case 2:return a.call(this,d,g);default:return e.f(d,g,Q(arguments,2))}throw Error("Invalid arity: "+arguments.length)};d.o=2;d.j=e.j;d.n=c;d.a=b;d.b=a;d.f=e.f;return d}(),Fc=function(){function a(a,b,c,d){return S(a,S(b,S(c,d)))}function b(a,b,c){return S(a,S(b,c))}var c=null,d=function(){function a(c,d,e,m,n){var p=null;4<arguments.length&&(p=Q(Array.prototype.slice.call(arguments,4),0));return b.call(this,c,d,e,m,p)}function b(a,c,d,e,f){return S(a,S(c,S(d,S(e,Dc(f)))))}a.o=4;a.j=function(a){var c=L(a);a=P(a);var d=L(a);a=P(a);var e=L(a);a=P(a);var n=L(a);a=N(a);return b(c,d,e,n,a)};a.f=b;return a}(),c=function(c,f,g,k,l){switch(arguments.length){case 1:return K(c);case 2:return S(c,f);case 3:return b.call(this,c,f,g);case 4:return a.call(this,c,f,g,k);default:return d.f(c,f,g,k,Q(arguments,4))}throw Error("Invalid arity: "+arguments.length)};c.o=4;c.j=d.j;c.a=function(a){return K(a)};c.b=function(a,b){return S(a,b)};c.c=b;c.l=a;c.f=d.f;return c}(),Gc=function(){var a=null,b=function(){function a(c,f,g,k){var l=null;3<arguments.length&&(l=Q(Array.prototype.slice.call(arguments,3),0));return b.call(this,c,f,g,l)}function b(a,c,d,k){for(;;)if(a=fb(a,c,d),u(k))c=L(k),d=L(P(k)),k=P(P(k));else return a}a.o=3;a.j=function(a){var c=L(a);a=P(a);var g=L(a);a=P(a);var k=L(a);a=N(a);return b(c,g,k,a)};a.f=b;return a}(),a=function(a,d,e,f){switch(arguments.length){case 3:return fb(a,d,e);default:return b.f(a,d,e,Q(arguments,3))}throw Error("Invalid arity: "+arguments.length)};a.o=3;a.j=b.j;a.c=function(a,b,e){return fb(a,b,e)};a.f=b.f;return a}();function Hc(a,b,c){var d=K(c);if(0===b)return a.n?a.n():a.call(null);c=D(d);var e=Aa(d);if(1===b)return a.a?a.a(c):a.a?a.a(c):a.call(null,c);var d=D(e),f=Aa(e);if(2===b)return a.b?a.b(c,d):a.b?a.b(c,d):a.call(null,c,d);var e=D(f),g=Aa(f);if(3===b)return a.c?a.c(c,d,e):a.c?a.c(c,d,e):a.call(null,c,d,e);var f=D(g),k=Aa(g);if(4===b)return a.l?a.l(c,d,e,f):a.l?a.l(c,d,e,f):a.call(null,c,d,e,f);var g=D(k),l=Aa(k);if(5===b)return a.u?a.u(c,d,e,f,g):a.u?a.u(c,d,e,f,g):a.call(null,c,d,e,f,g);var k=D(l),m=Aa(l);if(6===b)return a.S?a.S(c,d,e,f,g,k):a.S?a.S(c,d,e,f,g,k):a.call(null,c,d,e,f,g,k);var l=D(m),n=Aa(m);if(7===b)return a.ca?a.ca(c,d,e,f,g,k,l):a.ca?a.ca(c,d,e,f,g,k,l):a.call(null,c,d,e,f,g,k,l);var m=D(n),p=Aa(n);if(8===b)return a.xa?a.xa(c,d,e,f,g,k,l,m):a.xa?a.xa(c,d,e,f,g,k,l,m):a.call(null,c,d,e,f,g,k,l,m);var n=D(p),t=Aa(p);if(9===b)return a.ya?a.ya(c,d,e,f,g,k,l,m,n):a.ya?a.ya(c,d,e,f,g,k,l,m,n):a.call(null,c,d,e,f,g,k,l,m,n);var p=D(t),y=Aa(t);if(10===b)return a.ma?a.ma(c,d,e,f,g,k,l,m,n,p):a.ma?a.ma(c,d,e,f,g,k,l,m,n,p):a.call(null,c,d,e,f,g,k,l,m,n,p);var t=D(y),x=Aa(y);if(11===b)return a.na?a.na(c,d,e,f,g,k,l,m,n,p,t):a.na?a.na(c,d,e,f,g,k,l,m,n,p,t):a.call(null,c,d,e,f,g,k,l,m,n,p,t);var y=D(x),C=Aa(x);if(12===b)return a.oa?a.oa(c,d,e,f,g,k,l,m,n,p,t,y):a.oa?a.oa(c,d,e,f,g,k,l,m,n,p,t,y):a.call(null,c,d,e,f,g,k,l,m,n,p,t,y);var x=D(C),G=Aa(C);if(13===b)return a.pa?a.pa(c,d,e,f,g,k,l,m,n,p,t,y,x):a.pa?a.pa(c,d,e,f,g,k,l,m,n,p,t,y,x):a.call(null,c,d,e,f,g,k,l,m,n,p,t,y,x);var C=D(G),M=Aa(G);if(14===b)return a.qa?a.qa(c,d,e,f,g,k,l,m,n,p,t,y,x,C):a.qa?a.qa(c,d,e,f,g,k,l,m,n,p,t,y,x,C):a.call(null,c,d,e,f,g,k,l,m,n,p,t,y,x,C);var G=D(M),R=Aa(M);if(15===b)return a.ra?a.ra(c,d,e,f,g,k,l,m,n,p,t,y,x,C,G):a.ra?a.ra(c,d,e,f,g,k,l,m,n,p,t,y,x,C,G):a.call(null,c,d,e,f,g,k,l,m,n,p,t,y,x,C,G);var M=D(R),Y=Aa(R);if(16===b)return a.sa?a.sa(c,d,e,f,g,k,l,m,n,p,t,y,x,C,G,M):a.sa?a.sa(c,d,e,f,g,k,l,m,n,p,t,y,x,C,G,M):a.call(null,c,d,e,f,g,k,l,m,n,p,t,y,x,C,G,M);var R=D(Y),ta=Aa(Y);if(17===b)return a.ta?a.ta(c,d,e,f,g,k,l,m,n,p,t,y,x,C,G,M,R):a.ta?a.ta(c,d,e,f,g,k,l,m,n,p,t,y,x,C,G,M,R):a.call(null,c,d,e,f,g,k,l,m,n,p,t,y,x,C,G,M,R);var Y=D(ta),na=Aa(ta);if(18===b)return a.ua?a.ua(c,d,e,f,g,k,l,m,n,p,t,y,x,C,G,M,R,Y):a.ua?a.ua(c,d,e,f,g,k,l,m,n,p,t,y,x,C,G,M,R,Y):a.call(null,c,d,e,f,g,k,l,m,n,p,t,y,x,C,G,M,R,Y);ta=D(na);na=Aa(na);if(19===b)return a.va?a.va(c,d,e,f,g,k,l,m,n,p,t,y,x,C,G,M,R,Y,ta):a.va?a.va(c,d,e,f,g,k,l,m,n,p,t,y,x,C,G,M,R,Y,ta):a.call(null,c,d,e,f,g,k,l,m,n,p,t,y,x,C,G,M,R,Y,ta);var gb=D(na);Aa(na);if(20===b)return a.wa?a.wa(c,d,e,f,g,k,l,m,n,p,t,y,x,C,G,M,R,Y,ta,gb):a.wa?a.wa(c,d,e,f,g,k,l,m,n,p,t,y,x,C,G,M,R,Y,ta,gb):a.call(null,c,d,e,f,g,k,l,m,n,p,t,y,x,C,G,M,R,Y,ta,gb);throw Error("Only up to 20 arguments supported on functions")}var Qb=function(){function a(a,b,c,d,e){b=Fc.l(b,c,d,e);c=a.o;return a.j?(d=Bc(b,c+1),d<=c?Hc(a,d,b):a.j(b)):a.apply(a,Ac(b))}function b(a,b,c,d){b=Fc.c(b,c,d);c=a.o;return a.j?(d=Bc(b,c+1),d<=c?Hc(a,d,b):a.j(b)):a.apply(a,Ac(b))}function c(a,b,c){b=Fc.b(b,c);c=a.o;if(a.j){var d=Bc(b,c+1);return d<=c?Hc(a,d,b):a.j(b)}return a.apply(a,Ac(b))}function d(a,b){var c=a.o;if(a.j){var d=Bc(b,c+1);return d<=c?Hc(a,d,b):a.j(b)}return a.apply(a,Ac(b))}var e=null,f=function(){function a(c,d,e,f,g,y){var x=null;5<arguments.length&&(x=Q(Array.prototype.slice.call(arguments,5),0));return b.call(this,c,d,e,f,g,x)}function b(a,c,d,e,f,g){c=S(c,S(d,S(e,S(f,Dc(g)))));d=a.o;return a.j?(e=Bc(c,d+1),e<=d?Hc(a,e,c):a.j(c)):a.apply(a,Ac(c))}a.o=5;a.j=function(a){var c=L(a);a=P(a);var d=L(a);a=P(a);var e=L(a);a=P(a);var f=L(a);a=P(a);var g=L(a);a=N(a);return b(c,d,e,f,g,a)};a.f=b;return a}(),e=function(e,k,l,m,n,p){switch(arguments.length){case 2:return d.call(this,e,k);case 3:return c.call(this,e,k,l);case 4:return b.call(this,e,k,l,m);case 5:return a.call(this,e,k,l,m,n);default:return f.f(e,k,l,m,n,Q(arguments,5))}throw Error("Invalid arity: "+arguments.length)};e.o=5;e.j=f.j;e.b=d;e.c=c;e.l=b;e.u=a;e.f=f.f;return e}(),Ic=function(){function a(a,b){return!I.b(a,b)}var b=null,c=function(){function a(c,d,k){var l=null;2<arguments.length&&(l=Q(Array.prototype.slice.call(arguments,2),0));return b.call(this,c,d,l)}function b(a,c,d){return la(Qb.l(I,a,c,d))}a.o=2;a.j=function(a){var c=L(a);a=P(a);var d=L(a);a=N(a);return b(c,d,a)};a.f=b;return a}(),b=function(b,e,f){switch(arguments.length){case 1:return!1;case 2:return a.call(this,b,e);default:return c.f(b,e,Q(arguments,2))}throw Error("Invalid arity: "+arguments.length)};b.o=2;b.j=c.j;b.a=function(){return!1};b.b=a;b.f=c.f;return b}();function Jc(a,b){for(;;){if(null==K(b))return!0;if(u(a.a?a.a(L(b)):a.call(null,L(b)))){var c=a,d=P(b);a=c;b=d}else return w?!1:null}}function Kc(a,b){for(;;)if(K(b)){var c=a.a?a.a(L(b)):a.call(null,L(b));if(u(c))return c;var c=a,d=P(b);a=c;b=d}else return null}function Lc(a){return a}function Mc(a){return function(){var b=null,c=function(){function b(a,d,k){var l=null;2<arguments.length&&(l=Q(Array.prototype.slice.call(arguments,2),0));return c.call(this,a,d,l)}function c(b,d,e){return la(Qb.l(a,b,d,e))}b.o=2;b.j=function(a){var b=L(a);a=P(a);var d=L(a);a=N(a);return c(b,d,a)};b.f=c;return b}(),b=function(b,e,f){switch(arguments.length){case 0:return la(a.n?a.n():a.call(null));case 1:var g=b;return la(a.a?a.a(g):a.call(null,g));case 2:var g=b,k=e;return la(a.b?a.b(g,k):a.call(null,g,k));default:return c.f(b,e,Q(arguments,2))}throw Error("Invalid arity: "+arguments.length)};b.o=2;b.j=c.j;return b}()}var Nc=function(){function a(a,b,c,e){return new sc(null,function(){var m=K(b),n=K(c),p=K(e);return m&&n&&p?S(a.c?a.c(L(m),L(n),L(p)):a.call(null,L(m),L(n),L(p)),d.l(a,N(m),N(n),N(p))):null},null,null)}function b(a,b,c){return new sc(null,function(){var e=K(b),m=K(c);return e&&m?S(a.b?a.b(L(e),L(m)):a.call(null,L(e),L(m)),d.c(a,N(e),N(m))):null},null,null)}function c(a,b){return new sc(null,function(){var c=K(b);if(c){if(Zb(c)){for(var e=F(c),m=T(e),n=wc(m),p=0;;)if(p<m){var t=a.a?a.a(B.b(e,p)):a.call(null,B.b(e,p));n.add(t);p+=1}else break;return zc(n.L(),d.b(a,H(c)))}return S(a.a?a.a(L(c)):a.call(null,L(c)),d.b(a,N(c)))}return null},null,null)}var d=null,e=function(){function a(c,d,e,f,p){var t=null;4<arguments.length&&(t=Q(Array.prototype.slice.call(arguments,4),0));return b.call(this,c,d,e,f,t)}function b(a,c,e,f,g){var t=function x(a){return new sc(null,function(){var b=d.b(K,a);return Jc(Lc,b)?S(d.b(L,b),x(d.b(N,b))):null},null,null)};return d.b(function(){return function(b){return Qb.b(a,b)}}(t),t(Kb.f(g,f,Q([e,c],0))))}a.o=4;a.j=function(a){var c=L(a);a=P(a);var d=L(a);a=P(a);var e=L(a);a=P(a);var f=L(a);a=N(a);return b(c,d,e,f,a)};a.f=b;return a}(),d=function(d,g,k,l,m){switch(arguments.length){case 2:return c.call(this,d,g);case 3:return b.call(this,d,g,k);case 4:return a.call(this,d,g,k,l);default:return e.f(d,g,k,l,Q(arguments,4))}throw Error("Invalid arity: "+arguments.length)};d.o=4;d.j=e.j;d.b=c;d.c=b;d.l=a;d.f=e.f;return d}(),Pc=function Oc(b,c){return new sc(null,function(){var d=K(c);if(d){if(Zb(d)){for(var e=F(d),f=T(e),g=wc(f),k=0;;)if(k<f){if(u(b.a?b.a(B.b(e,k)):b.call(null,B.b(e,k)))){var l=B.b(e,k);g.add(l)}k+=1}else break;return zc(g.L(),Oc(b,H(d)))}e=L(d);d=N(d);return u(b.a?b.a(e):b.call(null,e))?S(e,Oc(b,d)):Oc(b,d)}return null},null,null)};function Qc(a,b){return Pc(Mc(a),b)}function Rc(a,b){var c;null!=a?a&&(a.p&4||a.Zb)?(c=fc.c(db,cb(a),b),c=eb(c)):c=fc.c(xa,a,b):c=fc.c(Kb,O,b);return c}var Sc=function(){function a(a,b,c){var g=bc;for(b=K(b);;)if(b){var k=a;if(k?k.g&256||k.pb||(k.g?0:v(Ca,k)):v(Ca,k)){a=V.c(a,L(b),g);if(g===a)return c;b=P(b)}else return c}else return a}function b(a,b){return c.c(a,b,null)}var c=null,c=function(c,e,f){switch(arguments.length){case 2:return b.call(this,c,e);case 3:return a.call(this,c,e,f)}throw Error("Invalid arity: "+arguments.length)};c.b=b;c.c=a;return c}(),Uc=function Tc(b,c,d){var e=U.c(c,0,null);return(c=jc(c))?W.c(b,e,Tc(V.b(b,e),c,d)):W.c(b,e,d)},Vc=function(){function a(a,b,c,d,f,p){var t=U.c(b,0,null);return(b=jc(b))?W.c(a,t,e.S(V.b(a,t),b,c,d,f,p)):W.c(a,t,c.l?c.l(V.b(a,t),d,f,p):c.call(null,V.b(a,t),d,f,p))}function b(a,b,c,d,f){var p=U.c(b,0,null);return(b=jc(b))?W.c(a,p,e.u(V.b(a,p),b,c,d,f)):W.c(a,p,c.c?c.c(V.b(a,p),d,f):c.call(null,V.b(a,p),d,f))}function c(a,b,c,d){var f=U.c(b,0,null);return(b=jc(b))?W.c(a,f,e.l(V.b(a,f),b,c,d)):W.c(a,f,c.b?c.b(V.b(a,f),d):c.call(null,V.b(a,f),d))}function d(a,b,c){var d=U.c(b,0,null);return(b=jc(b))?W.c(a,d,e.c(V.b(a,d),b,c)):W.c(a,d,c.a?c.a(V.b(a,d)):c.call(null,V.b(a,d)))}var e=null,f=function(){function a(c,d,e,f,g,y,x){var C=null;6<arguments.length&&(C=Q(Array.prototype.slice.call(arguments,6),0));return b.call(this,c,d,e,f,g,y,C)}function b(a,c,d,f,g,k,x){var C=U.c(c,0,null);return(c=jc(c))?W.c(a,C,Qb.f(e,V.b(a,C),c,d,f,Q([g,k,x],0))):W.c(a,C,Qb.f(d,V.b(a,C),f,g,k,Q([x],0)))}a.o=6;a.j=function(a){var c=L(a);a=P(a);var d=L(a);a=P(a);var e=L(a);a=P(a);var f=L(a);a=P(a);var g=L(a);a=P(a);var x=L(a);a=N(a);return b(c,d,e,f,g,x,a)};a.f=b;return a}(),e=function(e,k,l,m,n,p,t){switch(arguments.length){case 3:return d.call(this,e,k,l);case 4:return c.call(this,e,k,l,m);case 5:return b.call(this,e,k,l,m,n);case 6:return a.call(this,e,k,l,m,n,p);default:return f.f(e,k,l,m,n,p,Q(arguments,6))}throw Error("Invalid arity: "+arguments.length)};e.o=6;e.j=f.j;e.c=d;e.l=c;e.u=b;e.S=a;e.f=f.f;return e}();function Wc(a,b){this.r=a;this.d=b}function Xc(a){return new Wc(a,[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null])}function Yc(a){a=a.h;return 32>a?0:a-1>>>5<<5}function Zc(a,b,c){for(;;){if(0===b)return c;var d=Xc(a);d.d[0]=c;c=d;b-=5}}var ad=function $c(b,c,d,e){var f=new Wc(d.r,pa(d.d)),g=b.h-1>>>c&31;5===c?f.d[g]=e:(d=d.d[g],b=null!=d?$c(b,c-5,d,e):Zc(null,c-5,e),f.d[g]=b);return f};function bd(a,b){throw Error("No item "+A.a(a)+" in vector of length "+A.a(b))}function cd(a){var b=a.root;for(a=a.shift;;)if(0<a)a-=5,b=b.d[0];else return b.d}function dd(a,b){if(b>=Yc(a))return a.q;for(var c=a.root,d=a.shift;;)if(0<d)var e=d-5,c=c.d[b>>>d&31],d=e;else return c.d}function ed(a,b){return 0<=b&&b<a.h?dd(a,b):bd(b,a.h)}var gd=function fd(b,c,d,e,f){var g=new Wc(d.r,pa(d.d));if(0===c)g.d[e&31]=f;else{var k=e>>>c&31;b=fd(b,c-5,d.d[k],e,f);g.d[k]=b}return g};function Z(a,b,c,d,e,f){this.k=a;this.h=b;this.shift=c;this.root=d;this.q=e;this.m=f;this.g=167668511;this.p=8196}h=Z.prototype;h.toString=function(){return lb(this)};h.J=function(a,b){return Da.c(this,b,null)};h.K=function(a,b,c){return"number"===typeof b?B.c(this,b,c):c};h.t=function(a,b){return ed(this,b)[b&31]};h.$=function(a,b,c){return 0<=b&&b<this.h?dd(this,b)[b&31]:c};h.hb=function(a,b,c){if(0<=b&&b<this.h)return Yc(this)<=b?(a=pa(this.q),a[b&31]=c,new Z(this.k,this.h,this.shift,this.root,a,null)):new Z(this.k,this.h,this.shift,gd(this,this.shift,this.root,b,c),this.q,null);if(b===this.h)return xa(this,c);if(w)throw Error("Index "+A.a(b)+" out of bounds  [0,"+A.a(this.h)+"]");return null};h.D=function(){return this.k};h.I=function(){return this.h};h.gb=function(){return B.b(this,0)};h.qb=function(){return B.b(this,1)};h.C=function(){var a=this.m;return null!=a?a:this.m=a=Bb(this)};h.B=function(a,b){return Ib(this,b)};h.La=function(){return new hd(this.h,this.shift,id.a?id.a(this.root):id.call(null,this.root),jd.a?jd.a(this.q):jd.call(null,this.q))};h.M=function(){return Rb(kd,this.k)};h.P=function(a,b){return Eb.b(this,b)};h.Q=function(a,b,c){return Eb.c(this,b,c)};h.Ka=function(a,b,c){if("number"===typeof b)return Na(this,b,c);throw Error("Vector's key for assoc must be a number.")};h.G=function(){return 0===this.h?null:32>=this.h?new zb(this.q,0):w?ld.l?ld.l(this,cd(this),0,0):ld.call(null,this,cd(this),0,0):null};h.F=function(a,b){return new Z(b,this.h,this.shift,this.root,this.q,this.m)};h.H=function(a,b){if(32>this.h-Yc(this)){for(var c=this.q.length,d=Array(c+1),e=0;;)if(e<c)d[e]=this.q[e],e+=1;else break;d[c]=b;return new Z(this.k,this.h+1,this.shift,this.root,d,null)}c=(d=this.h>>>5>1<<this.shift)?this.shift+5:this.shift;d?(d=Xc(null),d.d[0]=this.root,e=Zc(null,this.shift,new Wc(null,this.q)),d.d[1]=e):d=ad(this,this.shift,this.root,new Wc(null,this.q));return new Z(this.k,this.h+1,c,d,[b],null)};h.call=function(){var a=null;return a=function(a,c,d){switch(arguments.length){case 2:return this.t(null,c);case 3:return this.$(null,c,d)}throw Error("Invalid arity: "+arguments.length)}}();h.apply=function(a,b){return this.call.apply(this,[this].concat(pa(b)))};h.a=function(a){return this.t(null,a)};h.b=function(a,b){return this.$(null,a,b)};var $=new Wc(null,[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null]),kd=new Z(null,0,5,$,[],0);function md(a){return eb(fc.c(db,cb(kd),a))}function nd(a,b,c,d,e,f){this.A=a;this.aa=b;this.i=c;this.off=d;this.k=e;this.m=f;this.g=32243948;this.p=1536}h=nd.prototype;h.toString=function(){return lb(this)};h.W=function(){if(this.off+1<this.aa.length){var a=ld.l?ld.l(this.A,this.aa,this.i,this.off+1):ld.call(null,this.A,this.aa,this.i,this.off+1);return null==a?null:a}return jb(this)};h.C=function(){var a=this.m;return null!=a?a:this.m=a=Bb(this)};h.B=function(a,b){return Ib(this,b)};h.M=function(){return Rb(kd,this.k)};h.P=function(a,b){return Eb.b(od.c?od.c(this.A,this.i+this.off,T(this.A)):od.call(null,this.A,this.i+this.off,T(this.A)),b)};h.Q=function(a,b,c){return Eb.c(od.c?od.c(this.A,this.i+this.off,T(this.A)):od.call(null,this.A,this.i+this.off,T(this.A)),b,c)};h.T=function(){return this.aa[this.off]};h.V=function(){if(this.off+1<this.aa.length){var a=ld.l?ld.l(this.A,this.aa,this.i,this.off+1):ld.call(null,this.A,this.aa,this.i,this.off+1);return null==a?O:a}return H(this)};h.G=function(){return this};h.bb=function(){return xc.b(this.aa,this.off)};h.cb=function(){var a=this.i+this.aa.length;return a<ua(this.A)?ld.l?ld.l(this.A,dd(this.A,a),a,0):ld.call(null,this.A,dd(this.A,a),a,0):O};h.F=function(a,b){return ld.u?ld.u(this.A,this.aa,this.i,this.off,b):ld.call(null,this.A,this.aa,this.i,this.off,b)};h.H=function(a,b){return S(b,this)};h.ab=function(){var a=this.i+this.aa.length;return a<ua(this.A)?ld.l?ld.l(this.A,dd(this.A,a),a,0):ld.call(null,this.A,dd(this.A,a),a,0):null};var ld=function(){function a(a,b,c,d,l){return new nd(a,b,c,d,l,null)}function b(a,b,c,d){return new nd(a,b,c,d,null,null)}function c(a,b,c){return new nd(a,ed(a,b),b,c,null,null)}var d=null,d=function(d,f,g,k,l){switch(arguments.length){case 3:return c.call(this,d,f,g);case 4:return b.call(this,d,f,g,k);case 5:return a.call(this,d,f,g,k,l)}throw Error("Invalid arity: "+arguments.length)};d.c=c;d.l=b;d.u=a;return d}();function pd(a,b,c,d,e){this.k=a;this.ia=b;this.start=c;this.end=d;this.m=e;this.g=166617887;this.p=8192}h=pd.prototype;h.toString=function(){return lb(this)};h.J=function(a,b){return Da.c(this,b,null)};h.K=function(a,b,c){return"number"===typeof b?B.c(this,b,c):c};h.t=function(a,b){return 0>b||this.end<=this.start+b?bd(b,this.end-this.start):B.b(this.ia,this.start+b)};h.$=function(a,b,c){return 0>b||this.end<=this.start+b?c:B.c(this.ia,this.start+b,c)};h.hb=function(a,b,c){var d=this,e=d.start+b;return qd.u?qd.u(d.k,W.c(d.ia,e,c),d.start,function(){var a=d.end,b=e+1;return a>b?a:b}(),null):qd.call(null,d.k,W.c(d.ia,e,c),d.start,function(){var a=d.end,b=e+1;return a>b?a:b}(),null)};h.D=function(){return this.k};h.I=function(){return this.end-this.start};h.C=function(){var a=this.m;return null!=a?a:this.m=a=Bb(this)};h.B=function(a,b){return Ib(this,b)};h.M=function(){return Rb(kd,this.k)};h.P=function(a,b){return Eb.b(this,b)};h.Q=function(a,b,c){return Eb.c(this,b,c)};h.Ka=function(a,b,c){if("number"===typeof b)return Na(this,b,c);throw Error("Subvec's key for assoc must be a number.")};h.G=function(){var a=this;return function(b){return function d(e){return e===a.end?null:S(B.b(a.ia,e),new sc(null,function(){return function(){return d(e+1)}}(b),null,null))}}(this)(a.start)};h.F=function(a,b){return qd.u?qd.u(b,this.ia,this.start,this.end,this.m):qd.call(null,b,this.ia,this.start,this.end,this.m)};h.H=function(a,b){return qd.u?qd.u(this.k,Na(this.ia,this.end,b),this.start,this.end+1,null):qd.call(null,this.k,Na(this.ia,this.end,b),this.start,this.end+1,null)};h.call=function(){var a=null;return a=function(a,c,d){switch(arguments.length){case 2:return this.t(null,c);case 3:return this.$(null,c,d)}throw Error("Invalid arity: "+arguments.length)}}();h.apply=function(a,b){return this.call.apply(this,[this].concat(pa(b)))};h.a=function(a){return this.t(null,a)};h.b=function(a,b){return this.$(null,a,b)};function qd(a,b,c,d,e){for(;;)if(b instanceof pd)c=b.start+c,d=b.start+d,b=b.ia;else{var f=T(b);if(0>c||0>d||c>f||d>f)throw Error("Index out of bounds");return new pd(a,b,c,d,e)}}var od=function(){function a(a,b,c){return qd(null,a,b,c,null)}function b(a,b){return c.c(a,b,T(a))}var c=null,c=function(c,e,f){switch(arguments.length){case 2:return b.call(this,c,e);case 3:return a.call(this,c,e,f)}throw Error("Invalid arity: "+arguments.length)};c.b=b;c.c=a;return c}();function rd(a,b){return a===b.r?b:new Wc(a,pa(b.d))}function id(a){return new Wc({},pa(a.d))}function jd(a){var b=[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null];ac(a,0,b,0,a.length);return b}var td=function sd(b,c,d,e){d=rd(b.root.r,d);var f=b.h-1>>>c&31;if(5===c)b=e;else{var g=d.d[f];b=null!=g?sd(b,c-5,g,e):Zc(b.root.r,c-5,e)}d.d[f]=b;return d};function hd(a,b,c,d){this.h=a;this.shift=b;this.root=c;this.q=d;this.g=275;this.p=88}h=hd.prototype;h.call=function(){var a=null;return a=function(a,c,d){switch(arguments.length){case 2:return this.J(null,c);case 3:return this.K(null,c,d)}throw Error("Invalid arity: "+arguments.length)}}();h.apply=function(a,b){return this.call.apply(this,[this].concat(pa(b)))};h.a=function(a){return this.J(null,a)
};h.b=function(a,b){return this.K(null,a,b)};h.J=function(a,b){return Da.c(this,b,null)};h.K=function(a,b,c){return"number"===typeof b?B.c(this,b,c):c};h.t=function(a,b){if(this.root.r)return ed(this,b)[b&31];throw Error("nth after persistent!")};h.$=function(a,b,c){return 0<=b&&b<this.h?B.b(this,b):c};h.I=function(){if(this.root.r)return this.h;throw Error("count after persistent!")};h.sb=function(a,b,c){var d=this;if(d.root.r){if(0<=b&&b<d.h)return Yc(this)<=b?d.q[b&31]=c:(a=function(){return function f(a,k){var l=rd(d.root.r,k);if(0===a)l.d[b&31]=c;else{var m=b>>>a&31,n=f(a-5,l.d[m]);l.d[m]=n}return l}}(this).call(null,d.shift,d.root),d.root=a),this;if(b===d.h)return db(this,c);if(w)throw Error("Index "+A.a(b)+" out of bounds for TransientVector of length"+A.a(d.h));return null}throw Error("assoc! after persistent!")};h.Na=function(a,b,c){if("number"===typeof b)return hb(this,b,c);throw Error("TransientVector's key for assoc! must be a number.")};h.Oa=function(a,b){if(this.root.r){if(32>this.h-Yc(this))this.q[this.h&31]=b;else{var c=new Wc(this.root.r,this.q),d=[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null];d[0]=b;this.q=d;if(this.h>>>5>1<<this.shift){var d=[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],e=this.shift+5;d[0]=this.root;d[1]=Zc(this.root.r,this.shift,c);this.root=new Wc(this.root.r,d);this.shift=e}else this.root=td(this,this.shift,this.root,c)}this.h+=1;return this}throw Error("conj! after persistent!")};h.Pa=function(){if(this.root.r){this.root.r=null;var a=this.h-Yc(this),b=Array(a);ac(this.q,0,b,0,a);return new Z(null,this.h,this.shift,this.root,b,null)}throw Error("persistent! called twice")};function ud(){this.p=0;this.g=2097152}ud.prototype.B=function(){return!1};var vd=new ud;function wd(a,b){return dc(Xb(b)?T(a)===T(b)?Jc(Lc,Nc.b(function(a){return I.b(V.c(b,L(a),vd),L(P(a)))},a)):null:null)}function xd(a,b){var c=a.d;if(b instanceof X)a:{for(var d=c.length,e=b.za,f=0;;){if(d<=f){c=-1;break a}var g=c[f];if(g instanceof X&&e===g.za){c=f;break a}if(w)f+=2;else{c=null;break a}}c=void 0}else if("string"==typeof b||"number"===typeof b)a:{d=c.length;for(e=0;;){if(d<=e){c=-1;break a}if(b===c[e]){c=e;break a}if(w)e+=2;else{c=null;break a}}c=void 0}else if(b instanceof J)a:{d=c.length;e=b.Ca;for(f=0;;){if(d<=f){c=-1;break a}g=c[f];if(g instanceof J&&e===g.Ca){c=f;break a}if(w)f+=2;else{c=null;break a}}c=void 0}else if(null==b)a:{d=c.length;for(e=0;;){if(d<=e){c=-1;break a}if(null==c[e]){c=e;break a}if(w)e+=2;else{c=null;break a}}c=void 0}else if(w)a:{d=c.length;for(e=0;;){if(d<=e){c=-1;break a}if(I.b(b,c[e])){c=e;break a}if(w)e+=2;else{c=null;break a}}c=void 0}else c=null;return c}function yd(a,b,c){this.d=a;this.i=b;this.ba=c;this.p=0;this.g=32374990}h=yd.prototype;h.toString=function(){return lb(this)};h.D=function(){return this.ba};h.W=function(){return this.i<this.d.length-2?new yd(this.d,this.i+2,this.ba):null};h.I=function(){return(this.d.length-this.i)/2};h.C=function(){return Bb(this)};h.B=function(a,b){return Ib(this,b)};h.M=function(){return Rb(O,this.ba)};h.P=function(a,b){return gc.b(b,this)};h.Q=function(a,b,c){return gc.c(b,c,this)};h.T=function(){return new Z(null,2,5,$,[this.d[this.i],this.d[this.i+1]],null)};h.V=function(){return this.i<this.d.length-2?new yd(this.d,this.i+2,this.ba):O};h.G=function(){return this};h.F=function(a,b){return new yd(this.d,this.i,b)};h.H=function(a,b){return S(b,this)};function r(a,b,c,d){this.k=a;this.h=b;this.d=c;this.m=d;this.g=16647951;this.p=8196}h=r.prototype;h.toString=function(){return lb(this)};h.J=function(a,b){return Da.c(this,b,null)};h.K=function(a,b,c){a=xd(this,b);return-1===a?c:this.d[a+1]};h.D=function(){return this.k};h.I=function(){return this.h};h.C=function(){var a=this.m;return null!=a?a:this.m=a=Cb(this)};h.B=function(a,b){return wd(this,b)};h.La=function(){return new zd({},this.d.length,pa(this.d))};h.M=function(){return Sa(Ad,this.k)};h.P=function(a,b){return gc.b(b,this)};h.Q=function(a,b,c){return gc.c(b,c,this)};h.fb=function(a,b){if(0<=xd(this,b)){var c=this.d.length,d=c-2;if(0===d)return va(this);for(var d=Array(d),e=0,f=0;;){if(e>=c)return new r(this.k,this.h-1,d,null);if(I.b(b,this.d[e]))e+=2;else if(w)d[f]=this.d[e],d[f+1]=this.d[e+1],f+=2,e+=2;else return null}}else return this};h.Ka=function(a,b,c){a=xd(this,b);if(-1===a){if(this.h<Bd){a=this.d;for(var d=a.length,e=Array(d+2),f=0;;)if(f<d)e[f]=a[f],f+=1;else break;e[d]=b;e[d+1]=c;return new r(this.k,this.h+1,e,null)}return Sa(Fa(Rc(Cd,this),b,c),this.k)}return c===this.d[a+1]?this:w?(b=pa(this.d),b[a+1]=c,new r(this.k,this.h,b,null)):null};h.$a=function(a,b){return-1!==xd(this,b)};h.G=function(){var a=this.d;return 0<=a.length-2?new yd(a,0,null):null};h.F=function(a,b){return new r(b,this.h,this.d,this.m)};h.H=function(a,b){if(Yb(b))return Fa(this,B.b(b,0),B.b(b,1));for(var c=this,d=K(b);;){if(null==d)return c;var e=L(d);if(Yb(e))c=Fa(c,B.b(e,0),B.b(e,1)),d=P(d);else throw Error("conj on a map takes map entries or seqables of map entries")}};h.call=function(){var a=null;return a=function(a,c,d){switch(arguments.length){case 2:return this.J(null,c);case 3:return this.K(null,c,d)}throw Error("Invalid arity: "+arguments.length)}}();h.apply=function(a,b){return this.call.apply(this,[this].concat(pa(b)))};h.a=function(a){return this.J(null,a)};h.b=function(a,b){return this.K(null,a,b)};var Ad=new r(null,0,[],null),Bd=8;function Dd(a){for(var b=a.length,c=0,d=cb(Ad);;)if(c<b)var e=c+2,d=fb(d,a[c],a[c+1]),c=e;else return eb(d)}function zd(a,b,c){this.Ga=a;this.Da=b;this.d=c;this.p=56;this.g=258}h=zd.prototype;h.Na=function(a,b,c){if(u(this.Ga)){a=xd(this,b);if(-1===a)return this.Da+2<=2*Bd?(this.Da+=2,this.d.push(b),this.d.push(c),this):Gc.c(Ed.b?Ed.b(this.Da,this.d):Ed.call(null,this.Da,this.d),b,c);c!==this.d[a+1]&&(this.d[a+1]=c);return this}throw Error("assoc! after persistent!")};h.Oa=function(a,b){if(u(this.Ga)){if(b?b.g&2048||b.Fb||(b.g?0:v(Ia,b)):v(Ia,b))return fb(this,Fd.a?Fd.a(b):Fd.call(null,b),Gd.a?Gd.a(b):Gd.call(null,b));for(var c=K(b),d=this;;){var e=L(c);if(u(e))c=P(c),d=fb(d,Fd.a?Fd.a(e):Fd.call(null,e),Gd.a?Gd.a(e):Gd.call(null,e));else return d}}else throw Error("conj! after persistent!")};h.Pa=function(){if(u(this.Ga))return this.Ga=!1,new r(null,hc(this.Da),this.d,null);throw Error("persistent! called twice")};h.J=function(a,b){return Da.c(this,b,null)};h.K=function(a,b,c){if(u(this.Ga))return a=xd(this,b),-1===a?c:this.d[a+1];throw Error("lookup after persistent!")};h.I=function(){if(u(this.Ga))return hc(this.Da);throw Error("count after persistent!")};function Ed(a,b){for(var c=cb(Cd),d=0;;)if(d<a)c=Gc.c(c,b[d],b[d+1]),d+=2;else return c}function Hd(){this.O=!1}function Id(a,b){return a===b?!0:pc(a,b)?!0:w?I.b(a,b):null}var Jd=function(){function a(a,b,c,g,k){a=pa(a);a[b]=c;a[g]=k;return a}function b(a,b,c){a=pa(a);a[b]=c;return a}var c=null,c=function(c,e,f,g,k){switch(arguments.length){case 3:return b.call(this,c,e,f);case 5:return a.call(this,c,e,f,g,k)}throw Error("Invalid arity: "+arguments.length)};c.c=b;c.u=a;return c}();function Kd(a,b){var c=Array(a.length-2);ac(a,0,c,0,2*b);ac(a,2*(b+1),c,2*b,c.length-2*b);return c}var Ld=function(){function a(a,b,c,g,k,l){a=a.Ha(b);a.d[c]=g;a.d[k]=l;return a}function b(a,b,c,g){a=a.Ha(b);a.d[c]=g;return a}var c=null,c=function(c,e,f,g,k,l){switch(arguments.length){case 4:return b.call(this,c,e,f,g);case 6:return a.call(this,c,e,f,g,k,l)}throw Error("Invalid arity: "+arguments.length)};c.l=b;c.S=a;return c}();function Md(a,b,c){this.r=a;this.s=b;this.d=c}h=Md.prototype;h.Ha=function(a){if(a===this.r)return this;var b=ic(this.s),c=Array(0>b?4:2*(b+1));ac(this.d,0,c,0,2*b);return new Md(a,this.s,c)};h.Qa=function(){return Nd.a?Nd.a(this.d):Nd.call(null,this.d)};h.Aa=function(a,b,c,d){var e=1<<(b>>>a&31);if(0===(this.s&e))return d;var f=ic(this.s&e-1),e=this.d[2*f],f=this.d[2*f+1];return null==e?f.Aa(a+5,b,c,d):Id(c,e)?f:w?d:null};h.fa=function(a,b,c,d,e,f){var g=1<<(c>>>b&31),k=ic(this.s&g-1);if(0===(this.s&g)){var l=ic(this.s);if(2*l<this.d.length){a=this.Ha(a);b=a.d;f.O=!0;a:for(c=2*(l-k),f=2*k+(c-1),l=2*(k+1)+(c-1);;){if(0===c)break a;b[l]=b[f];l-=1;c-=1;f-=1}b[2*k]=d;b[2*k+1]=e;a.s|=g;return a}if(16<=l){k=[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null];k[c>>>b&31]=Od.fa(a,b+5,c,d,e,f);for(e=d=0;;)if(32>d)0!==(this.s>>>d&1)&&(k[d]=null!=this.d[e]?Od.fa(a,b+5,ub(this.d[e]),this.d[e],this.d[e+1],f):this.d[e+1],e+=2),d+=1;else break;return new Pd(a,l+1,k)}return w?(b=Array(2*(l+4)),ac(this.d,0,b,0,2*k),b[2*k]=d,b[2*k+1]=e,ac(this.d,2*k,b,2*(k+1),2*(l-k)),f.O=!0,a=this.Ha(a),a.d=b,a.s|=g,a):null}l=this.d[2*k];g=this.d[2*k+1];return null==l?(l=g.fa(a,b+5,c,d,e,f),l===g?this:Ld.l(this,a,2*k+1,l)):Id(d,l)?e===g?this:Ld.l(this,a,2*k+1,e):w?(f.O=!0,Ld.S(this,a,2*k,null,2*k+1,Qd.ca?Qd.ca(a,b+5,l,g,c,d,e):Qd.call(null,a,b+5,l,g,c,d,e))):null};h.ea=function(a,b,c,d,e){var f=1<<(b>>>a&31),g=ic(this.s&f-1);if(0===(this.s&f)){var k=ic(this.s);if(16<=k){g=[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null];g[b>>>a&31]=Od.ea(a+5,b,c,d,e);for(d=c=0;;)if(32>c)0!==(this.s>>>c&1)&&(g[c]=null!=this.d[d]?Od.ea(a+5,ub(this.d[d]),this.d[d],this.d[d+1],e):this.d[d+1],d+=2),c+=1;else break;return new Pd(null,k+1,g)}a=Array(2*(k+1));ac(this.d,0,a,0,2*g);a[2*g]=c;a[2*g+1]=d;ac(this.d,2*g,a,2*(g+1),2*(k-g));e.O=!0;return new Md(null,this.s|f,a)}k=this.d[2*g];f=this.d[2*g+1];return null==k?(k=f.ea(a+5,b,c,d,e),k===f?this:new Md(null,this.s,Jd.c(this.d,2*g+1,k))):Id(c,k)?d===f?this:new Md(null,this.s,Jd.c(this.d,2*g+1,d)):w?(e.O=!0,new Md(null,this.s,Jd.u(this.d,2*g,null,2*g+1,Qd.S?Qd.S(a+5,k,f,b,c,d):Qd.call(null,a+5,k,f,b,c,d)))):null};h.Ra=function(a,b,c){var d=1<<(b>>>a&31);if(0===(this.s&d))return this;var e=ic(this.s&d-1),f=this.d[2*e],g=this.d[2*e+1];return null==f?(a=g.Ra(a+5,b,c),a===g?this:null!=a?new Md(null,this.s,Jd.c(this.d,2*e+1,a)):this.s===d?null:w?new Md(null,this.s^d,Kd(this.d,e)):null):Id(c,f)?new Md(null,this.s^d,Kd(this.d,e)):w?this:null};var Od=new Md(null,0,[]);function Pd(a,b,c){this.r=a;this.h=b;this.d=c}h=Pd.prototype;h.Ha=function(a){return a===this.r?this:new Pd(a,this.h,pa(this.d))};h.Qa=function(){return Rd.a?Rd.a(this.d):Rd.call(null,this.d)};h.Aa=function(a,b,c,d){var e=this.d[b>>>a&31];return null!=e?e.Aa(a+5,b,c,d):d};h.fa=function(a,b,c,d,e,f){var g=c>>>b&31,k=this.d[g];if(null==k)return a=Ld.l(this,a,g,Od.fa(a,b+5,c,d,e,f)),a.h+=1,a;b=k.fa(a,b+5,c,d,e,f);return b===k?this:Ld.l(this,a,g,b)};h.ea=function(a,b,c,d,e){var f=b>>>a&31,g=this.d[f];if(null==g)return new Pd(null,this.h+1,Jd.c(this.d,f,Od.ea(a+5,b,c,d,e)));a=g.ea(a+5,b,c,d,e);return a===g?this:new Pd(null,this.h,Jd.c(this.d,f,a))};h.Ra=function(a,b,c){var d=b>>>a&31,e=this.d[d];if(null!=e){a=e.Ra(a+5,b,c);if(a===e)d=this;else if(null==a)if(8>=this.h)a:{e=this.d;a=2*(this.h-1);b=Array(a);c=0;for(var f=1,g=0;;)if(c<a)c!==d&&null!=e[c]&&(b[f]=e[c],f+=2,g|=1<<c),c+=1;else{d=new Md(null,g,b);break a}d=void 0}else d=new Pd(null,this.h-1,Jd.c(this.d,d,a));else d=w?new Pd(null,this.h,Jd.c(this.d,d,a)):null;return d}return this};function Sd(a,b,c){b*=2;for(var d=0;;)if(d<b){if(Id(c,a[d]))return d;d+=2}else return-1}function Td(a,b,c,d){this.r=a;this.ja=b;this.h=c;this.d=d}h=Td.prototype;h.Ha=function(a){if(a===this.r)return this;var b=Array(2*(this.h+1));ac(this.d,0,b,0,2*this.h);return new Td(a,this.ja,this.h,b)};h.Qa=function(){return Nd.a?Nd.a(this.d):Nd.call(null,this.d)};h.Aa=function(a,b,c,d){a=Sd(this.d,this.h,c);return 0>a?d:Id(c,this.d[a])?this.d[a+1]:w?d:null};h.fa=function(a,b,c,d,e,f){if(c===this.ja){b=Sd(this.d,this.h,d);if(-1===b){if(this.d.length>2*this.h)return a=Ld.S(this,a,2*this.h,d,2*this.h+1,e),f.O=!0,a.h+=1,a;c=this.d.length;b=Array(c+2);ac(this.d,0,b,0,c);b[c]=d;b[c+1]=e;f.O=!0;f=this.h+1;a===this.r?(this.d=b,this.h=f,a=this):a=new Td(this.r,this.ja,f,b);return a}return this.d[b+1]===e?this:Ld.l(this,a,b+1,e)}return new Md(a,1<<(this.ja>>>b&31),[null,this,null,null]).fa(a,b,c,d,e,f)};h.ea=function(a,b,c,d,e){return b===this.ja?(a=Sd(this.d,this.h,c),-1===a?(a=2*this.h,b=Array(a+2),ac(this.d,0,b,0,a),b[a]=c,b[a+1]=d,e.O=!0,new Td(null,this.ja,this.h+1,b)):I.b(this.d[a],d)?this:new Td(null,this.ja,this.h,Jd.c(this.d,a+1,d))):new Md(null,1<<(this.ja>>>a&31),[null,this]).ea(a,b,c,d,e)};h.Ra=function(a,b,c){a=Sd(this.d,this.h,c);return-1===a?this:1===this.h?null:w?new Td(null,this.ja,this.h-1,Kd(this.d,hc(a))):null};var Qd=function(){function a(a,b,c,g,k,l,m){var n=ub(c);if(n===k)return new Td(null,n,2,[c,g,l,m]);var p=new Hd;return Od.fa(a,b,n,c,g,p).fa(a,b,k,l,m,p)}function b(a,b,c,g,k,l){var m=ub(b);if(m===g)return new Td(null,m,2,[b,c,k,l]);var n=new Hd;return Od.ea(a,m,b,c,n).ea(a,g,k,l,n)}var c=null,c=function(c,e,f,g,k,l,m){switch(arguments.length){case 6:return b.call(this,c,e,f,g,k,l);case 7:return a.call(this,c,e,f,g,k,l,m)}throw Error("Invalid arity: "+arguments.length)};c.S=b;c.ca=a;return c}();function Ud(a,b,c,d,e){this.k=a;this.ga=b;this.i=c;this.v=d;this.m=e;this.p=0;this.g=32374860}h=Ud.prototype;h.toString=function(){return lb(this)};h.D=function(){return this.k};h.C=function(){var a=this.m;return null!=a?a:this.m=a=Bb(this)};h.B=function(a,b){return Ib(this,b)};h.M=function(){return Rb(O,this.k)};h.P=function(a,b){return gc.b(b,this)};h.Q=function(a,b,c){return gc.c(b,c,this)};h.T=function(){return null==this.v?new Z(null,2,5,$,[this.ga[this.i],this.ga[this.i+1]],null):L(this.v)};h.V=function(){return null==this.v?Nd.c?Nd.c(this.ga,this.i+2,null):Nd.call(null,this.ga,this.i+2,null):Nd.c?Nd.c(this.ga,this.i,P(this.v)):Nd.call(null,this.ga,this.i,P(this.v))};h.G=function(){return this};h.F=function(a,b){return new Ud(b,this.ga,this.i,this.v,this.m)};h.H=function(a,b){return S(b,this)};var Nd=function(){function a(a,b,c){if(null==c)for(c=a.length;;)if(b<c){if(null!=a[b])return new Ud(null,a,b,null,null);var g=a[b+1];if(u(g)&&(g=g.Qa(),u(g)))return new Ud(null,a,b+2,g,null);b+=2}else return null;else return new Ud(null,a,b,c,null)}function b(a){return c.c(a,0,null)}var c=null,c=function(c,e,f){switch(arguments.length){case 1:return b.call(this,c);case 3:return a.call(this,c,e,f)}throw Error("Invalid arity: "+arguments.length)};c.a=b;c.c=a;return c}();function Vd(a,b,c,d,e){this.k=a;this.ga=b;this.i=c;this.v=d;this.m=e;this.p=0;this.g=32374860}h=Vd.prototype;h.toString=function(){return lb(this)};h.D=function(){return this.k};h.C=function(){var a=this.m;return null!=a?a:this.m=a=Bb(this)};h.B=function(a,b){return Ib(this,b)};h.M=function(){return Rb(O,this.k)};h.P=function(a,b){return gc.b(b,this)};h.Q=function(a,b,c){return gc.c(b,c,this)};h.T=function(){return L(this.v)};h.V=function(){return Rd.l?Rd.l(null,this.ga,this.i,P(this.v)):Rd.call(null,null,this.ga,this.i,P(this.v))};h.G=function(){return this};h.F=function(a,b){return new Vd(b,this.ga,this.i,this.v,this.m)};h.H=function(a,b){return S(b,this)};var Rd=function(){function a(a,b,c,g){if(null==g)for(g=b.length;;)if(c<g){var k=b[c];if(u(k)&&(k=k.Qa(),u(k)))return new Vd(a,b,c+1,k,null);c+=1}else return null;else return new Vd(a,b,c,g,null)}function b(a){return c.l(null,a,0,null)}var c=null,c=function(c,e,f,g){switch(arguments.length){case 1:return b.call(this,c);case 4:return a.call(this,c,e,f,g)}throw Error("Invalid arity: "+arguments.length)};c.a=b;c.l=a;return c}();function Wd(a,b,c,d,e,f){this.k=a;this.h=b;this.root=c;this.U=d;this.Y=e;this.m=f;this.g=16123663;this.p=8196}h=Wd.prototype;h.toString=function(){return lb(this)};h.J=function(a,b){return Da.c(this,b,null)};h.K=function(a,b,c){return null==b?this.U?this.Y:c:null==this.root?c:w?this.root.Aa(0,ub(b),b,c):null};h.D=function(){return this.k};h.I=function(){return this.h};h.C=function(){var a=this.m;return null!=a?a:this.m=a=Cb(this)};h.B=function(a,b){return wd(this,b)};h.La=function(){return new Xd({},this.root,this.h,this.U,this.Y)};h.M=function(){return Sa(Cd,this.k)};h.fb=function(a,b){if(null==b)return this.U?new Wd(this.k,this.h-1,this.root,!1,null,null):this;if(null==this.root)return this;if(w){var c=this.root.Ra(0,ub(b),b);return c===this.root?this:new Wd(this.k,this.h-1,c,this.U,this.Y,null)}return null};h.Ka=function(a,b,c){if(null==b)return this.U&&c===this.Y?this:new Wd(this.k,this.U?this.h:this.h+1,this.root,!0,c,null);a=new Hd;b=(null==this.root?Od:this.root).ea(0,ub(b),b,c,a);return b===this.root?this:new Wd(this.k,a.O?this.h+1:this.h,b,this.U,this.Y,null)};h.$a=function(a,b){return null==b?this.U:null==this.root?!1:w?this.root.Aa(0,ub(b),b,bc)!==bc:null};h.G=function(){if(0<this.h){var a=null!=this.root?this.root.Qa():null;return this.U?S(new Z(null,2,5,$,[null,this.Y],null),a):a}return null};h.F=function(a,b){return new Wd(b,this.h,this.root,this.U,this.Y,this.m)};h.H=function(a,b){if(Yb(b))return Fa(this,B.b(b,0),B.b(b,1));for(var c=this,d=K(b);;){if(null==d)return c;var e=L(d);if(Yb(e))c=Fa(c,B.b(e,0),B.b(e,1)),d=P(d);else throw Error("conj on a map takes map entries or seqables of map entries")}};h.call=function(){var a=null;return a=function(a,c,d){switch(arguments.length){case 2:return this.J(null,c);case 3:return this.K(null,c,d)}throw Error("Invalid arity: "+arguments.length)}}();h.apply=function(a,b){return this.call.apply(this,[this].concat(pa(b)))};h.a=function(a){return this.J(null,a)};h.b=function(a,b){return this.K(null,a,b)};var Cd=new Wd(null,0,null,!1,null,0);function Mb(a,b){for(var c=a.length,d=0,e=cb(Cd);;)if(d<c)var f=d+1,e=e.Na(null,a[d],b[d]),d=f;else return eb(e)}function Xd(a,b,c,d,e){this.r=a;this.root=b;this.count=c;this.U=d;this.Y=e;this.p=56;this.g=258}h=Xd.prototype;h.Na=function(a,b,c){return Yd(this,b,c)};h.Oa=function(a,b){var c;a:{if(this.r){if(b?b.g&2048||b.Fb||(b.g?0:v(Ia,b)):v(Ia,b)){c=Yd(this,Fd.a?Fd.a(b):Fd.call(null,b),Gd.a?Gd.a(b):Gd.call(null,b));break a}c=K(b);for(var d=this;;){var e=L(c);if(u(e))c=P(c),d=Yd(d,Fd.a?Fd.a(e):Fd.call(null,e),Gd.a?Gd.a(e):Gd.call(null,e));else{c=d;break a}}}else throw Error("conj! after persistent");c=void 0}return c};h.Pa=function(){var a;if(this.r)this.r=null,a=new Wd(null,this.count,this.root,this.U,this.Y,null);else throw Error("persistent! called twice");return a};h.J=function(a,b){return null==b?this.U?this.Y:null:null==this.root?null:this.root.Aa(0,ub(b),b)};h.K=function(a,b,c){return null==b?this.U?this.Y:c:null==this.root?c:this.root.Aa(0,ub(b),b,c)};h.I=function(){if(this.r)return this.count;throw Error("count after persistent!")};function Yd(a,b,c){if(a.r){if(null==b)a.Y!==c&&(a.Y=c),a.U||(a.count+=1,a.U=!0);else{var d=new Hd;b=(null==a.root?Od:a.root).fa(a.r,0,ub(b),b,c,d);b!==a.root&&(a.root=b);d.O&&(a.count+=1)}return a}throw Error("assoc! after persistent!")}var Zd=function(){function a(a){var d=null;0<arguments.length&&(d=Q(Array.prototype.slice.call(arguments,0),0));return b.call(this,d)}function b(a){a=K(a);for(var b=cb(Cd);;)if(a){var e=P(P(a)),b=Gc.c(b,L(a),L(P(a)));a=e}else return eb(b)}a.o=0;a.j=function(a){a=K(a);return b(a)};a.f=b;return a}(),$d=function(){function a(a){var d=null;0<arguments.length&&(d=Q(Array.prototype.slice.call(arguments,0),0));return b.call(this,d)}function b(a){return new r(null,hc(T(a)),Qb.b(qa,a),null)}a.o=0;a.j=function(a){a=K(a);return b(a)};a.f=b;return a}();function ae(a,b){this.Ba=a;this.ba=b;this.p=0;this.g=32374988}h=ae.prototype;h.toString=function(){return lb(this)};h.D=function(){return this.ba};h.W=function(){var a=this.Ba,a=(a?a.g&128||a.rb||(a.g?0:v(Ba,a)):v(Ba,a))?this.Ba.W(null):P(this.Ba);return null==a?null:new ae(a,this.ba)};h.C=function(){return Bb(this)};h.B=function(a,b){return Ib(this,b)};h.M=function(){return Rb(O,this.ba)};h.P=function(a,b){return gc.b(b,this)};h.Q=function(a,b,c){return gc.c(b,c,this)};h.T=function(){return this.Ba.T(null).gb()};h.V=function(){var a=this.Ba,a=(a?a.g&128||a.rb||(a.g?0:v(Ba,a)):v(Ba,a))?this.Ba.W(null):P(this.Ba);return null!=a?new ae(a,this.ba):O};h.G=function(){return this};h.F=function(a,b){return new ae(this.Ba,b)};h.H=function(a,b){return S(b,this)};function Fd(a){return Ja(a)}function Gd(a){return Ka(a)}var be=function(){function a(a){var d=null;0<arguments.length&&(d=Q(Array.prototype.slice.call(arguments,0),0));return b.call(this,d)}function b(a){return u(Kc(Lc,a))?fc.b(function(a,b){return Kb.b(u(a)?a:Ad,b)},a):null}a.o=0;a.j=function(a){a=K(a);return b(a)};a.f=b;return a}(),ce=function(){function a(a,d){var e=null;1<arguments.length&&(e=Q(Array.prototype.slice.call(arguments,1),0));return b.call(this,a,e)}function b(a,b){return u(Kc(Lc,b))?fc.b(function(a){return function(b,c){return fc.c(a,u(b)?b:Ad,K(c))}}(function(b,d){var g=L(d),k=L(P(d));return V.c(b,g,bc)!==bc?W.c(b,g,a.b?a.b(V.b(b,g),k):a.call(null,V.b(b,g),k)):W.c(b,g,k)}),b):null}a.o=1;a.j=function(a){var d=L(a);a=N(a);return b(d,a)};a.f=b;return a}();function de(a,b,c){this.k=a;this.Ja=b;this.m=c;this.g=15077647;this.p=8196}h=de.prototype;h.toString=function(){return lb(this)};h.J=function(a,b){return Da.c(this,b,null)};h.K=function(a,b,c){return Ea(this.Ja,b)?b:c};h.D=function(){return this.k};h.I=function(){return ua(this.Ja)};h.C=function(){var a=this.m;return null!=a?a:this.m=a=Cb(this)};h.B=function(a,b){return Vb(b)&&T(this)===T(b)&&Jc(function(a){return function(b){return V.c(a,b,bc)===bc?!1:!0}}(this),b)};h.La=function(){return new ee(cb(this.Ja))};h.M=function(){return Rb(fe,this.k)};h.G=function(){var a=K(this.Ja);return a?new ae(a,null):null};h.F=function(a,b){return new de(b,this.Ja,this.m)};h.H=function(a,b){return new de(this.k,W.c(this.Ja,b,null),null)};h.call=function(){var a=null;return a=function(a,c,d){switch(arguments.length){case 2:return this.J(null,c);case 3:return this.K(null,c,d)}throw Error("Invalid arity: "+arguments.length)}}();h.apply=function(a,b){return this.call.apply(this,[this].concat(pa(b)))};h.a=function(a){return this.J(null,a)};h.b=function(a,b){return this.K(null,a,b)};var fe=new de(null,Ad,0);function ee(a){this.la=a;this.g=259;this.p=136}h=ee.prototype;h.call=function(){var a=null;return a=function(a,c,d){switch(arguments.length){case 2:return Da.c(this.la,c,bc)===bc?null:c;case 3:return Da.c(this.la,c,bc)===bc?d:c}throw Error("Invalid arity: "+arguments.length)}}();h.apply=function(a,b){return this.call.apply(this,[this].concat(pa(b)))};h.a=function(a){return Da.c(this.la,a,bc)===bc?null:a};h.b=function(a,b){return Da.c(this.la,a,bc)===bc?b:a};h.J=function(a,b){return Da.c(this,b,null)};h.K=function(a,b,c){return Da.c(this.la,b,bc)===bc?c:b};h.I=function(){return T(this.la)};h.Oa=function(a,b){this.la=Gc.c(this.la,b,null);return this};h.Pa=function(){return new de(null,eb(this.la),null)};function qc(a){if(a&&(a.p&4096||a.Hb))return a.name;if("string"===typeof a)return a;throw Error("Doesn't support name: "+A.a(a))}var he=function ge(b,c){return new sc(null,function(){var d=K(c);return d?u(b.a?b.a(L(d)):b.call(null,L(d)))?S(L(d),ge(b,N(d))):null:null},null,null)};function ie(a,b,c,d,e){this.k=a;this.start=b;this.end=c;this.step=d;this.m=e;this.g=32375006;this.p=8192}h=ie.prototype;h.toString=function(){return lb(this)};h.t=function(a,b){if(b<ua(this))return this.start+b*this.step;if(this.start>this.end&&0===this.step)return this.start;throw Error("Index out of bounds")};h.$=function(a,b,c){return b<ua(this)?this.start+b*this.step:this.start>this.end&&0===this.step?this.start:c};h.D=function(){return this.k};h.W=function(){return 0<this.step?this.start+this.step<this.end?new ie(this.k,this.start+this.step,this.end,this.step,null):null:this.start+this.step>this.end?new ie(this.k,this.start+this.step,this.end,this.step,null):null};h.I=function(){return la(Ya(this))?0:Math.ceil((this.end-this.start)/this.step)};h.C=function(){var a=this.m;return null!=a?a:this.m=a=Bb(this)};h.B=function(a,b){return Ib(this,b)};h.M=function(){return Rb(O,this.k)};h.P=function(a,b){return Eb.b(this,b)};h.Q=function(a,b,c){return Eb.c(this,b,c)};h.T=function(){return null==Ya(this)?null:this.start};h.V=function(){return null!=Ya(this)?new ie(this.k,this.start+this.step,this.end,this.step,null):O};h.G=function(){return 0<this.step?this.start<this.end?this:null:this.start>this.end?this:null};h.F=function(a,b){return new ie(b,this.start,this.end,this.step,this.m)};h.H=function(a,b){return S(b,this)};var je=function(){function a(a,b,c){return new ie(null,a,b,c,null)}function b(a,b){return e.c(a,b,1)}function c(a){return e.c(0,a,1)}function d(){return e.c(0,Number.MAX_VALUE,1)}var e=null,e=function(e,g,k){switch(arguments.length){case 0:return d.call(this);case 1:return c.call(this,e);case 2:return b.call(this,e,g);case 3:return a.call(this,e,g,k)}throw Error("Invalid arity: "+arguments.length)};e.n=d;e.a=c;e.b=b;e.c=a;return e}(),ke=function(){function a(a,b){for(;;)if(K(b)&&0<a){var c=a-1,g=P(b);a=c;b=g}else return null}function b(a){for(;;)if(K(a))a=P(a);else return null}var c=null,c=function(c,e){switch(arguments.length){case 1:return b.call(this,c);case 2:return a.call(this,c,e)}throw Error("Invalid arity: "+arguments.length)};c.a=b;c.b=a;return c}(),le=function(){function a(a,b){ke.b(a,b);return b}function b(a){ke.a(a);return a}var c=null,c=function(c,e){switch(arguments.length){case 1:return b.call(this,c);case 2:return a.call(this,c,e)}throw Error("Invalid arity: "+arguments.length)};c.a=b;c.b=a;return c}();function me(a,b,c,d,e,f,g){var k=ea;try{ea=null==ea?null:ea-1;if(null!=ea&&0>ea)return E(a,"#");E(a,c);K(g)&&(b.c?b.c(L(g),a,f):b.call(null,L(g),a,f));for(var l=P(g),m=ka.a(f)-1;;)if(!l||null!=m&&0===m){K(l)&&0===m&&(E(a,d),E(a,"..."));break}else{E(a,d);b.c?b.c(L(l),a,f):b.call(null,L(l),a,f);var n=P(l);c=m-1;l=n;m=c}return E(a,e)}finally{ea=k}}var ne=function(){function a(a,d){var e=null;1<arguments.length&&(e=Q(Array.prototype.slice.call(arguments,1),0));return b.call(this,a,e)}function b(a,b){for(var e=K(b),f=null,g=0,k=0;;)if(k<g){var l=f.t(null,k);E(a,l);k+=1}else if(e=K(e))f=e,Zb(f)?(e=F(f),g=H(f),f=e,l=T(e),e=g,g=l):(l=L(f),E(a,l),e=P(f),f=null,g=0),k=0;else return null}a.o=1;a.j=function(a){var d=L(a);a=N(a);return b(d,a)};a.f=b;return a}(),oe={'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t"};function pe(a){return'"'+A.a(a.replace(RegExp('[\\\\"\b\f\n\r	]',"g"),function(a){return oe[a]}))+'"'}var se=function qe(b,c,d){if(null==b)return E(c,"nil");if(void 0===b)return E(c,"#<undefined>");if(w){u(function(){var c=V.b(d,ia);return u(c)?(c=b?b.g&131072||b.Gb?!0:b.g?!1:v(Pa,b):v(Pa,b))?Sb(b):c:c}())&&(E(c,"^"),qe(Sb(b),c,d),E(c," "));if(null==b)return E(c,"nil");if(b.Xa)return b.jb(b,c,d);if(b&&(b.g&2147483648||b.N))return b.w(null,c,d);if(ma(b)===Boolean||"number"===typeof b)return E(c,""+A.a(b));if(null!=b&&b.constructor===Object)return E(c,"#js "),re.l?re.l(Nc.b(function(c){return new Z(null,2,5,$,[rc.a(c),b[c]],null)},$b(b)),qe,c,d):re.call(null,Nc.b(function(c){return new Z(null,2,5,$,[rc.a(c),b[c]],null)},$b(b)),qe,c,d);if(b instanceof Array)return me(c,qe,"#js ["," ","]",d,b);if("string"==typeof b)return u(ha.a(d))?E(c,pe(b)):E(c,b);if(Ob(b))return ne.f(c,Q(["#<",""+A.a(b),">"],0));if(b instanceof Date){var e=function(b,c){for(var d=""+A.a(b);;)if(T(d)<c)d="0"+A.a(d);else return d};return ne.f(c,Q(['#inst "',""+A.a(b.getUTCFullYear()),"-",e(b.getUTCMonth()+1,2),"-",e(b.getUTCDate(),2),"T",e(b.getUTCHours(),2),":",e(b.getUTCMinutes(),2),":",e(b.getUTCSeconds(),2),".",e(b.getUTCMilliseconds(),3),"-",'00:00"'],0))}return b instanceof RegExp?ne.f(c,Q(['#"',b.source,'"'],0)):(b?b.g&2147483648||b.N||(b.g?0:v($a,b)):v($a,b))?ab(b,c,d):w?ne.f(c,Q(["#<",""+A.a(b),">"],0)):null}return null};function te(a,b){var c=new da;a:{var d=new kb(c);se(L(a),d,b);for(var e=K(P(a)),f=null,g=0,k=0;;)if(k<g){var l=f.t(null,k);E(d," ");se(l,d,b);k+=1}else if(e=K(e))f=e,Zb(f)?(e=F(f),g=H(f),f=e,l=T(e),e=g,g=l):(l=L(f),E(d," "),se(l,d,b),e=P(f),f=null,g=0),k=0;else break a}return c}var ue=function(){function a(a){var d=null;0<arguments.length&&(d=Q(Array.prototype.slice.call(arguments,0),0));return b.call(this,d)}function b(a){var b=fa();return Tb(a)?"":""+A.a(te(a,b))}a.o=0;a.j=function(a){a=K(a);return b(a)};a.f=b;return a}();function re(a,b,c,d){return me(c,function(a,c,d){b.c?b.c(Ja(a),c,d):b.call(null,Ja(a),c,d);E(c," ");return b.c?b.c(Ka(a),c,d):b.call(null,Ka(a),c,d)},"{",", ","}",d,K(a))}zb.prototype.N=!0;zb.prototype.w=function(a,b,c){return me(b,se,"("," ",")",c,this)};sc.prototype.N=!0;sc.prototype.w=function(a,b,c){return me(b,se,"("," ",")",c,this)};Ud.prototype.N=!0;Ud.prototype.w=function(a,b,c){return me(b,se,"("," ",")",c,this)};yd.prototype.N=!0;yd.prototype.w=function(a,b,c){return me(b,se,"("," ",")",c,this)};nd.prototype.N=!0;nd.prototype.w=function(a,b,c){return me(b,se,"("," ",")",c,this)};oc.prototype.N=!0;oc.prototype.w=function(a,b,c){return me(b,se,"("," ",")",c,this)};Wd.prototype.N=!0;Wd.prototype.w=function(a,b,c){return re(this,se,b,c)};Vd.prototype.N=!0;Vd.prototype.w=function(a,b,c){return me(b,se,"("," ",")",c,this)};pd.prototype.N=!0;pd.prototype.w=function(a,b,c){return me(b,se,"["," ","]",c,this)};de.prototype.N=!0;de.prototype.w=function(a,b,c){return me(b,se,"#{"," ","}",c,this)};yc.prototype.N=!0;yc.prototype.w=function(a,b,c){return me(b,se,"("," ",")",c,this)};Z.prototype.N=!0;Z.prototype.w=function(a,b,c){return me(b,se,"["," ","]",c,this)};mc.prototype.N=!0;mc.prototype.w=function(a,b){return E(b,"()")};r.prototype.N=!0;r.prototype.w=function(a,b,c){return re(this,se,b,c)};ie.prototype.N=!0;ie.prototype.w=function(a,b,c){return me(b,se,"("," ",")",c,this)};ae.prototype.N=!0;ae.prototype.w=function(a,b,c){return me(b,se,"("," ",")",c,this)};lc.prototype.N=!0;lc.prototype.w=function(a,b,c){return me(b,se,"("," ",")",c,this)};Z.prototype.Ua=!0;Z.prototype.Va=function(a,b){return ec.b(this,b)};pd.prototype.Ua=!0;pd.prototype.Va=function(a,b){return ec.b(this,b)};X.prototype.Ua=!0;X.prototype.Va=function(a,b){return wb(this,b)};J.prototype.Ua=!0;J.prototype.Va=function(a,b){return wb(this,b)};function ve(a,b){if(a?a.Jb:a)return a.Jb(a,b);var c;c=ve[q(null==a?null:a)];if(!c&&(c=ve._,!c))throw z("IReset.-reset!",a);return c.call(null,a,b)}var we=function(){function a(a,b,c,d,e){if(a?a.Ob:a)return a.Ob(a,b,c,d,e);var n;n=we[q(null==a?null:a)];if(!n&&(n=we._,!n))throw z("ISwap.-swap!",a);return n.call(null,a,b,c,d,e)}function b(a,b,c,d){if(a?a.Nb:a)return a.Nb(a,b,c,d);var e;e=we[q(null==a?null:a)];if(!e&&(e=we._,!e))throw z("ISwap.-swap!",a);return e.call(null,a,b,c,d)}function c(a,b,c){if(a?a.Mb:a)return a.Mb(a,b,c);var d;d=we[q(null==a?null:a)];if(!d&&(d=we._,!d))throw z("ISwap.-swap!",a);return d.call(null,a,b,c)}function d(a,b){if(a?a.Lb:a)return a.Lb(a,b);var c;c=we[q(null==a?null:a)];if(!c&&(c=we._,!c))throw z("ISwap.-swap!",a);return c.call(null,a,b)}var e=null,e=function(e,g,k,l,m){switch(arguments.length){case 2:return d.call(this,e,g);case 3:return c.call(this,e,g,k);case 4:return b.call(this,e,g,k,l);case 5:return a.call(this,e,g,k,l,m)}throw Error("Invalid arity: "+arguments.length)};e.b=d;e.c=c;e.l=b;e.u=a;return e}();function xe(a,b,c,d){this.state=a;this.k=b;this.Wb=c;this.yb=d;this.g=2153938944;this.p=16386}h=xe.prototype;h.C=function(){return this[aa]||(this[aa]=++ba)};h.tb=function(a,b,c){a=K(this.yb);for(var d=null,e=0,f=0;;)if(f<e){var g=d.t(null,f),k=U.c(g,0,null),g=U.c(g,1,null);g.l?g.l(k,this,b,c):g.call(null,k,this,b,c);f+=1}else if(a=K(a))Zb(a)?(d=F(a),a=H(a),k=d,e=T(d),d=k):(d=L(a),k=U.c(d,0,null),g=U.c(d,1,null),g.l?g.l(k,this,b,c):g.call(null,k,this,b,c),a=P(a),d=null,e=0),f=0;else return null};h.w=function(a,b,c){E(b,"#<Atom: ");se(this.state,b,c);return E(b,">")};h.D=function(){return this.k};h.eb=function(){return this.state};h.B=function(a,b){return this===b};var ze=function(){function a(a){return new xe(a,null,null,null)}var b=null,c=function(){function a(c,d){var k=null;
1<arguments.length&&(k=Q(Array.prototype.slice.call(arguments,1),0));return b.call(this,c,k)}function b(a,c){var d=cc(c)?Qb.b(Zd,c):c,e=V.b(d,ye),d=V.b(d,ia);return new xe(a,d,e,null)}a.o=1;a.j=function(a){var c=L(a);a=N(a);return b(c,a)};a.f=b;return a}(),b=function(b,e){switch(arguments.length){case 1:return a.call(this,b);default:return c.f(b,Q(arguments,1))}throw Error("Invalid arity: "+arguments.length)};b.o=1;b.j=c.j;b.a=a;b.f=c.f;return b}();function Ae(a,b){if(a instanceof xe){var c=a.Wb;if(null!=c&&!u(c.a?c.a(b):c.call(null,b)))throw Error("Assert failed: Validator rejected reference state\n"+A.a(ue.f(Q([nc(new J(null,"validate","validate",1439230700,null),new J(null,"new-value","new-value",-1567397401,null))],0))));c=a.state;a.state=b;null!=a.yb&&bb(a,c,b);return b}return ve(a,b)}var Be=function(){function a(a,b,c,d){return a instanceof xe?Ae(a,b.c?b.c(a.state,c,d):b.call(null,a.state,c,d)):we.l(a,b,c,d)}function b(a,b,c){return a instanceof xe?Ae(a,b.b?b.b(a.state,c):b.call(null,a.state,c)):we.c(a,b,c)}function c(a,b){return a instanceof xe?Ae(a,b.a?b.a(a.state):b.call(null,a.state)):we.b(a,b)}var d=null,e=function(){function a(c,d,e,f,p){var t=null;4<arguments.length&&(t=Q(Array.prototype.slice.call(arguments,4),0));return b.call(this,c,d,e,f,t)}function b(a,c,d,e,f){return a instanceof xe?Ae(a,Qb.u(c,a.state,d,e,f)):we.u(a,c,d,e,f)}a.o=4;a.j=function(a){var c=L(a);a=P(a);var d=L(a);a=P(a);var e=L(a);a=P(a);var f=L(a);a=N(a);return b(c,d,e,f,a)};a.f=b;return a}(),d=function(d,g,k,l,m){switch(arguments.length){case 2:return c.call(this,d,g);case 3:return b.call(this,d,g,k);case 4:return a.call(this,d,g,k,l);default:return e.f(d,g,k,l,Q(arguments,4))}throw Error("Invalid arity: "+arguments.length)};d.o=4;d.j=e.j;d.b=c;d.c=b;d.l=a;d.f=e.f;return d}(),Ce={};function De(a){if(a?a.Db:a)return a.Db(a);var b;b=De[q(null==a?null:a)];if(!b&&(b=De._,!b))throw z("IEncodeJS.-clj->js",a);return b.call(null,a)}function Ee(a){return(a?u(u(null)?null:a.Cb)||(a.kb?0:v(Ce,a)):v(Ce,a))?De(a):"string"===typeof a||"number"===typeof a||a instanceof X||a instanceof J?Fe.a?Fe.a(a):Fe.call(null,a):ue.f(Q([a],0))}var Fe=function Ge(b){if(null==b)return null;if(b?u(u(null)?null:b.Cb)||(b.kb?0:v(Ce,b)):v(Ce,b))return De(b);if(b instanceof X)return qc(b);if(b instanceof J)return""+A.a(b);if(Xb(b)){var c={};b=K(b);for(var d=null,e=0,f=0;;)if(f<e){var g=d.t(null,f),k=U.c(g,0,null),g=U.c(g,1,null);c[Ee(k)]=Ge(g);f+=1}else if(b=K(b))Zb(b)?(e=F(b),b=H(b),d=e,e=T(e)):(e=L(b),d=U.c(e,0,null),e=U.c(e,1,null),c[Ee(d)]=Ge(e),b=P(b),d=null,e=0),f=0;else break;return c}if(Ub(b)){c=[];b=K(Nc.b(Ge,b));d=null;for(f=e=0;;)if(f<e)k=d.t(null,f),c.push(k),f+=1;else if(b=K(b))d=b,Zb(d)?(b=F(d),f=H(d),d=b,e=T(b),b=f):(b=L(d),c.push(b),b=P(d),d=null,e=0),f=0;else break;return c}return w?b:null},He={};function Ie(a,b){if(a?a.Bb:a)return a.Bb(a,b);var c;c=Ie[q(null==a?null:a)];if(!c&&(c=Ie._,!c))throw z("IEncodeClojure.-js->clj",a);return c.call(null,a,b)}var Ke=function(){function a(a){return b.f(a,Q([new r(null,1,[Je,!1],null)],0))}var b=null,c=function(){function a(c,d){var k=null;1<arguments.length&&(k=Q(Array.prototype.slice.call(arguments,1),0));return b.call(this,c,k)}function b(a,c){if(a?u(u(null)?null:a.$b)||(a.kb?0:v(He,a)):v(He,a))return Ie(a,Qb.b($d,c));if(K(c)){var d=cc(c)?Qb.b(Zd,c):c,e=V.b(d,Je);return function(a,b,c,d){return function x(e){return cc(e)?le.a(Nc.b(x,e)):Ub(e)?Rc(null==e?null:va(e),Nc.b(x,e)):e instanceof Array?md(Nc.b(x,e)):ma(e)===Object?Rc(Ad,function(){return function(a,b,c,d){return function na(f){return new sc(null,function(a,b,c,d){return function(){for(;;){var a=K(f);if(a){if(Zb(a)){var b=F(a),c=T(b),g=wc(c);a:{for(var k=0;;)if(k<c){var l=B.b(b,k),l=new Z(null,2,5,$,[d.a?d.a(l):d.call(null,l),x(e[l])],null);g.add(l);k+=1}else{b=!0;break a}b=void 0}return b?zc(g.L(),na(H(a))):zc(g.L(),null)}g=L(a);return S(new Z(null,2,5,$,[d.a?d.a(g):d.call(null,g),x(e[g])],null),na(N(a)))}return null}}}(a,b,c,d),null,null)}}(a,b,c,d)($b(e))}()):w?e:null}}(c,d,e,u(e)?rc:A)(a)}return null}a.o=1;a.j=function(a){var c=L(a);a=N(a);return b(c,a)};a.f=b;return a}(),b=function(b,e){switch(arguments.length){case 1:return a.call(this,b);default:return c.f(b,Q(arguments,1))}throw Error("Invalid arity: "+arguments.length)};b.o=1;b.j=c.j;b.a=a;b.f=c.f;return b}();var Le=new X(null,"y","y"),Me=new X(null,"role","role"),Ne=new X(null,"interact","interact"),Oe=new X(null,"fen","fen"),Pe=new X(null,"last-move","last-move"),ia=new X(null,"meta","meta"),Qe=new X(null,"selected","selected"),Re=new X(null,"color","color"),ja=new X(null,"dup","dup"),Se=new X(null,"toggle-orientation","toggle-orientation"),Te=new X(null,"element","element"),Ue=new X(null,"set-color","set-color"),Ve=new X(null,"bottom","bottom"),We=new X(null,"channels","channels"),w=new X(null,"else","else"),Xe=new X(null,"chess","chess"),Ye=new X(null,"top","top"),ye=new X(null,"validator","validator"),yb=new X(null,"default","default"),Ze=new X(null,"free","free"),$e=new X(null,"finally-block","finally-block"),af=new X(null,"show-check","show-check"),bf=new X(null,"set-pieces","set-pieces"),cf=new X(null,"events","events"),df=new X(null,"width","width"),ef=new X(null,"shown-dests","shown-dests"),ff=new X(null,"orientation","orientation"),gf=new X(null,"recur","recur"),hf=new X(null,"catch-block","catch-block"),jf=new X(null,"state","state"),ga=new X(null,"flush-on-newline","flush-on-newline"),kf=new X(null,"dragging","dragging"),lf=new X(null,"show-last-move","show-last-move"),mf=new X(null,"api-move","api-move"),ha=new X(null,"readably","readably"),nf=new X(null,"consumers","consumers"),of=new X(null,"set-dests","set-dests"),pf=new X(null,"after","after"),ka=new X(null,"print-length","print-length"),qf=new X(null,"select-square","select-square"),rf=new X(null,"catch-exception","catch-exception"),sf=new X(null,"checked","checked"),tf=new X(null,"prev","prev"),uf=new X(null,"drag-start","drag-start"),vf=new X(null,"continue-block","continue-block"),wf=new X(null,"move-piece","move-piece"),xf=new X(null,"right","right"),yf=new X(null,"dests","dests"),zf=new X(null,"drop-off","drop-off"),Af=new X(null,"set-fen","set-fen"),Bf=new X(null,"pieces","pieces"),Cf=new X(null,"x","x"),Df=new X(null,"movable","movable"),Je=new X(null,"keywordize-keys","keywordize-keys"),Ef=new X(null,"drag-center","drag-center"),Ff=new X(null,"move-start","move-start"),Gf=new X(null,"set-orientation","set-orientation"),Hf=new X(null,"height","height"),If=new X(null,"clear","clear"),Jf=new X(null,"left","left"),Kf=new X(null,"spare-pieces","spare-pieces");var Lf;function Mf(a){if(a?a.wb:a)return!0;var b;b=Mf[q(null==a?null:a)];if(!b&&(b=Mf._,!b))throw z("Handler.active?",a);return b.call(null,a)}function Nf(a){if(a?a.ib:a)return a.ib();var b;b=Nf[q(null==a?null:a)];if(!b&&(b=Nf._,!b))throw z("Buffer.full?",a);return b.call(null,a)}function Of(a,b,c,d,e){for(var f=0;;)if(f<e)c[d+f]=a[b+f],f+=1;else break}function Pf(a,b,c,d){this.head=a;this.q=b;this.length=c;this.d=d}Pf.prototype.pop=function(){if(0===this.length)return null;var a=this.d[this.q];this.d[this.q]=null;this.q=(this.q+1)%this.d.length;this.length-=1;return a};Pf.prototype.unshift=function(a){this.d[this.head]=a;this.head=(this.head+1)%this.d.length;this.length+=1;return null};function Qf(a,b){a.length+1===a.d.length&&a.resize();a.unshift(b)}Pf.prototype.resize=function(){var a=Array(2*this.d.length);return this.q<this.head?(Of(this.d,this.q,a,0,this.length),this.q=0,this.head=this.length,this.d=a):this.q>this.head?(Of(this.d,this.q,a,0,this.d.length-this.q),Of(this.d,0,a,this.d.length-this.q,this.head),this.q=0,this.head=this.length,this.d=a):this.q===this.head?(this.head=this.q=0,this.d=a):null};function Rf(a,b){for(var c=a.length,d=0;;)if(d<c){var e=a.pop();(b.a?b.a(e):b.call(null,e))&&a.unshift(e);d+=1}else break}function Sf(a){if(!(0<a))throw Error("Assert failed: Can't create a ring buffer of size 0\n"+A.a(ue.f(Q([nc(new J(null,">",">",1085014381,null),new J(null,"n","n",-2092305744,null),0)],0))));return new Pf(0,0,0,Array(a))}function Tf(a,b){this.R=a;this.Ub=b;this.p=0;this.g=2}Tf.prototype.I=function(){return this.R.length};Tf.prototype.ib=function(){return this.R.length===this.Ub};Tf.prototype.Pb=function(){return this.R.pop()};function Uf(a,b){if(!la(Nf(a)))throw Error("Assert failed: Can't add to a full buffer\n"+A.a(ue.f(Q([nc(new J(null,"not","not",1044554643,null),nc(new J("impl","full?","impl/full?",-97582774,null),new J(null,"this","this",1028897902,null)))],0))));a.R.unshift(b)}var Vf=null,Wf=Sf(32),Xf=!1,Yf=!1;function Zf(){Xf=!0;Yf=!1;for(var a=0;;){var b=Wf.pop();if(null!=b&&(b.n?b.n():b.call(null),1024>a)){a+=1;continue}break}Xf=!1;return 0<Wf.length?$f.n?$f.n():$f.call(null):null}"undefined"!==typeof MessageChannel&&(Vf=new MessageChannel,Vf.port1.onmessage=function(){return Zf()});function $f(){var a=Yf;if(u(a?Xf:a))return null;Yf=!0;return"undefined"!==typeof MessageChannel?Vf.port2.postMessage(0):"undefined"!==typeof setImmediate?setImmediate(Zf):w?setTimeout(Zf,0):null}function ag(a){Qf(Wf,a);$f()}var bg,dg=function cg(b){"undefined"===typeof bg&&(bg=function(b,d,e){this.O=b;this.box=d;this.Tb=e;this.p=0;this.g=425984},bg.Xa=!0,bg.Wa="cljs.core.async.impl.channels/t14728",bg.jb=function(b,d){return E(d,"cljs.core.async.impl.channels/t14728")},bg.prototype.eb=function(){return this.O},bg.prototype.D=function(){return this.Tb},bg.prototype.F=function(b,d){return new bg(this.O,this.box,d)});return new bg(b,cg,null)};function eg(a,b){this.mb=a;this.O=b}function fg(a){return Mf(a.mb)}function gg(a,b,c,d,e,f){this.Ta=a;this.Za=b;this.Sa=c;this.Ya=d;this.R=e;this.closed=f}gg.prototype.vb=function(){if(!this.closed)for(this.closed=!0;;){var a=this.Ta.pop();if(null!=a)ag(function(a){return function(){return a.a?a.a(null):a.call(null,null)}}(a.X,a,this));else break}};gg.prototype.Qb=function(a){if(null!=this.R&&0<T(this.R)){for(var b=a.X,c=dg(this.R.Pb());;){var d=this.Sa.pop();if(null!=d){var e=d.mb,f=d.O;ag(function(a){return function(){return a.a?a.a(!0):a.call(null,!0)}}(e.X,a.X,e,f,d,b,c,this));Uf(this.R,f)}break}return c}for(;;){c=this.Sa.pop();if(null!=c)return d=c.mb,e=c.O,f=d.X,b=a.X,ag(function(a){return function(){return a.a?a.a(!0):a.call(null,!0)}}(f,b,d,e,c,this)),dg(e);if(this.closed)return b=a.X,dg(null);64<this.Za?(this.Za=0,Rf(this.Ta,Mf)):this.Za+=1;if(!(1024>this.Ta.length))throw Error("Assert failed: "+A.a("No more than "+A.a(1024)+" pending takes are allowed on a single channel.")+"\n"+A.a(ue.f(Q([nc(new J(null,"<","<",993667236,null),nc(new J(null,".-length",".-length",-280799999,null),new J(null,"takes","takes",298247964,null)),new J("impl","MAX-QUEUE-SIZE","impl/MAX-QUEUE-SIZE",1508600732,null))],0))));Qf(this.Ta,a);return null}};gg.prototype.xb=function(a,b){if(null==a)throw Error("Assert failed: Can't put nil in on a channel\n"+A.a(ue.f(Q([nc(new J(null,"not","not",1044554643,null),nc(new J(null,"nil?","nil?",1612038930,null),new J(null,"val","val",1769233139,null)))],0))));var c=this.closed;if(c)return dg(!c);for(;;){var d=this.Ta.pop();if(null!=d){var e=b.X;ag(function(b){return function(){return b.a?b.a(a):b.call(null,a)}}(d.X,e,d,c,this))}else{if(null==this.R||this.R.ib()){64<this.Ya?(this.Ya=0,Rf(this.Sa,fg)):this.Ya+=1;if(!(1024>this.Sa.length))throw Error("Assert failed: "+A.a("No more than "+A.a(1024)+" pending puts are allowed on a single channel. Consider using a windowed buffer.")+"\n"+A.a(ue.f(Q([nc(new J(null,"<","<",993667236,null),nc(new J(null,".-length",".-length",-280799999,null),new J(null,"puts","puts",-1883877054,null)),new J("impl","MAX-QUEUE-SIZE","impl/MAX-QUEUE-SIZE",1508600732,null))],0))));Qf(this.Sa,new eg(b,a));return null}e=b.X;Uf(this.R,a)}return dg(!0)}};var hg,jg=function ig(b){"undefined"===typeof hg&&(hg=function(b,d,e){this.X=b;this.lb=d;this.Sb=e;this.p=0;this.g=393216},hg.Xa=!0,hg.Wa="cljs.core.async.impl.ioc-helpers/t14655",hg.jb=function(b,d){return E(d,"cljs.core.async.impl.ioc-helpers/t14655")},hg.prototype.wb=function(){return!0},hg.prototype.D=function(){return this.Sb},hg.prototype.F=function(b,d){return new hg(this.X,this.lb,d)});return new hg(b,ig,null)};function kg(a){try{return a[0].call(null,a)}catch(b){if(b instanceof Object)throw a[6].vb(),b;if(w)throw b;return null}}function lg(a,b){var c=b.Qb(jg(function(b){a[2]=b;a[1]=7;return kg(a)}));return u(c)?(a[2]=Oa(c),a[1]=7,gf):null}function mg(a,b,c){b=b.xb(c,jg(function(b){a[2]=b;a[1]=2;return kg(a)}));return u(b)?(a[2]=Oa(b),a[1]=2,gf):null}function ng(a,b){var c=a[6];null!=b&&c.xb(b,jg(function(){return function(){return null}}(c)));c.vb();return c}function og(a){for(;;){var b=a[4],c=hf.a(b),d=rf.a(b),e=a[5];if(u(function(){var a=e;return u(a)?la(b):a}()))throw e;if(u(function(){var a=e;return u(a)?(a=c,u(a)?e instanceof d:a):a}())){a[1]=c;a[2]=e;a[5]=null;a[4]=W.f(b,hf,null,Q([rf,null],0));break}if(u(function(){var a=e;return u(a)?la(c)&&la($e.a(b)):a}()))a[4]=tf.a(b);else{if(u(function(){var a=e;return u(a)?(a=la(c))?$e.a(b):a:a}())){a[1]=$e.a(b);a[4]=W.c(b,$e,null);break}if(u(function(){var a=la(e);return a?$e.a(b):a}())){a[1]=$e.a(b);a[4]=W.c(b,$e,null);break}if(la(e)&&la($e.a(b))){a[1]=vf.a(b);a[4]=tf.a(b);break}if(w)throw Error("Assert failed: No matching clause\n"+A.a(ue.f(Q([!1],0))));break}}}function pg(a,b,c){this.key=a;this.O=b;this.forward=c;this.p=0;this.g=2155872256}pg.prototype.w=function(a,b,c){return me(b,se,"["," ","]",c,this)};pg.prototype.G=function(){return xa(xa(O,this.O),this.key)};(function(){function a(a,b,c){c=Array(c+1);for(var g=0;;)if(g<c.length)c[g]=null,g+=1;else break;return new pg(a,b,c)}function b(a){return c.c(null,null,a)}var c=null,c=function(c,e,f){switch(arguments.length){case 1:return b.call(this,c);case 3:return a.call(this,c,e,f)}throw Error("Invalid arity: "+arguments.length)};c.a=b;c.c=a;return c})().a(0);var qg=function(){function a(a){a=I.b(a,0)?null:a;a="number"===typeof a?new Tf(Sf(a),a):a;return new gg(Sf(32),0,Sf(32),0,a,!1)}function b(){return c.a(null)}var c=null,c=function(c){switch(arguments.length){case 0:return b.call(this);case 1:return a.call(this,c)}throw Error("Invalid arity: "+arguments.length)};c.n=b;c.a=a;return c}();(function rg(b){"undefined"===typeof Lf&&(Lf=function(b,d,e){this.X=b;this.lb=d;this.Rb=e;this.p=0;this.g=393216},Lf.Xa=!0,Lf.Wa="cljs.core.async/t11979",Lf.jb=function(b,d){return E(d,"cljs.core.async/t11979")},Lf.prototype.wb=function(){return!0},Lf.prototype.D=function(){return this.Rb},Lf.prototype.F=function(b,d){return new Lf(this.X,this.lb,d)});return new Lf(b,rg,null)})(function(){return null});var sg=ze.a(0),tg=function(){function a(a){var d=null;0<arguments.length&&(d=Q(Array.prototype.slice.call(arguments,0),0));return b.call(this,d)}function b(a){if(u(!1))for(var b=K(a),e=null,f=0,g=0;;)if(g<f){var k=e.t(null,g);console.log(Fe(k));g+=1}else if(b=K(b))e=b,Zb(e)?(b=F(e),g=H(e),e=b,f=T(b),b=g):(b=L(e),console.log(Fe(b)),b=P(e),e=null,f=0),g=0;else break;return L(a)}a.o=0;a.j=function(a){a=K(a);return b(a)};a.f=b;return a}();function ug(a){return ce.f(function(a,c){return Xb(a)&&Xb(c)?be.f(Q([a,c],0)):u(c)?c:a},Q([vg,a],0))}function wg(a,b){var c;a:{c=[b];var d=c.length;if(d<=Bd)for(var e=0,f=cb(Ad);;)if(e<d)var g=e+1,f=fb(f,c[e],null),e=g;else{c=new de(null,eb(f),null);break a}else for(e=0,f=cb(fe);;)if(e<d)g=e+1,f=db(f,c[e]),e=g;else{c=eb(f);break a}c=void 0}return Kc(c,a)}function xg(a,b){var c=qg.a(1);ag(function(c){return function(){var e=function(){return function(a){return function(){function b(c){for(;;){var d=function(){try{for(;;){var b=a(c);if(!pc(b,gf))return b}}catch(d){if(d instanceof Object)return c[5]=d,og(c),gf;if(w)throw d;return null}}();if(!pc(d,gf))return d}}function c(){var a=[null,null,null,null,null,null,null];a[0]=d;a[1]=1;return a}var d=null,d=function(a){switch(arguments.length){case 0:return c.call(this);case 1:return b.call(this,a)}throw Error("Invalid arity: "+arguments.length)};d.n=c;d.a=b;return d}()}(function(){return function(c){var d=c[1];return 2===d?ng(c,c[2]):1===d?mg(c,a,b):null}}(c),c)}(),f=function(){var a=e.n?e.n():e.call(null);a[6]=c;return a}();return kg(f)}}(c));return c}function yg(a,b){return u(a)?a.classList.contains(b):a}var Ag=function zg(b,c){if(u(b)){var d=b.hasOwnProperty(c);return u(d)?d:zg(b.__proto__,c)}return b},Bg=Ag(document,"ontouchstart"),Cg=function(){if(!u(document.body))throw"chessground must be included in the <body> tag!";var a=document.body.style,b=new Z(null,4,5,$,["transform","webkitTransform","mozTransform","oTransform"],null);return L(function(){var c=Pc(function(a){return function(b){return Ag(a,b)}}(a,b),b);return u(c)?c:b}())}();function Dg(a){u(yg(a,"chessground-square"))||(u(yg(a,"chessground-piece"))?(a=a.parentNode,a=u(yg(a,"chessground-square"))?a:null):a=null);return u(a)?a.getAttribute("data-key"):null}function Eg(a){return Rc(Ad,function(){return function c(a){return new sc(null,function(){for(;;){var e=K(a);if(e){if(Zb(e)){var f=F(e),g=T(f),k=wc(g);a:{for(var l=0;;)if(l<g){var m=B.b(f,l),n=U.c(m,0,null),m=U.c(m,1,null),n=new Z(null,2,5,$,[rc.a(n),m],null);k.add(n);l+=1}else{f=!0;break a}f=void 0}return f?zc(k.L(),c(H(e))):zc(k.L(),null)}f=L(e);k=U.c(f,0,null);f=U.c(f,1,null);return S(new Z(null,2,5,$,[rc.a(k),f],null),c(N(e)))}return null}},null,null)}(a)}())}function Fg(a,b){return Xb(Sc.b(a,b))?Vc.c(a,b,Eg):a}var Gg=new r(null,6,"p pawn r rook n knight b bishop q queen k king".split(" "),null);function Hg(a){U.c(a,0,null);jc(a);for(var b=Ad,c=0,d=a;;){a=c;var c=d,d=U.c(c,0,null),c=jc(c),e=parseInt(d),e=u(isNaN(e))?null:e;if(63<a)return b;if(I.b(d,"/"))d=c,c=a;else if(null!=e)a+=e,d=c,c=a;else if(w){var e=a,e=""+A.a(V.b("abcdefgh",(e%8+8)%8))+A.a(8-(e/8|0)),f=d.toLowerCase(),g=V.b(Gg,f),d=I.b(d,f)?"black":"white",b=W.c(b,e,new r(null,2,[Me,g,Re,d],null));a+=1;d=c;c=a}else return null}}function Ig(a){return Hg(he(function(a){return Ic.b(" ",a)},Qc(function(a){return I.b("/",a)},u(a)?a:"rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1")))}var Jg=new Z(null,2,5,$,["white","black"],null),Kg=new Z(null,6,5,$,"pawn rook knight bishop queen king".split(" "),null),Lg=new r(null,1,[Bf,Ad],null);function Mg(a){return new r(null,1,[Bf,Ig(Ic.b(a,"start")?a:null)],null)}function Ng(a,b){return Sc.b(a,new Z(null,2,5,$,[Bf,b],null))}function Og(a,b){return Vc.c(a,new Z(null,1,5,$,[Bf],null),function(a){return fc.c(function(a,b){var c=U.c(b,0,null),g=U.c(b,1,null);return u(g)?W.c(a,c,g):Nb.b(a,c)},a,b)})}function Pg(a,b,c){if(Ic.b(b,c)){var d=Ng(a,b);u(d)?(a=Vc.l(a,new Z(null,1,5,$,[Bf],null),Nb,b),c=Uc(a,new Z(null,2,5,$,[Bf,c],null),d)):c=null;return c}return null}function Qg(a,b){return Fe(function(){function c(b,c){return xg(V.b(a,b),c)}return Mb("getOrientation toggleOrientation getPosition setPieces setDests setColor showCheck move startPos setOrientation showLastMove clear getColor setFen".split(" "),[function(){return ff.a(Oa(b))},function(){return c(Se,!0)},function(){var a=Fe,c;c=Xe.a(Oa(b));c=Bf.a(c);return a(c)},function(a){return c(bf,Rc(Ad,function(){return function f(a){return new sc(null,function(){for(;;){var b=K(a);if(b){if(Zb(b)){var c=F(b),d=T(c),n=wc(d);a:{for(var p=0;;)if(p<d){var t=B.b(c,p),y=U.c(t,0,null),t=U.c(t,1,null),y=new Z(null,2,5,$,[y,Eg(t)],null);n.add(y);p+=1}else{c=!0;break a}c=void 0}return c?zc(n.L(),f(H(b))):zc(n.L(),null)}c=L(b);n=U.c(c,0,null);c=U.c(c,1,null);return S(new Z(null,2,5,$,[n,Eg(c)],null),f(N(b)))}return null}},null,null)}(Ke.a(a))}()))},function(a){return c(of,Ke.a(a))},function(a){return c(Ue,a)},function(a){return c(af,new Z(null,1,5,$,[a],null))},function(a,b){return c(mf,new Z(null,2,5,$,[a,b],null))},function(){return c(Af,"start")},function(a){return c(Gf,a)},function(a,b){return c(lf,new Z(null,2,5,$,[a,b],null))},function(){return c(If,!0)},function(){return Re.a(Df.a(Oa(b)))},function(a){return c(Af,a)}])}())}var Rg="chessground-"+A.a(Math.random().toString(36).substring(2)),Sg=ze.a(0),Tg=ze.a(Ad);function Ug(a){a=a[Rg];return u(a)?Sc.b(Oa(Tg),new Z(null,2,5,$,[a,Ne],null)):null}function Vg(a,b,c){var d=a[Rg];u(d)||(d=Be.b(Sg,Db),a[Rg]=d);Be.l(Tg,Uc,new Z(null,2,5,$,[d,b],null),c)}var Wg=ze.a(Ad);document.addEventListener("DOMContentLoaded",function(){var a=document.createElement("div");a.id="chessground-moving-square";return document.body.appendChild(a)});var Xg=scrollY,Yg=scrollX,Zg=new r(null,2,[Cf,u(Yg)?Yg:document.documentElement.scrollLeft,Le,u(Xg)?Xg:document.documentElement.scrollTop],null),$g=u(new RegExp("ipad|iphone|ipod".source,"i").test(navigator.userAgent))?new r(null,2,[Cf,0,Le,0],null):Zg;function ah(a){var b=a.getBoundingClientRect();return new r(null,6,[Jf,b.left+Cf.a($g),xf,b.right+Cf.a($g),Ye,b.top+Le.a($g),Ve,b.bottom+Le.a($g),df,function(){var a=b.width;return u(a)?a:b.right-b.left}(),Hf,function(){var a=b.height;return u(a)?a:b.bottom-b.top}()],null)}function bh(a){var b=a.target,c=function(){var a=b.x;return u(a)?a:0}()+a.dx;a=function(){var a=b.y;return u(a)?a:0}()+a.dy;var d="translate3d("+A.a(c)+"px, "+A.a(a)+"px, 0)";b.x=c;b.y=a;return b.style[Cg]=d}function ch(a,b,c){Vg(a,Ne,interact(a).draggable(!0).on("dragstart",function(a){var e=Ef.a(Df.a(c)),f=a.target,g=Dg(f);if(u(g)){f.classList.add("dragging");if(u(e)){var k,e=f.getBoundingClientRect();k=new r(null,2,[Ye,e.top+document.body.scrollTop,Jf,e.left+document.body.scrollLeft],null);e=Jf.a(k)+f.offsetWidth/2;k=Ye.a(k)+f.offsetHeight/2;k=a.pageY-k;f.x=a.pageX-e;f.y=k}a=xg(uf.a(b),g)}else a=null;return a}).on("dragmove",bh).on("dragend",function(a){var c=a.target,f=c.parentNode;a=a.dropzone;document.getElementById("chessground-moving-square").style.display="none";u(a)&&a.classList.remove("drag-over");c.classList.remove("dragging");c=Dg(f);return u(c)?u(u(a)?I.b(f.parentNode,a.parentNode):a)?xg(wf.a(b),Nc.b(Dg,new Z(null,2,5,$,[f,a],null))):xg(zf.a(b),c):null}))}function dh(a){return Ug(a).set({draggable:!0})}function eh(a){return Ug(a).set({draggable:!1})}function fh(a){return a.target.classList.add("drag-over")}function gh(a){return a.target.classList.remove("drag-over")}function hh(a){var b=ah(a.target),c=Hf.a(b)-1,d=df.a(b)-1,e=2*c,f=2*d;a=document.getElementById("chessground-moving-square");null==Ke.a(a.offsetParent)&&(a.style.height=""+A.a(e)+"px",a.style.width=""+A.a(f)+"px",a.style.left=""+A.a(Jf.a(b)-d/2)+"px",a.style.top=""+A.a(Ye.a(b)-c/2)+"px",a.style.display="block",Ae(Wg,b));d=Oa(Wg);c=Jf.a(b)-Jf.a(d);b=Ye.a(b)-Ye.a(d);return a.style[Cg]="translate3d("+A.a(c)+"px, "+A.a(b)+"px, 0)"}function ih(){return null}function jh(a){interact(a).dropzone(!0).on("dragenter",u(Bg)?hh:fh).on("dragleave",u(Bg)?ih:gh)}function kh(a){a.x=0;a.y=0;return a.style[Cg]=""}function lh(a){var b=cc(a)?Qb.b(Zd,a):a;a=V.b(b,Re);b=V.b(b,Me);return"<div class='chessground-piece "+A.a(a)+" "+A.a(b)+"'></div>"}function mh(a,b,c,d,e){c=Qb.b(A,Nc.b(function(a){var b=U.c(a,0,null);a=U.c(a,1,null);return""+A.a(qc(b))+":"+A.a(a)+";"},c));var f=I.b(kc.c(b,0,1),u(e)?"h":"a")?"data-coord-y='"+A.a(kc.c(b,1,2))+"' ":"";e=I.b(kc.c(b,1,2),u(e)?"1":"8")?"data-coord-x='"+A.a(kc.c(b,0,1))+"' ":"";d=u(d)?lh(d):null;Tb(a.id)&&(a.id="chessground"+A.a(Be.b(sg,Db)));return"<div class='chessground-square' "+A.a(f)+A.a(e)+"id='"+A.a(""+A.a(a.id)+A.a(b))+"' data-key='"+A.a(b)+"' style='"+A.a(c)+"'>"+A.a(d)+"</div>"}function nh(a,b){var c=I.b(ff.a(a),"white"),d=Xe.a(a),e=function(){return function(a,c){return function l(d){return new sc(null,function(a,c){return function(){for(var e=d;;){var f=K(e);if(f){var g=f,C=L(g);if(f=K(function(a,c,d,e,f,g){return function s(l){return new sc(null,function(a,c,d,e,f,g){return function(){for(;;){var a=K(l);if(a){if(Zb(a)){var d=F(a),e=T(d),m=wc(e);a:{for(var n=0;;)if(n<e){var p=B.b(d,n),t=V.b("abcdefgh",p-1),t=""+A.a(t)+A.a(c),p=new Dd([f?Jf:xf,""+A.a(12.5*(p-1))+"%",f?Ve:Ye,""+A.a(12.5*(c-1))+"%"]),x=Ng(g,t),t=mh(b,t,p,x,f);m.add(t);n+=1}else{d=!0;break a}d=void 0}return d?zc(m.L(),s(H(a))):zc(m.L(),null)}d=L(a);m=V.b("abcdefgh",d-1);m=""+A.a(m)+A.a(c);d=new Dd([f?Jf:xf,""+A.a(12.5*(d-1))+"%",f?Ve:Ye,""+A.a(12.5*(c-1))+"%"]);e=Ng(g,m);return S(mh(b,m,d,e,f),s(N(a)))}return null}}}(a,c,d,e,f,g),null,null)}}(e,C,g,f,a,c)(je.b(1,9))))return Ec.b(f,l(N(e)));e=N(e)}else return null}}}(a,c),null,null)}}(c,d)(je.b(1,9))}();return"<div class='chessground-board'>"+A.a(Qb.b(A,e))+"</div>"}function oh(a,b,c){return u(Kf.a(a))?"<div class='spare-pieces "+A.a(c)+" "+A.a(b)+"'>"+A.a(Qb.b(A,Nc.b(function(a){return"<div class='chessground-piece "+A.a(a)+" "+A.a(b)+"'></div>"},Kg)))+"</div>":null}function ph(a,b){a.preventDefault();return xg(qf.a(b),Dg(a.target))}function qh(a,b){for(var c=K(new Z(null,2,5,$,["touchstart","mousedown"],null)),d=null,e=0,f=0;;)if(f<e){var g=d.t(null,f);a.addEventListener(g,function(){return function(a){return ph(a,b)}}(c,d,e,f,g));f+=1}else{var k=K(c);if(k){var l=k;Zb(l)?(c=F(l),e=H(l),d=c,l=T(c),c=e,e=l):(g=L(l),a.addEventListener(g,function(){return function(a){return ph(a,b)}}(c,d,e,f,g,l,k)),c=P(l),d=null,e=0);f=0}else break}}function rh(a,b){return document.getElementById(""+A.a(a.id)+A.a(b))}function sh(a,b,c){u(c)&&rh(a,c).classList.remove("selected");u(b)&&rh(a,b).classList.add("selected")}function th(a,b,c,d){d=K(d);for(var e=null,f=0,g=0;;)if(g<f){var k=e.t(null,g);rh(a,k).classList.remove("moved");g+=1}else if(d=K(d))e=d,Zb(e)?(d=F(e),g=H(e),e=d,f=T(d),d=g):(d=L(e),rh(a,d).classList.remove("moved"),d=P(e),e=null,f=0),g=0;else break;b=K(new Z(null,2,5,$,[b,c],null));c=null;for(f=e=0;;)if(f<e)d=c.t(null,f),rh(a,d).classList.add("moved"),f+=1;else if(b=K(b))c=b,Zb(c)?(b=F(c),e=H(c),c=b,d=T(b),b=e,e=d):(d=L(c),rh(a,d).classList.add("moved"),b=P(c),c=null,e=0),f=0;else return null}function uh(a,b,c){c=K(c);for(var d=null,e=0,f=0;;)if(f<e){var g=d.t(null,f),g=rh(a,g);u(g)&&g.classList.remove("dest");f+=1}else if(c=K(c))Zb(c)?(e=F(c),c=H(c),d=e,e=T(e)):(d=L(c),d=rh(a,d),u(d)&&d.classList.remove("dest"),c=P(c),d=null,e=0),f=0;else break;b=K(b);c=null;for(e=d=0;;)if(e<d)f=c.t(null,e),f=rh(a,f),u(f)&&f.classList.add("dest"),e+=1;else if(b=K(b))Zb(b)?(d=F(b),b=H(b),c=d,d=T(d)):(f=L(b),c=rh(a,f),u(c)&&c.classList.add("dest"),b=P(b),c=null,d=0),e=0;else return null}function vh(a,b,c){b=rh(a,b);a=rh(a,c);c=(u(b)?b:document).querySelector(".chessground-piece");kh(c);b=(u(a)?a:document).querySelector(".chessground-piece");u(b)&&u(b.parentNode)&&(b.parentNode.removeChild(b),b=b[Rg],u(b)&&Be.c(Tg,Nb,b));a.appendChild(c)}function wh(a,b){var c=rh(a,b),c=(u(c)?c:document).querySelector(".chessground-piece");return u(c)?kh(c):null}function xh(a,b){for(var c=K((u(a)?a:document).querySelectorAll(".chessground-square")),d=null,e=0,f=0;;)if(f<e){var g=d.t(null,f);jh(g);qh(g,b);f+=1}else if(c=K(c))d=c,Zb(d)?(c=F(d),e=H(d),d=c,g=T(c),c=e,e=g):(g=L(d),jh(g),qh(g,b),c=P(d),d=null,e=0),f=0;else break}function yh(a,b,c){for(var d=Re.a(Df.a(b)),e=K((u(a)?a:document).querySelectorAll(".chessground-piece")),f=null,g=0,k=0;;)if(k<g){a=f.t(null,k);var l=Ug(a),m=u(yg(a,"white"))?"white":"black",m=I.b(d,"both")||I.b(d,m);u(l)?(m?dh:eh).call(null,a,b):m&&ch(a,c,b);k+=1}else if(a=K(e))e=a,Zb(e)?(f=F(e),e=H(e),a=f,g=T(f),f=a):(a=L(e),f=Ug(a),g=u(yg(a,"white"))?"white":"black",g=I.b(d,"both")||I.b(d,g),u(f)?(g?dh:eh).call(null,a,b):g&&ch(a,c,b),e=P(e),f=null,g=0),k=0;else return null}function zh(a,b,c){(u(a)?a:document).querySelector(".chessground-board").outerHTML=nh(b,a);xh(a,c);return yh(a,b,c)}function Ah(a,b,c){var d;d=""+A.a(oh(b,I.b(ff.a(b),"white")?"black":"white","top"))+A.a(nh(b,a))+A.a(oh(b,I.b(ff.a(b),"white")?"white":"black","bottom"));a.innerHTML=d;xh(a,c);return yh(a,b,c)}var vg=Mb([Oe,Pe,Qe,Xe,ef,ff,kf,sf,Df,Kf],[null,null,null,Ad,null,"white",!1,null,new r(null,6,[Ze,!0,Re,"both",yf,null,zf,"revert",Ef,!0,cf,new r(null,1,[pf,function(){return null}],null)],null),!1]);function Bh(a,b){return W.c(a,Xe,Mg(b))}function Ch(a){a=Fg(Fg(Eg(a),new Z(null,1,5,$,[Df],null)),new Z(null,2,5,$,[Df,cf],null));return Nb.b(Bh(ug(a),Oe.a(a)),Oe)}function Dh(a,b){var c;c=Xe.a(a);c=Re.a(Ng(c,b));var d=Df.a(a),d=Re.a(d);return u(c)?I.b(d,"both")||I.b(d,c):c}function Eh(a,b,c){var d=Dh(a,b);return u(d)?(d=Ze.a(Df.a(a)),u(d)?d:wg(Sc.b(a,new Z(null,3,5,$,[Df,yf,b],null)),c)):d}function Fh(a,b){return u(Dh(a,b))?Sc.b(a,new Z(null,3,5,$,[Df,yf,b],null)):null}var Gh=function(){function a(a,d){var e=null;1<arguments.length&&(e=Q(Array.prototype.slice.call(arguments,1),0));return b.call(this,a,e)}function b(a,b){return u(a)?Qb.b(a,Nc.b(Fe,b)):null}a.o=1;a.j=function(a){var d=L(a);a=N(a);return b(d,a)};a.f=b;return a}();function Hh(){return null}function Ih(a,b){var c=Fh(a,b),d=W.f(a,Qe,b,Q([ef,c],0));return new Z(null,2,5,$,[d,function(c){return function(d){sh(d,b,Qe.a(a));return uh(d,c,ef.a(a))}}(c,d)],null)}function Jh(a,b){var c=Fh(a,b),d=W.f(a,Qe,b,Q([kf,!0,ef,c],0));return new Z(null,2,5,$,[d,function(c){return function(d){sh(d,b,Qe.a(a));return uh(d,c,ef.a(a))}}(c,d)],null)}function Kh(a,b){var c=U.c(b,0,null),d=U.c(b,1,null),e=Pg(Xe.a(a),c,d);if(u(e)){var f=Nb.b(W.f(a,Xe,e,Q([Pe,new Z(null,2,5,$,[c,d],null)],0)),sf);return new Z(null,2,5,$,[f,function(b,c,d,e,f,p){return function(b){vh(b,f,p);var c=sf.a(a);u(c)&&rh(b,c).classList.remove("checked");return th(b,f,p,Pe.a(a))}}(f,e,e,b,c,d)],null)}return new Z(null,2,5,$,[a,Hh],null)}function Lh(a,b){var c=U.c(b,0,null),d=U.c(b,1,null),e=u(Eh(a,c,d))?function(){var e=Pg(Xe.a(a),c,d);if(u(e)){var f=Uc(Nb.b(Nb.b(W.f(a,Xe,e,Q([kf,!1,Pe,new Z(null,2,5,$,[c,d],null)],0)),sf),Qe),new Z(null,2,5,$,[Df,yf],null),null);return new Z(null,2,5,$,[f,function(b,c,d,e,f,g){return function(d){sh(d,null,Qe.a(a));uh(d,null,ef.a(a));th(d,f,g,Pe.a(a));var e=sf.a(a);u(e)&&rh(d,e).classList.remove("checked");vh(d,f,g);return Gh.f(pf.a(cf.a(Df.a(b))),Q([f,g,c],0))}}(f,e,e,b,c,d)],null)}return null}():null;if(u(e))return e;if(I.b(c,d)){var f=W.c(a,kf,!1);return new Z(null,2,5,$,[f,function(a,b,c,d){return function(a){return wh(a,d)}}(f,e,b,c,d)],null)}if(u(function(){var b=la(kf.a(a));return b?Dh(a,d):b}()))return Ih(a,d);f=W.c(Nb.b(a,Qe),kf,!1);return new Z(null,2,5,$,[f,function(b,c,d,e){return function(b){wh(b,e);sh(b,null,Qe.a(a));return uh(b,null,ef.a(a))}}(f,e,b,c,d)],null)}function Mh(a,b){var c=Qe.a(a);return u(c)?I.b(c,b)?new Z(null,2,5,$,[a,Hh],null):Lh(a,new Z(null,2,5,$,[c,b],null)):u(Dh(a,b))?Ih(a,b):new Z(null,2,5,$,[a,function(){return function(b){sh(b,null,Qe.a(a));return uh(b,null,ef.a(a))}}(c)],null)}function Nh(a,b){var c=U.c(b,0,null),d=U.c(b,1,null),e=W.c(a,Pe,new Z(null,2,5,$,[c,d],null));return new Z(null,2,5,$,[e,function(b,c,d,e){return function(b){return th(b,d,e,Pe.a(a))}}(e,b,c,d)],null)}function Oh(a,b){var c=U.c(b,0,null),d=W.c(a,sf,c);return new Z(null,2,5,$,[d,function(a,b,c){return function(a){return rh(a,c).classList.add("checked")}}(d,b,c)],null)}function Ph(a,b){if(u(function(){var c=wg(Jg,b);return u(c)?Ic.b(b,ff.a(a)):c}())){var c=W.c(a,ff,b);return new Z(null,2,5,$,[c,function(a){return function(b,c){return zh(b,a,c)}}(c)],null)}return new Z(null,2,5,$,[a,Hh],null)}function Qh(a){return Ph(a,I.b(ff.a(a),"white")?"black":"white")}function Rh(a,b){var c=Uc(Uc(a,new Z(null,2,5,$,[Df,yf],null),b),new Z(null,2,5,$,[Df,Ze],null),!1);return new Z(null,2,5,$,[c,function(a){return function(b,c){return yh(b,a,c)}}(c)],null)}function Sh(a,b){if(u(wg(Kb.f(Jg,"both",Q(["none"],0)),b))){var c=Uc(a,new Z(null,2,5,$,[Df,Re],null),b);return new Z(null,2,5,$,[c,function(a){return function(b,c){return yh(b,a,c)}}(c)],null)}return new Z(null,2,5,$,[a,Hh],null)}function Th(a,b){var c=Bh(a,b);return new Z(null,2,5,$,[c,function(a){return function(b,c){return zh(b,a,c)}}(c)],null)}function Uh(a,b){var c=Vc.c(a,new Z(null,1,5,$,[Xe],null),function(a){return Og(a,b)});return new Z(null,2,5,$,[c,function(a){return function(b,c){return zh(b,a,c)}}(c)],null)}function Vh(a,b){if(I.b("trash",zf.a(Df.a(a)))){var c=Uh(a,new Dd([b,null])),d=U.c(c,0,null),c=U.c(c,1,null);return new Z(null,2,5,$,[Nb.b(d,Qe),c],null)}d=Nb.b(a,Qe);return new Z(null,2,5,$,[d,function(){return function(c){sh(c,null,Qe.a(a));uh(c,null,ef.a(a));return wh(c,b)}}(d)],null)}function Wh(a){a=Uc(W.c(a,Xe,Lg),new Z(null,2,5,$,[Df,yf],null),null);
return new Z(null,2,5,$,[a,function(a){return function(c,d){return Ah(c,a,d)}}(a)],null)}NodeList.prototype.Kb=!0;NodeList.prototype.G=function(){return Q.b(this,0)};function Xh(a){for(var b=K(nf.a(a)),c=null,d=0,e=0;;)if(e<d){var f=c.t(null,e),g=U.c(f,0,null),k=U.c(f,1,null),l=qg.a(1);ag(function(b,c,d,e,f,g,k,l){return function(){var m=function(){return function(a,b,c,d,e){return function(){function a(b){for(;;){var c=function(){try{for(;;){var a=e(b);if(!pc(a,gf))return a}}catch(c){if(c instanceof Object)return b[5]=c,og(b),gf;if(w)throw c;return null}}();if(!pc(c,gf))return c}}function b(){var a=[null,null,null,null,null,null,null,null,null,null];a[0]=c;a[1]=1;return a}var c=null,c=function(c){switch(arguments.length){case 0:return b.call(this);case 1:return a.call(this,c)}throw Error("Invalid arity: "+arguments.length)};c.n=b;c.a=a;return c}()}(b,c,d,e,function(b,c,d,e,f,g,k,l){return function(b){var c=b[1];if(7===c){var d=b[2],c="on channel ["+A.a(k)+"], received value ["+A.a(d)+"]",c=tg.f(Q([c],0)),e=jf.a(a),e=Oa(e),d=l.b?l.b(e,d):l.call(null,e,d),e=U.c(d,0,null),d=U.c(d,1,null),f=jf.a(a),e=Ae(f,e),f=Te.a(a),g=We.a(a),d=d.b?d.b(f,g):d.call(null,f,g);b[7]=e;b[8]=c;b[9]=d;b[2]=null;b[1]=2;return gf}return 6===c?(c=b[2],b[2]=c,b[1]=3,gf):5===c?(b[2]=null,b[1]=6,gf):4===c?(c=We.a(a),c=V.b(c,k),lg(b,c)):3===c?(c=b[2],ng(b,c)):2===c?(b[1]=4,gf):1===c?(b[2]=null,b[1]=2,gf):null}}(b,c,d,e,f,g,k,l),f,g,k,l)}(),n=function(){var a=m.n?m.n():m.call(null);a[6]=f;return a}();return kg(n)}}(b,c,d,e,l,f,g,k));e+=1}else if(l=K(b)){f=l;if(Zb(f))b=F(f),e=H(f),c=b,d=T(b),b=e;else{var m=L(f),g=U.c(m,0,null),k=U.c(m,1,null),n=qg.a(1);ag(function(b,c,d,e,f,g,k,l,m,n){return function(){var na=function(){return function(a,b,c,d,e){return function(){function a(b){for(;;){var c=function(){try{for(;;){var a=e(b);if(!pc(a,gf))return a}}catch(c){if(c instanceof Object)return b[5]=c,og(b),gf;if(w)throw c;return null}}();if(!pc(c,gf))return c}}function b(){var a=[null,null,null,null,null,null,null,null,null,null];a[0]=c;a[1]=1;return a}var c=null,c=function(c){switch(arguments.length){case 0:return b.call(this);case 1:return a.call(this,c)}throw Error("Invalid arity: "+arguments.length)};c.n=b;c.a=a;return c}()}(b,c,d,e,function(b,c,d,e,f,g,k,l){return function(b){var c=b[1];if(7===c){var d=b[2],c="on channel ["+A.a(k)+"], received value ["+A.a(d)+"]",c=tg.f(Q([c],0)),e=jf.a(a),e=Oa(e),d=l.b?l.b(e,d):l.call(null,e,d),e=U.c(d,0,null),d=U.c(d,1,null),f=jf.a(a),e=Ae(f,e),f=Te.a(a),g=We.a(a),d=d.b?d.b(f,g):d.call(null,f,g);b[7]=d;b[8]=c;b[9]=e;b[2]=null;b[1]=2;return gf}return 6===c?(c=b[2],b[2]=c,b[1]=3,gf):5===c?(b[2]=null,b[1]=6,gf):4===c?(c=We.a(a),c=V.b(c,k),lg(b,c)):3===c?(c=b[2],ng(b,c)):2===c?(b[1]=4,gf):1===c?(b[2]=null,b[1]=2,gf):null}}(b,c,d,e,f,g,k,l,m,n),f,g,k,l,m,n)}(),gb=function(){var a=na.n?na.n():na.call(null);a[6]=f;return a}();return kg(gb)}}(b,c,d,e,n,m,g,k,f,l));b=P(f);c=null;d=0}e=0}else break}function Yh(a,b){var c=Ke.a(b),c=new r(null,4,[Te,a,jf,ze.a(Ch(u(c)?c:Ad)),We,Mb([Se,Ue,af,bf,lf,mf,of,qf,uf,wf,zf,Af,Ff,Gf,If],[qg.n(),qg.n(),qg.n(),qg.n(),qg.n(),qg.n(),qg.n(),qg.n(),qg.n(),qg.n(),qg.n(),qg.n(),qg.n(),qg.n(),qg.n()]),nf,Mb([Se,Ue,af,bf,lf,mf,of,qf,uf,wf,zf,Af,Ff,Gf,If],[Qh,Sh,Oh,Uh,Nh,Kh,Rh,Mh,Jh,Lh,Vh,Th,Ih,Ph,Wh])],null),d=Te.a(c),e;e=jf.a(c);e=Oa(e);Ah(d,e,We.a(c));Xh(c);return Qg(We.a(c),jf.a(c),Te.a(c))}var Zh=["chessground","main"],$h=this;Zh[0]in $h||!$h.execScript||$h.execScript("var "+Zh[0]);for(var ai;Zh.length&&(ai=Zh.shift());)Zh.length||void 0===Yh?$h=$h[ai]?$h[ai]:$h[ai]={}:$h[ai]=Yh;return this.chessground}.call({})});